exports.ids = [7];
exports.modules = {

/***/ 787:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index_dd3f93e0_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(20);
/* harmony import */ var jss_preset_default__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(75);
/* harmony import */ var wix_rich_content_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(7);
/* harmony import */ var wix_rich_content_common_dist_statics_locale_messages_en_json__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(53);
var wix_rich_content_common_dist_statics_locale_messages_en_json__WEBPACK_IMPORTED_MODULE_6___namespace = /*#__PURE__*/__webpack_require__.t(53, 1);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(4);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(74);
/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_dom_server__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var punycode__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(54);
/* harmony import */ var punycode__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(punycode__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(8);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _wix_draft_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(5);
/* harmony import */ var _wix_draft_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_wix_draft_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var react_measure__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(60);
/* harmony import */ var wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(3);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(76);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(12);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(22);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _EditorModal_3e88b00c_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(896);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _EditorModal_3e88b00c_js__WEBPACK_IMPORTED_MODULE_17__["a"]; });

/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(845);
/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(react_modal__WEBPACK_IMPORTED_MODULE_18__);

//# sourceMappingURL=EditorModal-b53514f3.js.map


/***/ }),

/***/ 845:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _Modal = __webpack_require__(897);

var _Modal2 = _interopRequireDefault(_Modal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _Modal2.default;
module.exports = exports["default"];

/***/ }),

/***/ 846:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.canUseDOM = undefined;

var _exenv = __webpack_require__(902);

var _exenv2 = _interopRequireDefault(_exenv);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var EE = _exenv2.default;

var SafeHTMLElement = EE.canUseDOM ? window.HTMLElement : {};

var canUseDOM = exports.canUseDOM = EE.canUseDOM;

exports.default = SafeHTMLElement;

/***/ }),

/***/ 859:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = findTabbableDescendants;
/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

var tabbableNode = /input|select|textarea|button|object/;

function hidesContents(element) {
  var zeroSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;

  // If the node is empty, this is good enough
  if (zeroSize && !element.innerHTML) return true;

  // Otherwise we need to check some styles
  var style = window.getComputedStyle(element);
  return zeroSize ? style.getPropertyValue("overflow") !== "visible" : style.getPropertyValue("display") == "none";
}

function visible(element) {
  var parentElement = element;
  while (parentElement) {
    if (parentElement === document.body) break;
    if (hidesContents(parentElement)) return false;
    parentElement = parentElement.parentNode;
  }
  return true;
}

function focusable(element, isTabIndexNotNaN) {
  var nodeName = element.nodeName.toLowerCase();
  var res = tabbableNode.test(nodeName) && !element.disabled || (nodeName === "a" ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);
  return res && visible(element);
}

function tabbable(element) {
  var tabIndex = element.getAttribute("tabindex");
  if (tabIndex === null) tabIndex = undefined;
  var isTabIndexNaN = isNaN(tabIndex);
  return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);
}

function findTabbableDescendants(element) {
  return [].slice.call(element.querySelectorAll("*"), 0).filter(tabbable);
}
module.exports = exports["default"];

/***/ }),

/***/ 860:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.assertNodeList = assertNodeList;
exports.setElement = setElement;
exports.validateElement = validateElement;
exports.hide = hide;
exports.show = show;
exports.documentNotReadyOrSSRTesting = documentNotReadyOrSSRTesting;
exports.resetForTesting = resetForTesting;

var _warning = __webpack_require__(901);

var _warning2 = _interopRequireDefault(_warning);

var _safeHTMLElement = __webpack_require__(846);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var globalElement = null;

function assertNodeList(nodeList, selector) {
  if (!nodeList || !nodeList.length) {
    throw new Error("react-modal: No elements were found for selector " + selector + ".");
  }
}

function setElement(element) {
  var useElement = element;
  if (typeof useElement === "string" && _safeHTMLElement.canUseDOM) {
    var el = document.querySelectorAll(useElement);
    assertNodeList(el, useElement);
    useElement = "length" in el ? el[0] : el;
  }
  globalElement = useElement || globalElement;
  return globalElement;
}

function validateElement(appElement) {
  if (!appElement && !globalElement) {
    (0, _warning2.default)(false, ["react-modal: App element is not defined.", "Please use `Modal.setAppElement(el)` or set `appElement={el}`.", "This is needed so screen readers don't see main content", "when modal is opened. It is not recommended, but you can opt-out", "by setting `ariaHideApp={false}`."].join(" "));

    return false;
  }

  return true;
}

function hide(appElement) {
  if (validateElement(appElement)) {
    (appElement || globalElement).setAttribute("aria-hidden", "true");
  }
}

function show(appElement) {
  if (validateElement(appElement)) {
    (appElement || globalElement).removeAttribute("aria-hidden");
  }
}

function documentNotReadyOrSSRTesting() {
  globalElement = null;
}

function resetForTesting() {
  globalElement = null;
}

/***/ }),

/***/ 896:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EditorModal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return createCommonjsModule; });
/* harmony import */ var _index_dd3f93e0_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7);
/* harmony import */ var wix_rich_content_common_dist_statics_locale_messages_en_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(53);
var wix_rich_content_common_dist_statics_locale_messages_en_json__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(53, 1);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(74);
/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_dom_server__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(5);
/* harmony import */ var _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react_measure__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(60);
/* harmony import */ var wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(3);
/* harmony import */ var react_tooltip__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(76);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(12);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(22);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(845);
/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_modal__WEBPACK_IMPORTED_MODULE_14__);
function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var _extends_1=createCommonjsModule((function(module){function _extends(){return module.exports=_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}module.exports=_extends})),inheritsLoose=function(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass},runtime=createCommonjsModule((function(module){!function(global){var Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag",runtime=global.regeneratorRuntime;if(runtime)module.exports=runtime;else{(runtime=global.regeneratorRuntime=module.exports).wrap=wrap;var ContinueSentinel={},IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},runtime.AsyncIterator=AsyncIterator,runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return{value:void 0,done:!0}}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){prototype[method]=function(arg){return this._invoke(method,arg)}}))}function AsyncIterator(generator){var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new Promise((function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):Promise.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())})),g=function(){return this||"object"==typeof self&&self}()||Function("return this")(),hadRuntime=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime")>=0,oldRuntime=hadRuntime&&g.regeneratorRuntime;g.regeneratorRuntime=void 0;var runtimeModule=runtime;if(hadRuntime)g.regeneratorRuntime=oldRuntime;else try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=void 0}var regenerator=runtimeModule;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var asyncToGenerator=function(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}},createEditorStateWithText=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(text){return _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.EditorState.createWithContent(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.ContentState.createFromText(text))}}));unwrapExports(createEditorStateWithText);var composeDecorators=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){for(var _len=arguments.length,funcs=Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];if(0===funcs.length)return function(arg){return arg};if(1===funcs.length)return funcs[0];var last=funcs[funcs.length-1];return function(){for(var result=last.apply(void 0,arguments),i=funcs.length-2;i>=0;i-=1){var f=funcs[i];result=f(result)}return result}}}));unwrapExports(composeDecorators);var immutable=createCommonjsModule((function(module,exports){module.exports=function(){var SLICE$0=Array.prototype.slice;function createClass(ctor,superClass){superClass&&(ctor.prototype=Object.create(superClass.prototype)),ctor.prototype.constructor=ctor}function Iterable(value){return isIterable(value)?value:Seq(value)}function KeyedIterable(value){return isKeyed(value)?value:KeyedSeq(value)}function IndexedIterable(value){return isIndexed(value)?value:IndexedSeq(value)}function SetIterable(value){return isIterable(value)&&!isAssociative(value)?value:SetSeq(value)}function isIterable(maybeIterable){return!(!maybeIterable||!maybeIterable[IS_ITERABLE_SENTINEL])}function isKeyed(maybeKeyed){return!(!maybeKeyed||!maybeKeyed[IS_KEYED_SENTINEL])}function isIndexed(maybeIndexed){return!(!maybeIndexed||!maybeIndexed[IS_INDEXED_SENTINEL])}function isAssociative(maybeAssociative){return isKeyed(maybeAssociative)||isIndexed(maybeAssociative)}function isOrdered(maybeOrdered){return!(!maybeOrdered||!maybeOrdered[IS_ORDERED_SENTINEL])}createClass(KeyedIterable,Iterable),createClass(IndexedIterable,Iterable),createClass(SetIterable,Iterable),Iterable.isIterable=isIterable,Iterable.isKeyed=isKeyed,Iterable.isIndexed=isIndexed,Iterable.isAssociative=isAssociative,Iterable.isOrdered=isOrdered,Iterable.Keyed=KeyedIterable,Iterable.Indexed=IndexedIterable,Iterable.Set=SetIterable;var IS_ITERABLE_SENTINEL="@@__IMMUTABLE_ITERABLE__@@",IS_KEYED_SENTINEL="@@__IMMUTABLE_KEYED__@@",IS_INDEXED_SENTINEL="@@__IMMUTABLE_INDEXED__@@",IS_ORDERED_SENTINEL="@@__IMMUTABLE_ORDERED__@@",NOT_SET={},CHANGE_LENGTH={value:!1},DID_ALTER={value:!1};function MakeRef(ref){return ref.value=!1,ref}function SetRef(ref){ref&&(ref.value=!0)}function OwnerID(){}function arrCopy(arr,offset){offset=offset||0;for(var len=Math.max(0,arr.length-offset),newArr=new Array(len),ii=0;ii<len;ii++)newArr[ii]=arr[ii+offset];return newArr}function ensureSize(iter){return void 0===iter.size&&(iter.size=iter.__iterate(returnTrue)),iter.size}function wrapIndex(iter,index){if("number"!=typeof index){var uint32Index=index>>>0;if(""+uint32Index!==index||4294967295===uint32Index)return NaN;index=uint32Index}return index<0?ensureSize(iter)+index:index}function returnTrue(){return!0}function wholeSlice(begin,end,size){return(0===begin||void 0!==size&&begin<=-size)&&(void 0===end||void 0!==size&&end>=size)}function resolveBegin(begin,size){return resolveIndex(begin,size,0)}function resolveEnd(end,size){return resolveIndex(end,size,size)}function resolveIndex(index,size,defaultIndex){return void 0===index?defaultIndex:index<0?Math.max(0,size+index):void 0===size?index:Math.min(size,index)}var EMPTY_SEQ,EMPTY_REPEAT,EMPTY_RANGE,REAL_ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,ITERATOR_SYMBOL=REAL_ITERATOR_SYMBOL||"@@iterator";function Iterator(next){this.next=next}function iteratorValue(type,k,v,iteratorResult){var value=0===type?k:1===type?v:[k,v];return iteratorResult?iteratorResult.value=value:iteratorResult={value:value,done:!1},iteratorResult}function iteratorDone(){return{value:void 0,done:!0}}function hasIterator(maybeIterable){return!!getIteratorFn(maybeIterable)}function isIterator(maybeIterator){return maybeIterator&&"function"==typeof maybeIterator.next}function getIterator(iterable){var iteratorFn=getIteratorFn(iterable);return iteratorFn&&iteratorFn.call(iterable)}function getIteratorFn(iterable){var iteratorFn=iterable&&(REAL_ITERATOR_SYMBOL&&iterable[REAL_ITERATOR_SYMBOL]||iterable["@@iterator"]);if("function"==typeof iteratorFn)return iteratorFn}function isArrayLike(value){return value&&"number"==typeof value.length}function Seq(value){return null==value?emptySequence():isIterable(value)?value.toSeq():function(value){var seq=maybeIndexedSeqFromValue(value)||"object"==typeof value&&new ObjectSeq(value);if(!seq)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+value);return seq}(value)}function KeyedSeq(value){return null==value?emptySequence().toKeyedSeq():isIterable(value)?isKeyed(value)?value.toSeq():value.fromEntrySeq():keyedSeqFromValue(value)}function IndexedSeq(value){return null==value?emptySequence():isIterable(value)?isKeyed(value)?value.entrySeq():value.toIndexedSeq():indexedSeqFromValue(value)}function SetSeq(value){return(null==value?emptySequence():isIterable(value)?isKeyed(value)?value.entrySeq():value:indexedSeqFromValue(value)).toSetSeq()}function ArraySeq(array){this._array=array,this.size=array.length}function ObjectSeq(object){var keys=Object.keys(object);this._object=object,this._keys=keys,this.size=keys.length}function IterableSeq(iterable){this._iterable=iterable,this.size=iterable.length||iterable.size}function IteratorSeq(iterator){this._iterator=iterator,this._iteratorCache=[]}function isSeq(maybeSeq){return!(!maybeSeq||!maybeSeq["@@__IMMUTABLE_SEQ__@@"])}function emptySequence(){return EMPTY_SEQ||(EMPTY_SEQ=new ArraySeq([]))}function keyedSeqFromValue(value){var seq=Array.isArray(value)?new ArraySeq(value).fromEntrySeq():isIterator(value)?new IteratorSeq(value).fromEntrySeq():hasIterator(value)?new IterableSeq(value).fromEntrySeq():"object"==typeof value?new ObjectSeq(value):void 0;if(!seq)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+value);return seq}function indexedSeqFromValue(value){var seq=maybeIndexedSeqFromValue(value);if(!seq)throw new TypeError("Expected Array or iterable object of values: "+value);return seq}function maybeIndexedSeqFromValue(value){return isArrayLike(value)?new ArraySeq(value):isIterator(value)?new IteratorSeq(value):hasIterator(value)?new IterableSeq(value):void 0}function seqIterate(seq,fn,reverse,useKeys){var cache=seq._cache;if(cache){for(var maxIndex=cache.length-1,ii=0;ii<=maxIndex;ii++){var entry=cache[reverse?maxIndex-ii:ii];if(!1===fn(entry[1],useKeys?entry[0]:ii,seq))return ii+1}return ii}return seq.__iterateUncached(fn,reverse)}function seqIterator(seq,type,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1,ii=0;return new Iterator((function(){var entry=cache[reverse?maxIndex-ii:ii];return ii++>maxIndex?{value:void 0,done:!0}:iteratorValue(type,useKeys?entry[0]:ii-1,entry[1])}))}return seq.__iteratorUncached(type,reverse)}function fromJS(json,converter){return converter?function fromJSWith(converter,json,key,parentJSON){return Array.isArray(json)?converter.call(parentJSON,key,IndexedSeq(json).map((function(v,k){return fromJSWith(converter,v,k,json)}))):isPlainObj(json)?converter.call(parentJSON,key,KeyedSeq(json).map((function(v,k){return fromJSWith(converter,v,k,json)}))):json}(converter,json,"",{"":json}):fromJSDefault(json)}function fromJSDefault(json){return Array.isArray(json)?IndexedSeq(json).map(fromJSDefault).toList():isPlainObj(json)?KeyedSeq(json).map(fromJSDefault).toMap():json}function isPlainObj(value){return value&&(value.constructor===Object||void 0===value.constructor)}function is(valueA,valueB){if(valueA===valueB||valueA!=valueA&&valueB!=valueB)return!0;if(!valueA||!valueB)return!1;if("function"==typeof valueA.valueOf&&"function"==typeof valueB.valueOf){if((valueA=valueA.valueOf())===(valueB=valueB.valueOf())||valueA!=valueA&&valueB!=valueB)return!0;if(!valueA||!valueB)return!1}return!("function"!=typeof valueA.equals||"function"!=typeof valueB.equals||!valueA.equals(valueB))}function deepEqual(a,b){if(a===b)return!0;if(!isIterable(b)||void 0!==a.size&&void 0!==b.size&&a.size!==b.size||void 0!==a.__hash&&void 0!==b.__hash&&a.__hash!==b.__hash||isKeyed(a)!==isKeyed(b)||isIndexed(a)!==isIndexed(b)||isOrdered(a)!==isOrdered(b))return!1;if(0===a.size&&0===b.size)return!0;var notAssociative=!isAssociative(a);if(isOrdered(a)){var entries=a.entries();return b.every((function(v,k){var entry=entries.next().value;return entry&&is(entry[1],v)&&(notAssociative||is(entry[0],k))}))&&entries.next().done}var flipped=!1;if(void 0===a.size)if(void 0===b.size)"function"==typeof a.cacheResult&&a.cacheResult();else{flipped=!0;var _=a;a=b,b=_}var allEqual=!0,bSize=b.__iterate((function(v,k){if(notAssociative?!a.has(v):flipped?!is(v,a.get(k,NOT_SET)):!is(a.get(k,NOT_SET),v))return allEqual=!1,!1}));return allEqual&&a.size===bSize}function Repeat(value,times){if(!(this instanceof Repeat))return new Repeat(value,times);if(this._value=value,this.size=void 0===times?1/0:Math.max(0,times),0===this.size){if(EMPTY_REPEAT)return EMPTY_REPEAT;EMPTY_REPEAT=this}}function invariant(condition,error){if(!condition)throw new Error(error)}function Range(start,end,step){if(!(this instanceof Range))return new Range(start,end,step);if(invariant(0!==step,"Cannot step a Range by 0"),start=start||0,void 0===end&&(end=1/0),step=void 0===step?1:Math.abs(step),end<start&&(step=-step),this._start=start,this._end=end,this._step=step,this.size=Math.max(0,Math.ceil((end-start)/step-1)+1),0===this.size){if(EMPTY_RANGE)return EMPTY_RANGE;EMPTY_RANGE=this}}function Collection(){throw TypeError("Abstract")}function KeyedCollection(){}function IndexedCollection(){}function SetCollection(){}Iterator.prototype.toString=function(){return"[Iterator]"},Iterator.KEYS=0,Iterator.VALUES=1,Iterator.ENTRIES=2,Iterator.prototype.inspect=Iterator.prototype.toSource=function(){return this.toString()},Iterator.prototype[ITERATOR_SYMBOL]=function(){return this},createClass(Seq,Iterable),Seq.of=function(){return Seq(arguments)},Seq.prototype.toSeq=function(){return this},Seq.prototype.toString=function(){return this.__toString("Seq {","}")},Seq.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Seq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,!0)},Seq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,!0)},createClass(KeyedSeq,Seq),KeyedSeq.prototype.toKeyedSeq=function(){return this},createClass(IndexedSeq,Seq),IndexedSeq.of=function(){return IndexedSeq(arguments)},IndexedSeq.prototype.toIndexedSeq=function(){return this},IndexedSeq.prototype.toString=function(){return this.__toString("Seq [","]")},IndexedSeq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,!1)},IndexedSeq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,!1)},createClass(SetSeq,Seq),SetSeq.of=function(){return SetSeq(arguments)},SetSeq.prototype.toSetSeq=function(){return this},Seq.isSeq=isSeq,Seq.Keyed=KeyedSeq,Seq.Set=SetSeq,Seq.Indexed=IndexedSeq,Seq.prototype["@@__IMMUTABLE_SEQ__@@"]=!0,createClass(ArraySeq,IndexedSeq),ArraySeq.prototype.get=function(index,notSetValue){return this.has(index)?this._array[wrapIndex(this,index)]:notSetValue},ArraySeq.prototype.__iterate=function(fn,reverse){for(var array=this._array,maxIndex=array.length-1,ii=0;ii<=maxIndex;ii++)if(!1===fn(array[reverse?maxIndex-ii:ii],ii,this))return ii+1;return ii},ArraySeq.prototype.__iterator=function(type,reverse){var array=this._array,maxIndex=array.length-1,ii=0;return new Iterator((function(){return ii>maxIndex?{value:void 0,done:!0}:iteratorValue(type,ii,array[reverse?maxIndex-ii++:ii++])}))},createClass(ObjectSeq,KeyedSeq),ObjectSeq.prototype.get=function(key,notSetValue){return void 0===notSetValue||this.has(key)?this._object[key]:notSetValue},ObjectSeq.prototype.has=function(key){return this._object.hasOwnProperty(key)},ObjectSeq.prototype.__iterate=function(fn,reverse){for(var object=this._object,keys=this._keys,maxIndex=keys.length-1,ii=0;ii<=maxIndex;ii++){var key=keys[reverse?maxIndex-ii:ii];if(!1===fn(object[key],key,this))return ii+1}return ii},ObjectSeq.prototype.__iterator=function(type,reverse){var object=this._object,keys=this._keys,maxIndex=keys.length-1,ii=0;return new Iterator((function(){var key=keys[reverse?maxIndex-ii:ii];return ii++>maxIndex?{value:void 0,done:!0}:iteratorValue(type,key,object[key])}))},ObjectSeq.prototype[IS_ORDERED_SENTINEL]=!0,createClass(IterableSeq,IndexedSeq),IterableSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse)return this.cacheResult().__iterate(fn,reverse);var iterator=getIterator(this._iterable),iterations=0;if(isIterator(iterator))for(var step;!(step=iterator.next()).done&&!1!==fn(step.value,iterations++,this););return iterations},IterableSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=getIterator(this._iterable);if(!isIterator(iterator))return new Iterator(iteratorDone);var iterations=0;return new Iterator((function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value)}))},createClass(IteratorSeq,IndexedSeq),IteratorSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse)return this.cacheResult().__iterate(fn,reverse);for(var step,iterator=this._iterator,cache=this._iteratorCache,iterations=0;iterations<cache.length;)if(!1===fn(cache[iterations],iterations++,this))return iterations;for(;!(step=iterator.next()).done;){var val=step.value;if(cache[iterations]=val,!1===fn(val,iterations++,this))break}return iterations},IteratorSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=this._iterator,cache=this._iteratorCache,iterations=0;return new Iterator((function(){if(iterations>=cache.length){var step=iterator.next();if(step.done)return step;cache[iterations]=step.value}return iteratorValue(type,iterations,cache[iterations++])}))},createClass(Repeat,IndexedSeq),Repeat.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Repeat.prototype.get=function(index,notSetValue){return this.has(index)?this._value:notSetValue},Repeat.prototype.includes=function(searchValue){return is(this._value,searchValue)},Repeat.prototype.slice=function(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:new Repeat(this._value,resolveEnd(end,size)-resolveBegin(begin,size))},Repeat.prototype.reverse=function(){return this},Repeat.prototype.indexOf=function(searchValue){return is(this._value,searchValue)?0:-1},Repeat.prototype.lastIndexOf=function(searchValue){return is(this._value,searchValue)?this.size:-1},Repeat.prototype.__iterate=function(fn,reverse){for(var ii=0;ii<this.size;ii++)if(!1===fn(this._value,ii,this))return ii+1;return ii},Repeat.prototype.__iterator=function(type,reverse){var this$0=this,ii=0;return new Iterator((function(){return ii<this$0.size?iteratorValue(type,ii++,this$0._value):{value:void 0,done:!0}}))},Repeat.prototype.equals=function(other){return other instanceof Repeat?is(this._value,other._value):deepEqual(other)},createClass(Range,IndexedSeq),Range.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Range.prototype.get=function(index,notSetValue){return this.has(index)?this._start+wrapIndex(this,index)*this._step:notSetValue},Range.prototype.includes=function(searchValue){var possibleIndex=(searchValue-this._start)/this._step;return possibleIndex>=0&&possibleIndex<this.size&&possibleIndex===Math.floor(possibleIndex)},Range.prototype.slice=function(begin,end){return wholeSlice(begin,end,this.size)?this:(begin=resolveBegin(begin,this.size),(end=resolveEnd(end,this.size))<=begin?new Range(0,0):new Range(this.get(begin,this._end),this.get(end,this._end),this._step))},Range.prototype.indexOf=function(searchValue){var offsetValue=searchValue-this._start;if(offsetValue%this._step==0){var index=offsetValue/this._step;if(index>=0&&index<this.size)return index}return-1},Range.prototype.lastIndexOf=function(searchValue){return this.indexOf(searchValue)},Range.prototype.__iterate=function(fn,reverse){for(var maxIndex=this.size-1,step=this._step,value=reverse?this._start+maxIndex*step:this._start,ii=0;ii<=maxIndex;ii++){if(!1===fn(value,ii,this))return ii+1;value+=reverse?-step:step}return ii},Range.prototype.__iterator=function(type,reverse){var maxIndex=this.size-1,step=this._step,value=reverse?this._start+maxIndex*step:this._start,ii=0;return new Iterator((function(){var v=value;return value+=reverse?-step:step,ii>maxIndex?{value:void 0,done:!0}:iteratorValue(type,ii++,v)}))},Range.prototype.equals=function(other){return other instanceof Range?this._start===other._start&&this._end===other._end&&this._step===other._step:deepEqual(this,other)},createClass(Collection,Iterable),createClass(KeyedCollection,Collection),createClass(IndexedCollection,Collection),createClass(SetCollection,Collection),Collection.Keyed=KeyedCollection,Collection.Indexed=IndexedCollection,Collection.Set=SetCollection;var imul="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(a,b){var c=65535&(a|=0),d=65535&(b|=0);return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0};function smi(i32){return i32>>>1&1073741824|3221225471&i32}function hash(o){if(!1===o||null==o)return 0;if("function"==typeof o.valueOf&&(!1===(o=o.valueOf())||null==o))return 0;if(!0===o)return 1;var type=typeof o;if("number"===type){var h=0|o;for(h!==o&&(h^=4294967295*o);o>4294967295;)h^=o/=4294967295;return smi(h)}if("string"===type)return o.length>STRING_HASH_CACHE_MIN_STRLEN?function(string){var hash=stringHashCache[string];return void 0===hash&&(hash=hashString(string),STRING_HASH_CACHE_SIZE===STRING_HASH_CACHE_MAX_SIZE&&(STRING_HASH_CACHE_SIZE=0,stringHashCache={}),STRING_HASH_CACHE_SIZE++,stringHashCache[string]=hash),hash}(o):hashString(o);if("function"==typeof o.hashCode)return o.hashCode();if("object"===type)return function(obj){var hash;if(usingWeakMap&&void 0!==(hash=weakMap.get(obj)))return hash;if(void 0!==(hash=obj[UID_HASH_KEY]))return hash;if(!canDefineProperty){if(void 0!==(hash=obj.propertyIsEnumerable&&obj.propertyIsEnumerable[UID_HASH_KEY]))return hash;if(void 0!==(hash=function(node){if(node&&node.nodeType>0)switch(node.nodeType){case 1:return node.uniqueID;case 9:return node.documentElement&&node.documentElement.uniqueID}}(obj)))return hash}if(hash=++objHashUID,1073741824&objHashUID&&(objHashUID=0),usingWeakMap)weakMap.set(obj,hash);else{if(void 0!==isExtensible&&!1===isExtensible(obj))throw new Error("Non-extensible objects are not allowed as keys.");if(canDefineProperty)Object.defineProperty(obj,UID_HASH_KEY,{enumerable:!1,configurable:!1,writable:!1,value:hash});else if(void 0!==obj.propertyIsEnumerable&&obj.propertyIsEnumerable===obj.constructor.prototype.propertyIsEnumerable)obj.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},obj.propertyIsEnumerable[UID_HASH_KEY]=hash;else{if(void 0===obj.nodeType)throw new Error("Unable to set a non-enumerable property on object.");obj[UID_HASH_KEY]=hash}}return hash}(o);if("function"==typeof o.toString)return hashString(o.toString());throw new Error("Value type "+type+" cannot be hashed.")}function hashString(string){for(var hash=0,ii=0;ii<string.length;ii++)hash=31*hash+string.charCodeAt(ii)|0;return smi(hash)}var weakMap,isExtensible=Object.isExtensible,canDefineProperty=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),usingWeakMap="function"==typeof WeakMap;usingWeakMap&&(weakMap=new WeakMap);var objHashUID=0,UID_HASH_KEY="__immutablehash__";"function"==typeof Symbol&&(UID_HASH_KEY=Symbol(UID_HASH_KEY));var STRING_HASH_CACHE_MIN_STRLEN=16,STRING_HASH_CACHE_MAX_SIZE=255,STRING_HASH_CACHE_SIZE=0,stringHashCache={};function assertNotInfinite(size){invariant(size!==1/0,"Cannot perform this action with an infinite size.")}function Map(value){return null==value?emptyMap():isMap(value)&&!isOrdered(value)?value:emptyMap().withMutations((function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size),iter.forEach((function(v,k){return map.set(k,v)}))}))}function isMap(maybeMap){return!(!maybeMap||!maybeMap[IS_MAP_SENTINEL])}createClass(Map,KeyedCollection),Map.prototype.toString=function(){return this.__toString("Map {","}")},Map.prototype.get=function(k,notSetValue){return this._root?this._root.get(0,void 0,k,notSetValue):notSetValue},Map.prototype.set=function(k,v){return updateMap(this,k,v)},Map.prototype.setIn=function(keyPath,v){return this.updateIn(keyPath,NOT_SET,(function(){return v}))},Map.prototype.remove=function(k){return updateMap(this,k,NOT_SET)},Map.prototype.deleteIn=function(keyPath){return this.updateIn(keyPath,(function(){return NOT_SET}))},Map.prototype.update=function(k,notSetValue,updater){return 1===arguments.length?k(this):this.updateIn([k],notSetValue,updater)},Map.prototype.updateIn=function(keyPath,notSetValue,updater){updater||(updater=notSetValue,notSetValue=void 0);var updatedValue=function updateInDeepMap(existing,keyPathIter,notSetValue,updater){var isNotSet=existing===NOT_SET,step=keyPathIter.next();if(step.done){var existingValue=isNotSet?notSetValue:existing,newValue=updater(existingValue);return newValue===existingValue?existing:newValue}invariant(isNotSet||existing&&existing.set,"invalid keyPath");var key=step.value,nextExisting=isNotSet?NOT_SET:existing.get(key,NOT_SET),nextUpdated=updateInDeepMap(nextExisting,keyPathIter,notSetValue,updater);return nextUpdated===nextExisting?existing:nextUpdated===NOT_SET?existing.remove(key):(isNotSet?emptyMap():existing).set(key,nextUpdated)}(this,forceIterator(keyPath),notSetValue,updater);return updatedValue===NOT_SET?void 0:updatedValue},Map.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):emptyMap()},Map.prototype.merge=function(){return mergeIntoMapWith(this,void 0,arguments)},Map.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,merger,iters)},Map.prototype.mergeIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),(function(m){return"function"==typeof m.merge?m.merge.apply(m,iters):iters[iters.length-1]}))},Map.prototype.mergeDeep=function(){return mergeIntoMapWith(this,deepMerger,arguments)},Map.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,deepMergerWith(merger),iters)},Map.prototype.mergeDeepIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),(function(m){return"function"==typeof m.mergeDeep?m.mergeDeep.apply(m,iters):iters[iters.length-1]}))},Map.prototype.sort=function(comparator){return OrderedMap(sortFactory(this,comparator))},Map.prototype.sortBy=function(mapper,comparator){return OrderedMap(sortFactory(this,comparator,mapper))},Map.prototype.withMutations=function(fn){var mutable=this.asMutable();return fn(mutable),mutable.wasAltered()?mutable.__ensureOwner(this.__ownerID):this},Map.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)},Map.prototype.asImmutable=function(){return this.__ensureOwner()},Map.prototype.wasAltered=function(){return this.__altered},Map.prototype.__iterator=function(type,reverse){return new MapIterator(this,type,reverse)},Map.prototype.__iterate=function(fn,reverse){var this$0=this,iterations=0;return this._root&&this._root.iterate((function(entry){return iterations++,fn(entry[1],entry[0],this$0)}),reverse),iterations},Map.prototype.__ensureOwner=function(ownerID){return ownerID===this.__ownerID?this:ownerID?makeMap(this.size,this._root,ownerID,this.__hash):(this.__ownerID=ownerID,this.__altered=!1,this)},Map.isMap=isMap;var EMPTY_MAP,IS_MAP_SENTINEL="@@__IMMUTABLE_MAP__@@",MapPrototype=Map.prototype;function ArrayMapNode(ownerID,entries){this.ownerID=ownerID,this.entries=entries}function BitmapIndexedNode(ownerID,bitmap,nodes){this.ownerID=ownerID,this.bitmap=bitmap,this.nodes=nodes}function HashArrayMapNode(ownerID,count,nodes){this.ownerID=ownerID,this.count=count,this.nodes=nodes}function HashCollisionNode(ownerID,keyHash,entries){this.ownerID=ownerID,this.keyHash=keyHash,this.entries=entries}function ValueNode(ownerID,keyHash,entry){this.ownerID=ownerID,this.keyHash=keyHash,this.entry=entry}function MapIterator(map,type,reverse){this._type=type,this._reverse=reverse,this._stack=map._root&&mapIteratorFrame(map._root)}function mapIteratorValue(type,entry){return iteratorValue(type,entry[0],entry[1])}function mapIteratorFrame(node,prev){return{node:node,index:0,__prev:prev}}function makeMap(size,root,ownerID,hash){var map=Object.create(MapPrototype);return map.size=size,map._root=root,map.__ownerID=ownerID,map.__hash=hash,map.__altered=!1,map}function emptyMap(){return EMPTY_MAP||(EMPTY_MAP=makeMap(0))}function updateMap(map,k,v){var newRoot,newSize;if(map._root){var didChangeSize=MakeRef(CHANGE_LENGTH),didAlter=MakeRef(DID_ALTER);if(newRoot=updateNode(map._root,map.__ownerID,0,void 0,k,v,didChangeSize,didAlter),!didAlter.value)return map;newSize=map.size+(didChangeSize.value?v===NOT_SET?-1:1:0)}else{if(v===NOT_SET)return map;newSize=1,newRoot=new ArrayMapNode(map.__ownerID,[[k,v]])}return map.__ownerID?(map.size=newSize,map._root=newRoot,map.__hash=void 0,map.__altered=!0,map):newRoot?makeMap(newSize,newRoot):emptyMap()}function updateNode(node,ownerID,shift,keyHash,key,value,didChangeSize,didAlter){return node?node.update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter):value===NOT_SET?node:(SetRef(didAlter),SetRef(didChangeSize),new ValueNode(ownerID,keyHash,[key,value]))}function isLeafNode(node){return node.constructor===ValueNode||node.constructor===HashCollisionNode}function mergeIntoNode(node,ownerID,shift,keyHash,entry){if(node.keyHash===keyHash)return new HashCollisionNode(ownerID,keyHash,[node.entry,entry]);var newNode,idx1=31&(0===shift?node.keyHash:node.keyHash>>>shift),idx2=31&(0===shift?keyHash:keyHash>>>shift);return new BitmapIndexedNode(ownerID,1<<idx1|1<<idx2,idx1===idx2?[mergeIntoNode(node,ownerID,shift+5,keyHash,entry)]:(newNode=new ValueNode(ownerID,keyHash,entry),idx1<idx2?[node,newNode]:[newNode,node]))}function mergeIntoMapWith(map,merger,iterables){for(var iters=[],ii=0;ii<iterables.length;ii++){var value=iterables[ii],iter=KeyedIterable(value);isIterable(value)||(iter=iter.map((function(v){return fromJS(v)}))),iters.push(iter)}return mergeIntoCollectionWith(map,merger,iters)}function deepMerger(existing,value,key){return existing&&existing.mergeDeep&&isIterable(value)?existing.mergeDeep(value):is(existing,value)?existing:value}function deepMergerWith(merger){return function(existing,value,key){if(existing&&existing.mergeDeepWith&&isIterable(value))return existing.mergeDeepWith(merger,value);var nextValue=merger(existing,value,key);return is(existing,nextValue)?existing:nextValue}}function mergeIntoCollectionWith(collection,merger,iters){return 0===(iters=iters.filter((function(x){return 0!==x.size}))).length?collection:0!==collection.size||collection.__ownerID||1!==iters.length?collection.withMutations((function(collection){for(var mergeIntoMap=merger?function(value,key){collection.update(key,NOT_SET,(function(existing){return existing===NOT_SET?value:merger(existing,value,key)}))}:function(value,key){collection.set(key,value)},ii=0;ii<iters.length;ii++)iters[ii].forEach(mergeIntoMap)})):collection.constructor(iters[0])}function popCount(x){return x=(x=(858993459&(x-=x>>1&1431655765))+(x>>2&858993459))+(x>>4)&252645135,127&(x+=x>>8)+(x>>16)}function setIn(array,idx,val,canEdit){var newArray=canEdit?array:arrCopy(array);return newArray[idx]=val,newArray}MapPrototype[IS_MAP_SENTINEL]=!0,MapPrototype.delete=MapPrototype.remove,MapPrototype.removeIn=MapPrototype.deleteIn,ArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){for(var entries=this.entries,ii=0,len=entries.length;ii<len;ii++)if(is(key,entries[ii][0]))return entries[ii][1];return notSetValue},ArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){for(var removed=value===NOT_SET,entries=this.entries,idx=0,len=entries.length;idx<len&&!is(key,entries[idx][0]);idx++);var exists=idx<len;if(exists?entries[idx][1]===value:removed)return this;if(SetRef(didAlter),(removed||!exists)&&SetRef(didChangeSize),!removed||1!==entries.length){if(!exists&&!removed&&entries.length>=MAX_ARRAY_MAP_SIZE)return function(ownerID,entries,key,value){ownerID||(ownerID=new OwnerID);for(var node=new ValueNode(ownerID,hash(key),[key,value]),ii=0;ii<entries.length;ii++){var entry=entries[ii];node=node.update(ownerID,0,void 0,entry[0],entry[1])}return node}(ownerID,entries,key,value);var isEditable=ownerID&&ownerID===this.ownerID,newEntries=isEditable?entries:arrCopy(entries);return exists?removed?idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop():newEntries[idx]=[key,value]:newEntries.push([key,value]),isEditable?(this.entries=newEntries,this):new ArrayMapNode(ownerID,newEntries)}},BitmapIndexedNode.prototype.get=function(shift,keyHash,key,notSetValue){void 0===keyHash&&(keyHash=hash(key));var bit=1<<(31&(0===shift?keyHash:keyHash>>>shift)),bitmap=this.bitmap;return 0==(bitmap&bit)?notSetValue:this.nodes[popCount(bitmap&bit-1)].get(shift+5,keyHash,key,notSetValue)},BitmapIndexedNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){void 0===keyHash&&(keyHash=hash(key));var keyHashFrag=31&(0===shift?keyHash:keyHash>>>shift),bit=1<<keyHashFrag,bitmap=this.bitmap,exists=0!=(bitmap&bit);if(!exists&&value===NOT_SET)return this;var idx=popCount(bitmap&bit-1),nodes=this.nodes,node=exists?nodes[idx]:void 0,newNode=updateNode(node,ownerID,shift+5,keyHash,key,value,didChangeSize,didAlter);if(newNode===node)return this;if(!exists&&newNode&&nodes.length>=MAX_BITMAP_INDEXED_SIZE)return function(ownerID,nodes,bitmap,including,node){for(var count=0,expandedNodes=new Array(32),ii=0;0!==bitmap;ii++,bitmap>>>=1)expandedNodes[ii]=1&bitmap?nodes[count++]:void 0;return expandedNodes[including]=node,new HashArrayMapNode(ownerID,count+1,expandedNodes)}(ownerID,nodes,bitmap,keyHashFrag,newNode);if(exists&&!newNode&&2===nodes.length&&isLeafNode(nodes[1^idx]))return nodes[1^idx];if(exists&&newNode&&1===nodes.length&&isLeafNode(newNode))return newNode;var isEditable=ownerID&&ownerID===this.ownerID,newBitmap=exists?newNode?bitmap:bitmap^bit:bitmap|bit,newNodes=exists?newNode?setIn(nodes,idx,newNode,isEditable):function(array,idx,canEdit){var newLen=array.length-1;if(canEdit&&idx===newLen)return array.pop(),array;for(var newArray=new Array(newLen),after=0,ii=0;ii<newLen;ii++)ii===idx&&(after=1),newArray[ii]=array[ii+after];return newArray}(nodes,idx,isEditable):function(array,idx,val,canEdit){var newLen=array.length+1;if(canEdit&&idx+1===newLen)return array[idx]=val,array;for(var newArray=new Array(newLen),after=0,ii=0;ii<newLen;ii++)ii===idx?(newArray[ii]=val,after=-1):newArray[ii]=array[ii+after];return newArray}(nodes,idx,newNode,isEditable);return isEditable?(this.bitmap=newBitmap,this.nodes=newNodes,this):new BitmapIndexedNode(ownerID,newBitmap,newNodes)},HashArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){void 0===keyHash&&(keyHash=hash(key));var idx=31&(0===shift?keyHash:keyHash>>>shift),node=this.nodes[idx];return node?node.get(shift+5,keyHash,key,notSetValue):notSetValue},HashArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){void 0===keyHash&&(keyHash=hash(key));var idx=31&(0===shift?keyHash:keyHash>>>shift),removed=value===NOT_SET,nodes=this.nodes,node=nodes[idx];if(removed&&!node)return this;var newNode=updateNode(node,ownerID,shift+5,keyHash,key,value,didChangeSize,didAlter);if(newNode===node)return this;var newCount=this.count;if(node){if(!newNode&&--newCount<MIN_HASH_ARRAY_MAP_SIZE)return function(ownerID,nodes,count,excluding){for(var bitmap=0,packedII=0,packedNodes=new Array(count),ii=0,bit=1,len=nodes.length;ii<len;ii++,bit<<=1){var node=nodes[ii];void 0!==node&&ii!==excluding&&(bitmap|=bit,packedNodes[packedII++]=node)}return new BitmapIndexedNode(ownerID,bitmap,packedNodes)}(ownerID,nodes,newCount,idx)}else newCount++;var isEditable=ownerID&&ownerID===this.ownerID,newNodes=setIn(nodes,idx,newNode,isEditable);return isEditable?(this.count=newCount,this.nodes=newNodes,this):new HashArrayMapNode(ownerID,newCount,newNodes)},HashCollisionNode.prototype.get=function(shift,keyHash,key,notSetValue){for(var entries=this.entries,ii=0,len=entries.length;ii<len;ii++)if(is(key,entries[ii][0]))return entries[ii][1];return notSetValue},HashCollisionNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){void 0===keyHash&&(keyHash=hash(key));var removed=value===NOT_SET;if(keyHash!==this.keyHash)return removed?this:(SetRef(didAlter),SetRef(didChangeSize),mergeIntoNode(this,ownerID,shift,keyHash,[key,value]));for(var entries=this.entries,idx=0,len=entries.length;idx<len&&!is(key,entries[idx][0]);idx++);var exists=idx<len;if(exists?entries[idx][1]===value:removed)return this;if(SetRef(didAlter),(removed||!exists)&&SetRef(didChangeSize),removed&&2===len)return new ValueNode(ownerID,this.keyHash,entries[1^idx]);var isEditable=ownerID&&ownerID===this.ownerID,newEntries=isEditable?entries:arrCopy(entries);return exists?removed?idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop():newEntries[idx]=[key,value]:newEntries.push([key,value]),isEditable?(this.entries=newEntries,this):new HashCollisionNode(ownerID,this.keyHash,newEntries)},ValueNode.prototype.get=function(shift,keyHash,key,notSetValue){return is(key,this.entry[0])?this.entry[1]:notSetValue},ValueNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET,keyMatch=is(key,this.entry[0]);return(keyMatch?value===this.entry[1]:removed)?this:(SetRef(didAlter),removed?void SetRef(didChangeSize):keyMatch?ownerID&&ownerID===this.ownerID?(this.entry[1]=value,this):new ValueNode(ownerID,this.keyHash,[key,value]):(SetRef(didChangeSize),mergeIntoNode(this,ownerID,shift,hash(key),[key,value])))},ArrayMapNode.prototype.iterate=HashCollisionNode.prototype.iterate=function(fn,reverse){for(var entries=this.entries,ii=0,maxIndex=entries.length-1;ii<=maxIndex;ii++)if(!1===fn(entries[reverse?maxIndex-ii:ii]))return!1},BitmapIndexedNode.prototype.iterate=HashArrayMapNode.prototype.iterate=function(fn,reverse){for(var nodes=this.nodes,ii=0,maxIndex=nodes.length-1;ii<=maxIndex;ii++){var node=nodes[reverse?maxIndex-ii:ii];if(node&&!1===node.iterate(fn,reverse))return!1}},ValueNode.prototype.iterate=function(fn,reverse){return fn(this.entry)},createClass(MapIterator,Iterator),MapIterator.prototype.next=function(){for(var type=this._type,stack=this._stack;stack;){var maxIndex,node=stack.node,index=stack.index++;if(node.entry){if(0===index)return mapIteratorValue(type,node.entry)}else if(node.entries){if(index<=(maxIndex=node.entries.length-1))return mapIteratorValue(type,node.entries[this._reverse?maxIndex-index:index])}else if(index<=(maxIndex=node.nodes.length-1)){var subNode=node.nodes[this._reverse?maxIndex-index:index];if(subNode){if(subNode.entry)return mapIteratorValue(type,subNode.entry);stack=this._stack=mapIteratorFrame(subNode,stack)}continue}stack=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var MAX_ARRAY_MAP_SIZE=8,MAX_BITMAP_INDEXED_SIZE=16,MIN_HASH_ARRAY_MAP_SIZE=8;function List(value){var empty=emptyList();if(null==value)return empty;if(isList(value))return value;var iter=IndexedIterable(value),size=iter.size;return 0===size?empty:(assertNotInfinite(size),size>0&&size<32?makeList(0,size,5,null,new VNode(iter.toArray())):empty.withMutations((function(list){list.setSize(size),iter.forEach((function(v,i){return list.set(i,v)}))})))}function isList(maybeList){return!(!maybeList||!maybeList[IS_LIST_SENTINEL])}createClass(List,IndexedCollection),List.of=function(){return this(arguments)},List.prototype.toString=function(){return this.__toString("List [","]")},List.prototype.get=function(index,notSetValue){if((index=wrapIndex(this,index))>=0&&index<this.size){var node=listNodeFor(this,index+=this._origin);return node&&node.array[31&index]}return notSetValue},List.prototype.set=function(index,value){return function(list,index,value){if((index=wrapIndex(list,index))!=index)return list;if(index>=list.size||index<0)return list.withMutations((function(list){index<0?setListBounds(list,index).set(0,value):setListBounds(list,0,index+1).set(index,value)}));index+=list._origin;var newTail=list._tail,newRoot=list._root,didAlter=MakeRef(DID_ALTER);return index>=getTailOffset(list._capacity)?newTail=updateVNode(newTail,list.__ownerID,0,index,value,didAlter):newRoot=updateVNode(newRoot,list.__ownerID,list._level,index,value,didAlter),didAlter.value?list.__ownerID?(list._root=newRoot,list._tail=newTail,list.__hash=void 0,list.__altered=!0,list):makeList(list._origin,list._capacity,list._level,newRoot,newTail):list}(this,index,value)},List.prototype.remove=function(index){return this.has(index)?0===index?this.shift():index===this.size-1?this.pop():this.splice(index,1):this},List.prototype.insert=function(index,value){return this.splice(index,0,value)},List.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):emptyList()},List.prototype.push=function(){var values=arguments,oldSize=this.size;return this.withMutations((function(list){setListBounds(list,0,oldSize+values.length);for(var ii=0;ii<values.length;ii++)list.set(oldSize+ii,values[ii])}))},List.prototype.pop=function(){return setListBounds(this,0,-1)},List.prototype.unshift=function(){var values=arguments;return this.withMutations((function(list){setListBounds(list,-values.length);for(var ii=0;ii<values.length;ii++)list.set(ii,values[ii])}))},List.prototype.shift=function(){return setListBounds(this,1)},List.prototype.merge=function(){return mergeIntoListWith(this,void 0,arguments)},List.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,merger,iters)},List.prototype.mergeDeep=function(){return mergeIntoListWith(this,deepMerger,arguments)},List.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,deepMergerWith(merger),iters)},List.prototype.setSize=function(size){return setListBounds(this,0,size)},List.prototype.slice=function(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:setListBounds(this,resolveBegin(begin,size),resolveEnd(end,size))},List.prototype.__iterator=function(type,reverse){var index=0,values=iterateList(this,reverse);return new Iterator((function(){var value=values();return value===DONE?{value:void 0,done:!0}:iteratorValue(type,index++,value)}))},List.prototype.__iterate=function(fn,reverse){for(var value,index=0,values=iterateList(this,reverse);(value=values())!==DONE&&!1!==fn(value,index++,this););return index},List.prototype.__ensureOwner=function(ownerID){return ownerID===this.__ownerID?this:ownerID?makeList(this._origin,this._capacity,this._level,this._root,this._tail,ownerID,this.__hash):(this.__ownerID=ownerID,this)},List.isList=isList;var IS_LIST_SENTINEL="@@__IMMUTABLE_LIST__@@",ListPrototype=List.prototype;function VNode(array,ownerID){this.array=array,this.ownerID=ownerID}ListPrototype[IS_LIST_SENTINEL]=!0,ListPrototype.delete=ListPrototype.remove,ListPrototype.setIn=MapPrototype.setIn,ListPrototype.deleteIn=ListPrototype.removeIn=MapPrototype.removeIn,ListPrototype.update=MapPrototype.update,ListPrototype.updateIn=MapPrototype.updateIn,ListPrototype.mergeIn=MapPrototype.mergeIn,ListPrototype.mergeDeepIn=MapPrototype.mergeDeepIn,ListPrototype.withMutations=MapPrototype.withMutations,ListPrototype.asMutable=MapPrototype.asMutable,ListPrototype.asImmutable=MapPrototype.asImmutable,ListPrototype.wasAltered=MapPrototype.wasAltered,VNode.prototype.removeBefore=function(ownerID,level,index){if(index===level?1<<level:0===this.array.length)return this;var originIndex=index>>>level&31;if(originIndex>=this.array.length)return new VNode([],ownerID);var newChild,removingFirst=0===originIndex;if(level>0){var oldChild=this.array[originIndex];if((newChild=oldChild&&oldChild.removeBefore(ownerID,level-5,index))===oldChild&&removingFirst)return this}if(removingFirst&&!newChild)return this;var editable=editableVNode(this,ownerID);if(!removingFirst)for(var ii=0;ii<originIndex;ii++)editable.array[ii]=void 0;return newChild&&(editable.array[originIndex]=newChild),editable},VNode.prototype.removeAfter=function(ownerID,level,index){if(index===(level?1<<level:0)||0===this.array.length)return this;var newChild,sizeIndex=index-1>>>level&31;if(sizeIndex>=this.array.length)return this;if(level>0){var oldChild=this.array[sizeIndex];if((newChild=oldChild&&oldChild.removeAfter(ownerID,level-5,index))===oldChild&&sizeIndex===this.array.length-1)return this}var editable=editableVNode(this,ownerID);return editable.array.splice(sizeIndex+1),newChild&&(editable.array[sizeIndex]=newChild),editable};var EMPTY_LIST,EMPTY_ORDERED_MAP,DONE={};function iterateList(list,reverse){var left=list._origin,right=list._capacity,tailPos=getTailOffset(right),tail=list._tail;return function iterateNodeOrLeaf(node,level,offset){return 0===level?function(node,offset){var array=offset===tailPos?tail&&tail.array:node&&node.array,from=offset>left?0:left-offset,to=right-offset;return to>32&&(to=32),function(){if(from===to)return DONE;var idx=reverse?--to:from++;return array&&array[idx]}}(node,offset):function(node,level,offset){var values,array=node&&node.array,from=offset>left?0:left-offset>>level,to=1+(right-offset>>level);return to>32&&(to=32),function(){for(;;){if(values){var value=values();if(value!==DONE)return value;values=null}if(from===to)return DONE;var idx=reverse?--to:from++;values=iterateNodeOrLeaf(array&&array[idx],level-5,offset+(idx<<level))}}}(node,level,offset)}(list._root,list._level,0)}function makeList(origin,capacity,level,root,tail,ownerID,hash){var list=Object.create(ListPrototype);return list.size=capacity-origin,list._origin=origin,list._capacity=capacity,list._level=level,list._root=root,list._tail=tail,list.__ownerID=ownerID,list.__hash=hash,list.__altered=!1,list}function emptyList(){return EMPTY_LIST||(EMPTY_LIST=makeList(0,0,5))}function updateVNode(node,ownerID,level,index,value,didAlter){var newNode,idx=index>>>level&31,nodeHas=node&&idx<node.array.length;if(!nodeHas&&void 0===value)return node;if(level>0){var lowerNode=node&&node.array[idx],newLowerNode=updateVNode(lowerNode,ownerID,level-5,index,value,didAlter);return newLowerNode===lowerNode?node:((newNode=editableVNode(node,ownerID)).array[idx]=newLowerNode,newNode)}return nodeHas&&node.array[idx]===value?node:(SetRef(didAlter),newNode=editableVNode(node,ownerID),void 0===value&&idx===newNode.array.length-1?newNode.array.pop():newNode.array[idx]=value,newNode)}function editableVNode(node,ownerID){return ownerID&&node&&ownerID===node.ownerID?node:new VNode(node?node.array.slice():[],ownerID)}function listNodeFor(list,rawIndex){if(rawIndex>=getTailOffset(list._capacity))return list._tail;if(rawIndex<1<<list._level+5){for(var node=list._root,level=list._level;node&&level>0;)node=node.array[rawIndex>>>level&31],level-=5;return node}}function setListBounds(list,begin,end){void 0!==begin&&(begin|=0),void 0!==end&&(end|=0);var owner=list.__ownerID||new OwnerID,oldOrigin=list._origin,oldCapacity=list._capacity,newOrigin=oldOrigin+begin,newCapacity=void 0===end?oldCapacity:end<0?oldCapacity+end:oldOrigin+end;if(newOrigin===oldOrigin&&newCapacity===oldCapacity)return list;if(newOrigin>=newCapacity)return list.clear();for(var newLevel=list._level,newRoot=list._root,offsetShift=0;newOrigin+offsetShift<0;)newRoot=new VNode(newRoot&&newRoot.array.length?[void 0,newRoot]:[],owner),offsetShift+=1<<(newLevel+=5);offsetShift&&(newOrigin+=offsetShift,oldOrigin+=offsetShift,newCapacity+=offsetShift,oldCapacity+=offsetShift);for(var oldTailOffset=getTailOffset(oldCapacity),newTailOffset=getTailOffset(newCapacity);newTailOffset>=1<<newLevel+5;)newRoot=new VNode(newRoot&&newRoot.array.length?[newRoot]:[],owner),newLevel+=5;var oldTail=list._tail,newTail=newTailOffset<oldTailOffset?listNodeFor(list,newCapacity-1):newTailOffset>oldTailOffset?new VNode([],owner):oldTail;if(oldTail&&newTailOffset>oldTailOffset&&newOrigin<oldCapacity&&oldTail.array.length){for(var node=newRoot=editableVNode(newRoot,owner),level=newLevel;level>5;level-=5){var idx=oldTailOffset>>>level&31;node=node.array[idx]=editableVNode(node.array[idx],owner)}node.array[oldTailOffset>>>5&31]=oldTail}if(newCapacity<oldCapacity&&(newTail=newTail&&newTail.removeAfter(owner,0,newCapacity)),newOrigin>=newTailOffset)newOrigin-=newTailOffset,newCapacity-=newTailOffset,newLevel=5,newRoot=null,newTail=newTail&&newTail.removeBefore(owner,0,newOrigin);else if(newOrigin>oldOrigin||newTailOffset<oldTailOffset){for(offsetShift=0;newRoot;){var beginIndex=newOrigin>>>newLevel&31;if(beginIndex!==newTailOffset>>>newLevel&31)break;beginIndex&&(offsetShift+=(1<<newLevel)*beginIndex),newLevel-=5,newRoot=newRoot.array[beginIndex]}newRoot&&newOrigin>oldOrigin&&(newRoot=newRoot.removeBefore(owner,newLevel,newOrigin-offsetShift)),newRoot&&newTailOffset<oldTailOffset&&(newRoot=newRoot.removeAfter(owner,newLevel,newTailOffset-offsetShift)),offsetShift&&(newOrigin-=offsetShift,newCapacity-=offsetShift)}return list.__ownerID?(list.size=newCapacity-newOrigin,list._origin=newOrigin,list._capacity=newCapacity,list._level=newLevel,list._root=newRoot,list._tail=newTail,list.__hash=void 0,list.__altered=!0,list):makeList(newOrigin,newCapacity,newLevel,newRoot,newTail)}function mergeIntoListWith(list,merger,iterables){for(var iters=[],maxSize=0,ii=0;ii<iterables.length;ii++){var value=iterables[ii],iter=IndexedIterable(value);iter.size>maxSize&&(maxSize=iter.size),isIterable(value)||(iter=iter.map((function(v){return fromJS(v)}))),iters.push(iter)}return maxSize>list.size&&(list=list.setSize(maxSize)),mergeIntoCollectionWith(list,merger,iters)}function getTailOffset(size){return size<32?0:size-1>>>5<<5}function OrderedMap(value){return null==value?emptyOrderedMap():isOrderedMap(value)?value:emptyOrderedMap().withMutations((function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size),iter.forEach((function(v,k){return map.set(k,v)}))}))}function isOrderedMap(maybeOrderedMap){return isMap(maybeOrderedMap)&&isOrdered(maybeOrderedMap)}function makeOrderedMap(map,list,ownerID,hash){var omap=Object.create(OrderedMap.prototype);return omap.size=map?map.size:0,omap._map=map,omap._list=list,omap.__ownerID=ownerID,omap.__hash=hash,omap}function emptyOrderedMap(){return EMPTY_ORDERED_MAP||(EMPTY_ORDERED_MAP=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(omap,k,v){var newMap,newList,map=omap._map,list=omap._list,i=map.get(k),has=void 0!==i;if(v===NOT_SET){if(!has)return omap;list.size>=32&&list.size>=2*map.size?(newMap=(newList=list.filter((function(entry,idx){return void 0!==entry&&i!==idx}))).toKeyedSeq().map((function(entry){return entry[0]})).flip().toMap(),omap.__ownerID&&(newMap.__ownerID=newList.__ownerID=omap.__ownerID)):(newMap=map.remove(k),newList=i===list.size-1?list.pop():list.set(i,void 0))}else if(has){if(v===list.get(i)[1])return omap;newMap=map,newList=list.set(i,[k,v])}else newMap=map.set(k,list.size),newList=list.set(list.size,[k,v]);return omap.__ownerID?(omap.size=newMap.size,omap._map=newMap,omap._list=newList,omap.__hash=void 0,omap):makeOrderedMap(newMap,newList)}function ToKeyedSequence(indexed,useKeys){this._iter=indexed,this._useKeys=useKeys,this.size=indexed.size}function ToIndexedSequence(iter){this._iter=iter,this.size=iter.size}function ToSetSequence(iter){this._iter=iter,this.size=iter.size}function FromEntriesSequence(entries){this._iter=entries,this.size=entries.size}function flipFactory(iterable){var flipSequence=makeSequence(iterable);return flipSequence._iter=iterable,flipSequence.size=iterable.size,flipSequence.flip=function(){return iterable},flipSequence.reverse=function(){var reversedSequence=iterable.reverse.apply(this);return reversedSequence.flip=function(){return iterable.reverse()},reversedSequence},flipSequence.has=function(key){return iterable.includes(key)},flipSequence.includes=function(key){return iterable.has(key)},flipSequence.cacheResult=cacheResultThrough,flipSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate((function(v,k){return!1!==fn(k,v,this$0)}),reverse)},flipSequence.__iteratorUncached=function(type,reverse){if(2===type){var iterator=iterable.__iterator(type,reverse);return new Iterator((function(){var step=iterator.next();if(!step.done){var k=step.value[0];step.value[0]=step.value[1],step.value[1]=k}return step}))}return iterable.__iterator(1===type?0:1,reverse)},flipSequence}function mapFactory(iterable,mapper,context){var mappedSequence=makeSequence(iterable);return mappedSequence.size=iterable.size,mappedSequence.has=function(key){return iterable.has(key)},mappedSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v===NOT_SET?notSetValue:mapper.call(context,v,key,iterable)},mappedSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate((function(v,k,c){return!1!==fn(mapper.call(context,v,k,c),k,this$0)}),reverse)},mappedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(2,reverse);return new Iterator((function(){var step=iterator.next();if(step.done)return step;var entry=step.value,key=entry[0];return iteratorValue(type,key,mapper.call(context,entry[1],key,iterable),step)}))},mappedSequence}function reverseFactory(iterable,useKeys){var reversedSequence=makeSequence(iterable);return reversedSequence._iter=iterable,reversedSequence.size=iterable.size,reversedSequence.reverse=function(){return iterable},iterable.flip&&(reversedSequence.flip=function(){var flipSequence=flipFactory(iterable);return flipSequence.reverse=function(){return iterable.flip()},flipSequence}),reversedSequence.get=function(key,notSetValue){return iterable.get(useKeys?key:-1-key,notSetValue)},reversedSequence.has=function(key){return iterable.has(useKeys?key:-1-key)},reversedSequence.includes=function(value){return iterable.includes(value)},reversedSequence.cacheResult=cacheResultThrough,reversedSequence.__iterate=function(fn,reverse){var this$0=this;return iterable.__iterate((function(v,k){return fn(v,k,this$0)}),!reverse)},reversedSequence.__iterator=function(type,reverse){return iterable.__iterator(type,!reverse)},reversedSequence}function filterFactory(iterable,predicate,context,useKeys){var filterSequence=makeSequence(iterable);return useKeys&&(filterSequence.has=function(key){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&!!predicate.call(context,v,key,iterable)},filterSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&predicate.call(context,v,key,iterable)?v:notSetValue}),filterSequence.__iterateUncached=function(fn,reverse){var this$0=this,iterations=0;return iterable.__iterate((function(v,k,c){if(predicate.call(context,v,k,c))return iterations++,fn(v,useKeys?k:iterations-1,this$0)}),reverse),iterations},filterSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(2,reverse),iterations=0;return new Iterator((function(){for(;;){var step=iterator.next();if(step.done)return step;var entry=step.value,key=entry[0],value=entry[1];if(predicate.call(context,value,key,iterable))return iteratorValue(type,useKeys?key:iterations++,value,step)}}))},filterSequence}function sliceFactory(iterable,begin,end,useKeys){var originalSize=iterable.size;if(void 0!==begin&&(begin|=0),void 0!==end&&(end|=0),wholeSlice(begin,end,originalSize))return iterable;var resolvedBegin=resolveBegin(begin,originalSize),resolvedEnd=resolveEnd(end,originalSize);if(resolvedBegin!=resolvedBegin||resolvedEnd!=resolvedEnd)return sliceFactory(iterable.toSeq().cacheResult(),begin,end,useKeys);var sliceSize,resolvedSize=resolvedEnd-resolvedBegin;resolvedSize==resolvedSize&&(sliceSize=resolvedSize<0?0:resolvedSize);var sliceSeq=makeSequence(iterable);return sliceSeq.size=0===sliceSize?sliceSize:iterable.size&&sliceSize||void 0,!useKeys&&isSeq(iterable)&&sliceSize>=0&&(sliceSeq.get=function(index,notSetValue){return(index=wrapIndex(this,index))>=0&&index<sliceSize?iterable.get(index+resolvedBegin,notSetValue):notSetValue}),sliceSeq.__iterateUncached=function(fn,reverse){var this$0=this;if(0===sliceSize)return 0;if(reverse)return this.cacheResult().__iterate(fn,reverse);var skipped=0,isSkipping=!0,iterations=0;return iterable.__iterate((function(v,k){if(!isSkipping||!(isSkipping=skipped++<resolvedBegin))return iterations++,!1!==fn(v,useKeys?k:iterations-1,this$0)&&iterations!==sliceSize})),iterations},sliceSeq.__iteratorUncached=function(type,reverse){if(0!==sliceSize&&reverse)return this.cacheResult().__iterator(type,reverse);var iterator=0!==sliceSize&&iterable.__iterator(type,reverse),skipped=0,iterations=0;return new Iterator((function(){for(;skipped++<resolvedBegin;)iterator.next();if(++iterations>sliceSize)return{value:void 0,done:!0};var step=iterator.next();return useKeys||1===type?step:iteratorValue(type,iterations-1,0===type?void 0:step.value[1],step)}))},sliceSeq}function skipWhileFactory(iterable,predicate,context,useKeys){var skipSequence=makeSequence(iterable);return skipSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse)return this.cacheResult().__iterate(fn,reverse);var isSkipping=!0,iterations=0;return iterable.__iterate((function(v,k,c){if(!isSkipping||!(isSkipping=predicate.call(context,v,k,c)))return iterations++,fn(v,useKeys?k:iterations-1,this$0)})),iterations},skipSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=iterable.__iterator(2,reverse),skipping=!0,iterations=0;return new Iterator((function(){var step,k,v;do{if((step=iterator.next()).done)return useKeys||1===type?step:iteratorValue(type,iterations++,0===type?void 0:step.value[1],step);var entry=step.value;k=entry[0],v=entry[1],skipping&&(skipping=predicate.call(context,v,k,this$0))}while(skipping);return 2===type?step:iteratorValue(type,k,v,step)}))},skipSequence}function concatFactory(iterable,values){var isKeyedIterable=isKeyed(iterable),iters=[iterable].concat(values).map((function(v){return isIterable(v)?isKeyedIterable&&(v=KeyedIterable(v)):v=isKeyedIterable?keyedSeqFromValue(v):indexedSeqFromValue(Array.isArray(v)?v:[v]),v})).filter((function(v){return 0!==v.size}));if(0===iters.length)return iterable;if(1===iters.length){var singleton=iters[0];if(singleton===iterable||isKeyedIterable&&isKeyed(singleton)||isIndexed(iterable)&&isIndexed(singleton))return singleton}var concatSeq=new ArraySeq(iters);return isKeyedIterable?concatSeq=concatSeq.toKeyedSeq():isIndexed(iterable)||(concatSeq=concatSeq.toSetSeq()),(concatSeq=concatSeq.flatten(!0)).size=iters.reduce((function(sum,seq){if(void 0!==sum){var size=seq.size;if(void 0!==size)return sum+size}}),0),concatSeq}function flattenFactory(iterable,depth,useKeys){var flatSequence=makeSequence(iterable);return flatSequence.__iterateUncached=function(fn,reverse){var iterations=0,stopped=!1;return function flatDeep(iter,currentDepth){var this$0=this;iter.__iterate((function(v,k){return(!depth||currentDepth<depth)&&isIterable(v)?flatDeep(v,currentDepth+1):!1===fn(v,useKeys?k:iterations++,this$0)&&(stopped=!0),!stopped}),reverse)}(iterable,0),iterations},flatSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(type,reverse),stack=[],iterations=0;return new Iterator((function(){for(;iterator;){var step=iterator.next();if(!1===step.done){var v=step.value;if(2===type&&(v=v[1]),depth&&!(stack.length<depth)||!isIterable(v))return useKeys?step:iteratorValue(type,iterations++,v,step);stack.push(iterator),iterator=v.__iterator(type,reverse)}else iterator=stack.pop()}return{value:void 0,done:!0}}))},flatSequence}function sortFactory(iterable,comparator,mapper){comparator||(comparator=defaultComparator);var isKeyedIterable=isKeyed(iterable),index=0,entries=iterable.toSeq().map((function(v,k){return[k,v,index++,mapper?mapper(v,k,iterable):v]})).toArray();return entries.sort((function(a,b){return comparator(a[3],b[3])||a[2]-b[2]})).forEach(isKeyedIterable?function(v,i){entries[i].length=2}:function(v,i){entries[i]=v[1]}),isKeyedIterable?KeyedSeq(entries):isIndexed(iterable)?IndexedSeq(entries):SetSeq(entries)}function maxFactory(iterable,comparator,mapper){if(comparator||(comparator=defaultComparator),mapper){var entry=iterable.toSeq().map((function(v,k){return[v,mapper(v,k,iterable)]})).reduce((function(a,b){return maxCompare(comparator,a[1],b[1])?b:a}));return entry&&entry[0]}return iterable.reduce((function(a,b){return maxCompare(comparator,a,b)?b:a}))}function maxCompare(comparator,a,b){var comp=comparator(b,a);return 0===comp&&b!==a&&(null==b||b!=b)||comp>0}function zipWithFactory(keyIter,zipper,iters){var zipSequence=makeSequence(keyIter);return zipSequence.size=new ArraySeq(iters).map((function(i){return i.size})).min(),zipSequence.__iterate=function(fn,reverse){for(var step,iterator=this.__iterator(1,reverse),iterations=0;!(step=iterator.next()).done&&!1!==fn(step.value,iterations++,this););return iterations},zipSequence.__iteratorUncached=function(type,reverse){var iterators=iters.map((function(i){return i=Iterable(i),getIterator(reverse?i.reverse():i)})),iterations=0,isDone=!1;return new Iterator((function(){var steps;return isDone||(steps=iterators.map((function(i){return i.next()})),isDone=steps.some((function(s){return s.done}))),isDone?{value:void 0,done:!0}:iteratorValue(type,iterations++,zipper.apply(null,steps.map((function(s){return s.value}))))}))},zipSequence}function reify(iter,seq){return isSeq(iter)?seq:iter.constructor(seq)}function validateEntry(entry){if(entry!==Object(entry))throw new TypeError("Expected [K, V] tuple: "+entry)}function resolveSize(iter){return assertNotInfinite(iter.size),ensureSize(iter)}function iterableClass(iterable){return isKeyed(iterable)?KeyedIterable:isIndexed(iterable)?IndexedIterable:SetIterable}function makeSequence(iterable){return Object.create((isKeyed(iterable)?KeyedSeq:isIndexed(iterable)?IndexedSeq:SetSeq).prototype)}function cacheResultThrough(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Seq.prototype.cacheResult.call(this)}function defaultComparator(a,b){return a>b?1:a<b?-1:0}function forceIterator(keyPath){var iter=getIterator(keyPath);if(!iter){if(!isArrayLike(keyPath))throw new TypeError("Expected iterable or array-like: "+keyPath);iter=getIterator(Iterable(keyPath))}return iter}function Record(defaultValues,name){var hasInitialized,RecordType=function(values){if(values instanceof RecordType)return values;if(!(this instanceof RecordType))return new RecordType(values);if(!hasInitialized){hasInitialized=!0;var keys=Object.keys(defaultValues);!function(prototype,names){try{names.forEach(setProp.bind(void 0,prototype))}catch(error){}}(RecordTypePrototype,keys),RecordTypePrototype.size=keys.length,RecordTypePrototype._name=name,RecordTypePrototype._keys=keys,RecordTypePrototype._defaultValues=defaultValues}this._map=Map(values)},RecordTypePrototype=RecordType.prototype=Object.create(RecordPrototype);return RecordTypePrototype.constructor=RecordType,RecordType}createClass(OrderedMap,Map),OrderedMap.of=function(){return this(arguments)},OrderedMap.prototype.toString=function(){return this.__toString("OrderedMap {","}")},OrderedMap.prototype.get=function(k,notSetValue){var index=this._map.get(k);return void 0!==index?this._list.get(index)[1]:notSetValue},OrderedMap.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):emptyOrderedMap()},OrderedMap.prototype.set=function(k,v){return updateOrderedMap(this,k,v)},OrderedMap.prototype.remove=function(k){return updateOrderedMap(this,k,NOT_SET)},OrderedMap.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},OrderedMap.prototype.__iterate=function(fn,reverse){var this$0=this;return this._list.__iterate((function(entry){return entry&&fn(entry[1],entry[0],this$0)}),reverse)},OrderedMap.prototype.__iterator=function(type,reverse){return this._list.fromEntrySeq().__iterator(type,reverse)},OrderedMap.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID)return this;var newMap=this._map.__ensureOwner(ownerID),newList=this._list.__ensureOwner(ownerID);return ownerID?makeOrderedMap(newMap,newList,ownerID,this.__hash):(this.__ownerID=ownerID,this._map=newMap,this._list=newList,this)},OrderedMap.isOrderedMap=isOrderedMap,OrderedMap.prototype[IS_ORDERED_SENTINEL]=!0,OrderedMap.prototype.delete=OrderedMap.prototype.remove,createClass(ToKeyedSequence,KeyedSeq),ToKeyedSequence.prototype.get=function(key,notSetValue){return this._iter.get(key,notSetValue)},ToKeyedSequence.prototype.has=function(key){return this._iter.has(key)},ToKeyedSequence.prototype.valueSeq=function(){return this._iter.valueSeq()},ToKeyedSequence.prototype.reverse=function(){var this$0=this,reversedSequence=reverseFactory(this,!0);return this._useKeys||(reversedSequence.valueSeq=function(){return this$0._iter.toSeq().reverse()}),reversedSequence},ToKeyedSequence.prototype.map=function(mapper,context){var this$0=this,mappedSequence=mapFactory(this,mapper,context);return this._useKeys||(mappedSequence.valueSeq=function(){return this$0._iter.toSeq().map(mapper,context)}),mappedSequence},ToKeyedSequence.prototype.__iterate=function(fn,reverse){var ii,this$0=this;return this._iter.__iterate(this._useKeys?function(v,k){return fn(v,k,this$0)}:(ii=reverse?resolveSize(this):0,function(v){return fn(v,reverse?--ii:ii++,this$0)}),reverse)},ToKeyedSequence.prototype.__iterator=function(type,reverse){if(this._useKeys)return this._iter.__iterator(type,reverse);var iterator=this._iter.__iterator(1,reverse),ii=reverse?resolveSize(this):0;return new Iterator((function(){var step=iterator.next();return step.done?step:iteratorValue(type,reverse?--ii:ii++,step.value,step)}))},ToKeyedSequence.prototype[IS_ORDERED_SENTINEL]=!0,createClass(ToIndexedSequence,IndexedSeq),ToIndexedSequence.prototype.includes=function(value){return this._iter.includes(value)},ToIndexedSequence.prototype.__iterate=function(fn,reverse){var this$0=this,iterations=0;return this._iter.__iterate((function(v){return fn(v,iterations++,this$0)}),reverse)},ToIndexedSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(1,reverse),iterations=0;return new Iterator((function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value,step)}))},createClass(ToSetSequence,SetSeq),ToSetSequence.prototype.has=function(key){return this._iter.includes(key)},ToSetSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate((function(v){return fn(v,v,this$0)}),reverse)},ToSetSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(1,reverse);return new Iterator((function(){var step=iterator.next();return step.done?step:iteratorValue(type,step.value,step.value,step)}))},createClass(FromEntriesSequence,KeyedSeq),FromEntriesSequence.prototype.entrySeq=function(){return this._iter.toSeq()},FromEntriesSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate((function(entry){if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return fn(indexedIterable?entry.get(1):entry[1],indexedIterable?entry.get(0):entry[0],this$0)}}),reverse)},FromEntriesSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(1,reverse);return new Iterator((function(){for(;;){var step=iterator.next();if(step.done)return step;var entry=step.value;if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return iteratorValue(type,indexedIterable?entry.get(0):entry[0],indexedIterable?entry.get(1):entry[1],step)}}}))},ToIndexedSequence.prototype.cacheResult=ToKeyedSequence.prototype.cacheResult=ToSetSequence.prototype.cacheResult=FromEntriesSequence.prototype.cacheResult=cacheResultThrough,createClass(Record,KeyedCollection),Record.prototype.toString=function(){return this.__toString(recordName(this)+" {","}")},Record.prototype.has=function(k){return this._defaultValues.hasOwnProperty(k)},Record.prototype.get=function(k,notSetValue){if(!this.has(k))return notSetValue;var defaultVal=this._defaultValues[k];return this._map?this._map.get(k,defaultVal):defaultVal},Record.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var RecordType=this.constructor;return RecordType._empty||(RecordType._empty=makeRecord(this,emptyMap()))},Record.prototype.set=function(k,v){if(!this.has(k))throw new Error('Cannot set unknown key "'+k+'" on '+recordName(this));var newMap=this._map&&this._map.set(k,v);return this.__ownerID||newMap===this._map?this:makeRecord(this,newMap)},Record.prototype.remove=function(k){if(!this.has(k))return this;var newMap=this._map&&this._map.remove(k);return this.__ownerID||newMap===this._map?this:makeRecord(this,newMap)},Record.prototype.wasAltered=function(){return this._map.wasAltered()},Record.prototype.__iterator=function(type,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map((function(_,k){return this$0.get(k)})).__iterator(type,reverse)},Record.prototype.__iterate=function(fn,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map((function(_,k){return this$0.get(k)})).__iterate(fn,reverse)},Record.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID)return this;var newMap=this._map&&this._map.__ensureOwner(ownerID);return ownerID?makeRecord(this,newMap,ownerID):(this.__ownerID=ownerID,this._map=newMap,this)};var RecordPrototype=Record.prototype;function makeRecord(likeRecord,map,ownerID){var record=Object.create(Object.getPrototypeOf(likeRecord));return record._map=map,record.__ownerID=ownerID,record}function recordName(record){return record._name||record.constructor.name||"Record"}function setProp(prototype,name){Object.defineProperty(prototype,name,{get:function(){return this.get(name)},set:function(value){invariant(this.__ownerID,"Cannot set on an immutable record."),this.set(name,value)}})}function Set(value){return null==value?emptySet():isSet(value)&&!isOrdered(value)?value:emptySet().withMutations((function(set){var iter=SetIterable(value);assertNotInfinite(iter.size),iter.forEach((function(v){return set.add(v)}))}))}function isSet(maybeSet){return!(!maybeSet||!maybeSet[IS_SET_SENTINEL])}RecordPrototype.delete=RecordPrototype.remove,RecordPrototype.deleteIn=RecordPrototype.removeIn=MapPrototype.removeIn,RecordPrototype.merge=MapPrototype.merge,RecordPrototype.mergeWith=MapPrototype.mergeWith,RecordPrototype.mergeIn=MapPrototype.mergeIn,RecordPrototype.mergeDeep=MapPrototype.mergeDeep,RecordPrototype.mergeDeepWith=MapPrototype.mergeDeepWith,RecordPrototype.mergeDeepIn=MapPrototype.mergeDeepIn,RecordPrototype.setIn=MapPrototype.setIn,RecordPrototype.update=MapPrototype.update,RecordPrototype.updateIn=MapPrototype.updateIn,RecordPrototype.withMutations=MapPrototype.withMutations,RecordPrototype.asMutable=MapPrototype.asMutable,RecordPrototype.asImmutable=MapPrototype.asImmutable,createClass(Set,SetCollection),Set.of=function(){return this(arguments)},Set.fromKeys=function(value){return this(KeyedIterable(value).keySeq())},Set.prototype.toString=function(){return this.__toString("Set {","}")},Set.prototype.has=function(value){return this._map.has(value)},Set.prototype.add=function(value){return updateSet(this,this._map.set(value,!0))},Set.prototype.remove=function(value){return updateSet(this,this._map.remove(value))},Set.prototype.clear=function(){return updateSet(this,this._map.clear())},Set.prototype.union=function(){var iters=SLICE$0.call(arguments,0);return 0===(iters=iters.filter((function(x){return 0!==x.size}))).length?this:0!==this.size||this.__ownerID||1!==iters.length?this.withMutations((function(set){for(var ii=0;ii<iters.length;ii++)SetIterable(iters[ii]).forEach((function(value){return set.add(value)}))})):this.constructor(iters[0])},Set.prototype.intersect=function(){var iters=SLICE$0.call(arguments,0);if(0===iters.length)return this;iters=iters.map((function(iter){return SetIterable(iter)}));var originalSet=this;return this.withMutations((function(set){originalSet.forEach((function(value){iters.every((function(iter){return iter.includes(value)}))||set.remove(value)}))}))},Set.prototype.subtract=function(){var iters=SLICE$0.call(arguments,0);if(0===iters.length)return this;iters=iters.map((function(iter){return SetIterable(iter)}));var originalSet=this;return this.withMutations((function(set){originalSet.forEach((function(value){iters.some((function(iter){return iter.includes(value)}))&&set.remove(value)}))}))},Set.prototype.merge=function(){return this.union.apply(this,arguments)},Set.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return this.union.apply(this,iters)},Set.prototype.sort=function(comparator){return OrderedSet(sortFactory(this,comparator))},Set.prototype.sortBy=function(mapper,comparator){return OrderedSet(sortFactory(this,comparator,mapper))},Set.prototype.wasAltered=function(){return this._map.wasAltered()},Set.prototype.__iterate=function(fn,reverse){var this$0=this;return this._map.__iterate((function(_,k){return fn(k,k,this$0)}),reverse)},Set.prototype.__iterator=function(type,reverse){return this._map.map((function(_,k){return k})).__iterator(type,reverse)},Set.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID)return this;var newMap=this._map.__ensureOwner(ownerID);return ownerID?this.__make(newMap,ownerID):(this.__ownerID=ownerID,this._map=newMap,this)},Set.isSet=isSet;var EMPTY_SET,IS_SET_SENTINEL="@@__IMMUTABLE_SET__@@",SetPrototype=Set.prototype;function updateSet(set,newMap){return set.__ownerID?(set.size=newMap.size,set._map=newMap,set):newMap===set._map?set:0===newMap.size?set.__empty():set.__make(newMap)}function makeSet(map,ownerID){var set=Object.create(SetPrototype);return set.size=map?map.size:0,set._map=map,set.__ownerID=ownerID,set}function emptySet(){return EMPTY_SET||(EMPTY_SET=makeSet(emptyMap()))}function OrderedSet(value){return null==value?emptyOrderedSet():isOrderedSet(value)?value:emptyOrderedSet().withMutations((function(set){var iter=SetIterable(value);assertNotInfinite(iter.size),iter.forEach((function(v){return set.add(v)}))}))}function isOrderedSet(maybeOrderedSet){return isSet(maybeOrderedSet)&&isOrdered(maybeOrderedSet)}SetPrototype[IS_SET_SENTINEL]=!0,SetPrototype.delete=SetPrototype.remove,SetPrototype.mergeDeep=SetPrototype.merge,SetPrototype.mergeDeepWith=SetPrototype.mergeWith,SetPrototype.withMutations=MapPrototype.withMutations,SetPrototype.asMutable=MapPrototype.asMutable,SetPrototype.asImmutable=MapPrototype.asImmutable,SetPrototype.__empty=emptySet,SetPrototype.__make=makeSet,createClass(OrderedSet,Set),OrderedSet.of=function(){return this(arguments)},OrderedSet.fromKeys=function(value){return this(KeyedIterable(value).keySeq())},OrderedSet.prototype.toString=function(){return this.__toString("OrderedSet {","}")},OrderedSet.isOrderedSet=isOrderedSet;var EMPTY_ORDERED_SET,OrderedSetPrototype=OrderedSet.prototype;function makeOrderedSet(map,ownerID){var set=Object.create(OrderedSetPrototype);return set.size=map?map.size:0,set._map=map,set.__ownerID=ownerID,set}function emptyOrderedSet(){return EMPTY_ORDERED_SET||(EMPTY_ORDERED_SET=makeOrderedSet(emptyOrderedMap()))}function Stack(value){return null==value?emptyStack():isStack(value)?value:emptyStack().unshiftAll(value)}function isStack(maybeStack){return!(!maybeStack||!maybeStack[IS_STACK_SENTINEL])}OrderedSetPrototype[IS_ORDERED_SENTINEL]=!0,OrderedSetPrototype.__empty=emptyOrderedSet,OrderedSetPrototype.__make=makeOrderedSet,createClass(Stack,IndexedCollection),Stack.of=function(){return this(arguments)},Stack.prototype.toString=function(){return this.__toString("Stack [","]")},Stack.prototype.get=function(index,notSetValue){var head=this._head;for(index=wrapIndex(this,index);head&&index--;)head=head.next;return head?head.value:notSetValue},Stack.prototype.peek=function(){return this._head&&this._head.value},Stack.prototype.push=function(){if(0===arguments.length)return this;for(var newSize=this.size+arguments.length,head=this._head,ii=arguments.length-1;ii>=0;ii--)head={value:arguments[ii],next:head};return this.__ownerID?(this.size=newSize,this._head=head,this.__hash=void 0,this.__altered=!0,this):makeStack(newSize,head)},Stack.prototype.pushAll=function(iter){if(0===(iter=IndexedIterable(iter)).size)return this;assertNotInfinite(iter.size);var newSize=this.size,head=this._head;return iter.reverse().forEach((function(value){newSize++,head={value:value,next:head}})),this.__ownerID?(this.size=newSize,this._head=head,this.__hash=void 0,this.__altered=!0,this):makeStack(newSize,head)},Stack.prototype.pop=function(){return this.slice(1)},Stack.prototype.unshift=function(){return this.push.apply(this,arguments)},Stack.prototype.unshiftAll=function(iter){return this.pushAll(iter)},Stack.prototype.shift=function(){return this.pop.apply(this,arguments)},Stack.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):emptyStack()},Stack.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size))return this;var resolvedBegin=resolveBegin(begin,this.size);if(resolveEnd(end,this.size)!==this.size)return IndexedCollection.prototype.slice.call(this,begin,end);for(var newSize=this.size-resolvedBegin,head=this._head;resolvedBegin--;)head=head.next;return this.__ownerID?(this.size=newSize,this._head=head,this.__hash=void 0,this.__altered=!0,this):makeStack(newSize,head)},Stack.prototype.__ensureOwner=function(ownerID){return ownerID===this.__ownerID?this:ownerID?makeStack(this.size,this._head,ownerID,this.__hash):(this.__ownerID=ownerID,this.__altered=!1,this)},Stack.prototype.__iterate=function(fn,reverse){if(reverse)return this.reverse().__iterate(fn);for(var iterations=0,node=this._head;node&&!1!==fn(node.value,iterations++,this);)node=node.next;return iterations},Stack.prototype.__iterator=function(type,reverse){if(reverse)return this.reverse().__iterator(type);var iterations=0,node=this._head;return new Iterator((function(){if(node){var value=node.value;return node=node.next,iteratorValue(type,iterations++,value)}return{value:void 0,done:!0}}))},Stack.isStack=isStack;var EMPTY_STACK,IS_STACK_SENTINEL="@@__IMMUTABLE_STACK__@@",StackPrototype=Stack.prototype;function makeStack(size,head,ownerID,hash){var map=Object.create(StackPrototype);return map.size=size,map._head=head,map.__ownerID=ownerID,map.__hash=hash,map.__altered=!1,map}function emptyStack(){return EMPTY_STACK||(EMPTY_STACK=makeStack(0))}function mixin(ctor,methods){var keyCopier=function(key){ctor.prototype[key]=methods[key]};return Object.keys(methods).forEach(keyCopier),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(methods).forEach(keyCopier),ctor}StackPrototype[IS_STACK_SENTINEL]=!0,StackPrototype.withMutations=MapPrototype.withMutations,StackPrototype.asMutable=MapPrototype.asMutable,StackPrototype.asImmutable=MapPrototype.asImmutable,StackPrototype.wasAltered=MapPrototype.wasAltered,Iterable.Iterator=Iterator,mixin(Iterable,{toArray:function(){assertNotInfinite(this.size);var array=new Array(this.size||0);return this.valueSeq().__iterate((function(v,i){array[i]=v})),array},toIndexedSeq:function(){return new ToIndexedSequence(this)},toJS:function(){return this.toSeq().map((function(value){return value&&"function"==typeof value.toJS?value.toJS():value})).__toJS()},toJSON:function(){return this.toSeq().map((function(value){return value&&"function"==typeof value.toJSON?value.toJSON():value})).__toJS()},toKeyedSeq:function(){return new ToKeyedSequence(this,!0)},toMap:function(){return Map(this.toKeyedSeq())},toObject:function(){assertNotInfinite(this.size);var object={};return this.__iterate((function(v,k){object[k]=v})),object},toOrderedMap:function(){return OrderedMap(this.toKeyedSeq())},toOrderedSet:function(){return OrderedSet(isKeyed(this)?this.valueSeq():this)},toSet:function(){return Set(isKeyed(this)?this.valueSeq():this)},toSetSeq:function(){return new ToSetSequence(this)},toSeq:function(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Stack(isKeyed(this)?this.valueSeq():this)},toList:function(){return List(isKeyed(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(head,tail){return 0===this.size?head+tail:head+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+tail},concat:function(){var values=SLICE$0.call(arguments,0);return reify(this,concatFactory(this,values))},includes:function(searchValue){return this.some((function(value){return is(value,searchValue)}))},entries:function(){return this.__iterator(2)},every:function(predicate,context){assertNotInfinite(this.size);var returnValue=!0;return this.__iterate((function(v,k,c){if(!predicate.call(context,v,k,c))return returnValue=!1,!1})),returnValue},filter:function(predicate,context){return reify(this,filterFactory(this,predicate,context,!0))},find:function(predicate,context,notSetValue){var entry=this.findEntry(predicate,context);return entry?entry[1]:notSetValue},findEntry:function(predicate,context){var found;return this.__iterate((function(v,k,c){if(predicate.call(context,v,k,c))return found=[k,v],!1})),found},findLastEntry:function(predicate,context){return this.toSeq().reverse().findEntry(predicate,context)},forEach:function(sideEffect,context){return assertNotInfinite(this.size),this.__iterate(context?sideEffect.bind(context):sideEffect)},join:function(separator){assertNotInfinite(this.size),separator=void 0!==separator?""+separator:",";var joined="",isFirst=!0;return this.__iterate((function(v){isFirst?isFirst=!1:joined+=separator,joined+=null!=v?v.toString():""})),joined},keys:function(){return this.__iterator(0)},map:function(mapper,context){return reify(this,mapFactory(this,mapper,context))},reduce:function(reducer,initialReduction,context){var reduction,useFirst;return assertNotInfinite(this.size),arguments.length<2?useFirst=!0:reduction=initialReduction,this.__iterate((function(v,k,c){useFirst?(useFirst=!1,reduction=v):reduction=reducer.call(context,reduction,v,k,c)})),reduction},reduceRight:function(reducer,initialReduction,context){var reversed=this.toKeyedSeq().reverse();return reversed.reduce.apply(reversed,arguments)},reverse:function(){return reify(this,reverseFactory(this,!0))},slice:function(begin,end){return reify(this,sliceFactory(this,begin,end,!0))},some:function(predicate,context){return!this.every(not(predicate),context)},sort:function(comparator){return reify(this,sortFactory(this,comparator))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(predicate,context){return ensureSize(predicate?this.toSeq().filter(predicate,context):this)},countBy:function(grouper,context){return function(iterable,grouper,context){var groups=Map().asMutable();return iterable.__iterate((function(v,k){groups.update(grouper.call(context,v,k,iterable),0,(function(a){return a+1}))})),groups.asImmutable()}(this,grouper,context)},equals:function(other){return deepEqual(this,other)},entrySeq:function(){var iterable=this;if(iterable._cache)return new ArraySeq(iterable._cache);var entriesSequence=iterable.toSeq().map(entryMapper).toIndexedSeq();return entriesSequence.fromEntrySeq=function(){return iterable.toSeq()},entriesSequence},filterNot:function(predicate,context){return this.filter(not(predicate),context)},findLast:function(predicate,context,notSetValue){return this.toKeyedSeq().reverse().find(predicate,context,notSetValue)},first:function(){return this.find(returnTrue)},flatMap:function(mapper,context){return reify(this,function(iterable,mapper,context){var coerce=iterableClass(iterable);return iterable.toSeq().map((function(v,k){return coerce(mapper.call(context,v,k,iterable))})).flatten(!0)}(this,mapper,context))},flatten:function(depth){return reify(this,flattenFactory(this,depth,!0))},fromEntrySeq:function(){return new FromEntriesSequence(this)},get:function(searchKey,notSetValue){return this.find((function(_,key){return is(key,searchKey)}),void 0,notSetValue)},getIn:function(searchKeyPath,notSetValue){for(var step,nested=this,iter=forceIterator(searchKeyPath);!(step=iter.next()).done;){var key=step.value;if((nested=nested&&nested.get?nested.get(key,NOT_SET):NOT_SET)===NOT_SET)return notSetValue}return nested},groupBy:function(grouper,context){return function(iterable,grouper,context){var isKeyedIter=isKeyed(iterable),groups=(isOrdered(iterable)?OrderedMap():Map()).asMutable();iterable.__iterate((function(v,k){groups.update(grouper.call(context,v,k,iterable),(function(a){return(a=a||[]).push(isKeyedIter?[k,v]:v),a}))}));var coerce=iterableClass(iterable);return groups.map((function(arr){return reify(iterable,coerce(arr))}))}(this,grouper,context)},has:function(searchKey){return this.get(searchKey,NOT_SET)!==NOT_SET},hasIn:function(searchKeyPath){return this.getIn(searchKeyPath,NOT_SET)!==NOT_SET},isSubset:function(iter){return iter="function"==typeof iter.includes?iter:Iterable(iter),this.every((function(value){return iter.includes(value)}))},isSuperset:function(iter){return(iter="function"==typeof iter.isSubset?iter:Iterable(iter)).isSubset(this)},keySeq:function(){return this.toSeq().map(keyMapper).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(comparator){return maxFactory(this,comparator)},maxBy:function(mapper,comparator){return maxFactory(this,comparator,mapper)},min:function(comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator)},minBy:function(mapper,comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator,mapper)},rest:function(){return this.slice(1)},skip:function(amount){return this.slice(Math.max(0,amount))},skipLast:function(amount){return reify(this,this.toSeq().reverse().skip(amount).reverse())},skipWhile:function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,!0))},skipUntil:function(predicate,context){return this.skipWhile(not(predicate),context)},sortBy:function(mapper,comparator){return reify(this,sortFactory(this,comparator,mapper))},take:function(amount){return this.slice(0,Math.max(0,amount))},takeLast:function(amount){return reify(this,this.toSeq().reverse().take(amount).reverse())},takeWhile:function(predicate,context){return reify(this,function(iterable,predicate,context){var takeSequence=makeSequence(iterable);return takeSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse)return this.cacheResult().__iterate(fn,reverse);var iterations=0;return iterable.__iterate((function(v,k,c){return predicate.call(context,v,k,c)&&++iterations&&fn(v,k,this$0)})),iterations},takeSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=iterable.__iterator(2,reverse),iterating=!0;return new Iterator((function(){if(!iterating)return{value:void 0,done:!0};var step=iterator.next();if(step.done)return step;var entry=step.value,k=entry[0],v=entry[1];return predicate.call(context,v,k,this$0)?2===type?step:iteratorValue(type,k,v,step):(iterating=!1,{value:void 0,done:!0})}))},takeSequence}(this,predicate,context))},takeUntil:function(predicate,context){return this.takeWhile(not(predicate),context)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(iterable){if(iterable.size===1/0)return 0;var ordered=isOrdered(iterable),keyed=isKeyed(iterable),h=ordered?1:0;return function(size,h){return h=imul(h,3432918353),h=imul(h<<15|h>>>-15,461845907),h=imul(h<<13|h>>>-13,5),h=imul((h=(h+3864292196|0)^size)^h>>>16,2246822507),smi((h=imul(h^h>>>13,3266489909))^h>>>16)}(iterable.__iterate(keyed?ordered?function(v,k){h=31*h+hashMerge(hash(v),hash(k))|0}:function(v,k){h=h+hashMerge(hash(v),hash(k))|0}:ordered?function(v){h=31*h+hash(v)|0}:function(v){h=h+hash(v)|0}),h)}(this))}});var IterablePrototype=Iterable.prototype;IterablePrototype[IS_ITERABLE_SENTINEL]=!0,IterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.values,IterablePrototype.__toJS=IterablePrototype.toArray,IterablePrototype.__toStringMapper=quoteString,IterablePrototype.inspect=IterablePrototype.toSource=function(){return this.toString()},IterablePrototype.chain=IterablePrototype.flatMap,IterablePrototype.contains=IterablePrototype.includes,function(){try{Object.defineProperty(IterablePrototype,"length",{get:function(){if(!Iterable.noLengthWarning){var stack;try{throw new Error}catch(error){stack=error.stack}if(-1===stack.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+stack),this.size}}})}catch(e){}}(),mixin(KeyedIterable,{flip:function(){return reify(this,flipFactory(this))},findKey:function(predicate,context){var entry=this.findEntry(predicate,context);return entry&&entry[0]},findLastKey:function(predicate,context){return this.toSeq().reverse().findKey(predicate,context)},keyOf:function(searchValue){return this.findKey((function(value){return is(value,searchValue)}))},lastKeyOf:function(searchValue){return this.findLastKey((function(value){return is(value,searchValue)}))},mapEntries:function(mapper,context){var this$0=this,iterations=0;return reify(this,this.toSeq().map((function(v,k){return mapper.call(context,[k,v],iterations++,this$0)})).fromEntrySeq())},mapKeys:function(mapper,context){var this$0=this;return reify(this,this.toSeq().flip().map((function(k,v){return mapper.call(context,k,v,this$0)})).flip())}});var KeyedIterablePrototype=KeyedIterable.prototype;function keyMapper(v,k){return k}function entryMapper(v,k){return[k,v]}function not(predicate){return function(){return!predicate.apply(this,arguments)}}function neg(predicate){return function(){return-predicate.apply(this,arguments)}}function quoteString(value){return"string"==typeof value?JSON.stringify(value):value}function defaultZipper(){return arrCopy(arguments)}function defaultNegComparator(a,b){return a<b?1:a>b?-1:0}function hashMerge(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}return KeyedIterablePrototype[IS_KEYED_SENTINEL]=!0,KeyedIterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.entries,KeyedIterablePrototype.__toJS=IterablePrototype.toObject,KeyedIterablePrototype.__toStringMapper=function(v,k){return JSON.stringify(k)+": "+quoteString(v)},mixin(IndexedIterable,{toKeyedSeq:function(){return new ToKeyedSequence(this,!1)},filter:function(predicate,context){return reify(this,filterFactory(this,predicate,context,!1))},findIndex:function(predicate,context){var entry=this.findEntry(predicate,context);return entry?entry[0]:-1},indexOf:function(searchValue){var key=this.toKeyedSeq().keyOf(searchValue);return void 0===key?-1:key},lastIndexOf:function(searchValue){var key=this.toKeyedSeq().reverse().keyOf(searchValue);return void 0===key?-1:key},reverse:function(){return reify(this,reverseFactory(this,!1))},slice:function(begin,end){return reify(this,sliceFactory(this,begin,end,!1))},splice:function(index,removeNum){var numArgs=arguments.length;if(removeNum=Math.max(0|removeNum,0),0===numArgs||2===numArgs&&!removeNum)return this;index=resolveBegin(index,index<0?this.count():this.size);var spliced=this.slice(0,index);return reify(this,1===numArgs?spliced:spliced.concat(arrCopy(arguments,2),this.slice(index+removeNum)))},findLastIndex:function(predicate,context){var key=this.toKeyedSeq().findLastKey(predicate,context);return void 0===key?-1:key},first:function(){return this.get(0)},flatten:function(depth){return reify(this,flattenFactory(this,depth,!1))},get:function(index,notSetValue){return(index=wrapIndex(this,index))<0||this.size===1/0||void 0!==this.size&&index>this.size?notSetValue:this.find((function(_,key){return key===index}),void 0,notSetValue)},has:function(index){return(index=wrapIndex(this,index))>=0&&(void 0!==this.size?this.size===1/0||index<this.size:-1!==this.indexOf(index))},interpose:function(separator){return reify(this,function(iterable,separator){var interposedSequence=makeSequence(iterable);return interposedSequence.size=iterable.size&&2*iterable.size-1,interposedSequence.__iterateUncached=function(fn,reverse){var this$0=this,iterations=0;return iterable.__iterate((function(v,k){return(!iterations||!1!==fn(separator,iterations++,this$0))&&!1!==fn(v,iterations++,this$0)}),reverse),iterations},interposedSequence.__iteratorUncached=function(type,reverse){var step,iterator=iterable.__iterator(1,reverse),iterations=0;return new Iterator((function(){return(!step||iterations%2)&&(step=iterator.next()).done?step:iterations%2?iteratorValue(type,iterations++,separator):iteratorValue(type,iterations++,step.value,step)}))},interposedSequence}(this,separator))},interleave:function(){var iterables=[this].concat(arrCopy(arguments)),zipped=zipWithFactory(this.toSeq(),IndexedSeq.of,iterables),interleaved=zipped.flatten(!0);return zipped.size&&(interleaved.size=zipped.size*iterables.length),reify(this,interleaved)},last:function(){return this.get(-1)},skipWhile:function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,!1))},zip:function(){var iterables=[this].concat(arrCopy(arguments));return reify(this,zipWithFactory(this,defaultZipper,iterables))},zipWith:function(zipper){var iterables=arrCopy(arguments);return iterables[0]=this,reify(this,zipWithFactory(this,zipper,iterables))}}),IndexedIterable.prototype[IS_INDEXED_SENTINEL]=!0,IndexedIterable.prototype[IS_ORDERED_SENTINEL]=!0,mixin(SetIterable,{get:function(value,notSetValue){return this.has(value)?value:notSetValue},includes:function(value){return this.has(value)},keySeq:function(){return this.valueSeq()}}),SetIterable.prototype.has=IterablePrototype.includes,mixin(KeyedSeq,KeyedIterable.prototype),mixin(IndexedSeq,IndexedIterable.prototype),mixin(SetSeq,SetIterable.prototype),mixin(KeyedCollection,KeyedIterable.prototype),mixin(IndexedCollection,IndexedIterable.prototype),mixin(SetCollection,SetIterable.prototype),{Iterable:Iterable,Seq:Seq,Collection:Collection,Map:Map,OrderedMap:OrderedMap,List:List,Stack:Stack,Set:Set,OrderedSet:OrderedSet,Record:Record,Range:Range,Repeat:Repeat,is:is,fromJS:fromJS}}()})),immutable_1=immutable.List,immutable_2=immutable.OrderedSet,immutable_3=immutable.Map,proxies_1=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=["focus","blur","setMode","exitCurrentMode","restoreEditorDOM","setRenderGuard","removeRenderGuard","setClipboard","getClipboard","getEditorKey","update","onDragEnter","onDragLeave"]}));unwrapExports(proxies_1);var moveSelectionToEnd_1=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(editorState){var blockMap=editorState.getCurrentContent().getBlockMap(),key=blockMap.last().getKey(),length=blockMap.last().getLength(),selection=new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.SelectionState({anchorKey:key,anchorOffset:length,focusKey:key,focusOffset:length});return _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.EditorState.acceptSelection(editorState,selection)}}));unwrapExports(moveSelectionToEnd_1);var createCompositeDecorator=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var obj,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react2=(obj=react__WEBPACK_IMPORTED_MODULE_1___default.a)&&obj.__esModule?obj:{default:obj};exports.default=function(decorators,getEditorState,setEditorState){var convertedDecorators=(0,immutable.List)(decorators).map((function(decorator){var Component=decorator.component;return _extends({},decorator,{component:function(props){return _react2.default.createElement(Component,_extends({},props,{getEditorState:getEditorState,setEditorState:setEditorState}))}})})).toJS();return new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.CompositeDecorator(convertedDecorators)}}));unwrapExports(createCompositeDecorator);var MultiDecorator_1=createCommonjsModule((function(module){var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_immutable2=(obj=immutable)&&obj.__esModule?obj:{default:obj},MultiDecorator=function(){function MultiDecorator(decorators){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MultiDecorator),this.decorators=_immutable2.default.List(decorators)}return _createClass(MultiDecorator,[{key:"getDecorations",value:function(block,contentState){var decorations=new Array(block.getText().length).fill(null);return this.decorators.forEach((function(decorator,i){decorator.getDecorations(block,contentState).forEach((function(key,offset){key&&(decorations[offset]=i+"-"+key)}))})),_immutable2.default.List(decorations)}},{key:"getComponentForKey",value:function(key){return this.getDecoratorForKey(key).getComponentForKey(MultiDecorator.getInnerKey(key))}},{key:"getPropsForKey",value:function(key){return this.getDecoratorForKey(key).getPropsForKey(MultiDecorator.getInnerKey(key))}},{key:"getDecoratorForKey",value:function(key){var parts=key.split("-"),index=Number(parts[0]);return this.decorators.get(index)}}],[{key:"getInnerKey",value:function(key){return key.split("-").slice(1).join("-")}}]),MultiDecorator}();module.exports=MultiDecorator}));unwrapExports(MultiDecorator_1);var resolveDecorators_1=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _createCompositeDecorator2=_interopRequireDefault(createCompositeDecorator),_MultiDecorator2=_interopRequireDefault(MultiDecorator_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var decoratorIsCustom=function(decorator){return"function"==typeof decorator.getDecorations&&"function"==typeof decorator.getComponentForKey&&"function"==typeof decorator.getPropsForKey};exports.default=function(props,getEditorState,onChange){var decorators=function(_ref){var decorators=_ref.decorators,plugins=_ref.plugins;return(0,immutable.List)([{decorators:decorators}].concat(function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(plugins))).filter((function(plugin){return void 0!==plugin.decorators})).flatMap((function(plugin){return plugin.decorators}))}(props),compositeDecorator=(0,_createCompositeDecorator2.default)(decorators.filter((function(decorator){return!decoratorIsCustom(decorator)})),getEditorState,onChange),customDecorators=decorators.filter((function(decorator){return decoratorIsCustom(decorator)}));return new _MultiDecorator2.default(customDecorators.push(compositeDecorator))}}));unwrapExports(resolveDecorators_1);var defaultKeyBindings=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={keyBindingFn:function(event){return(0,_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.getDefaultKeyBinding)(event)}}}));unwrapExports(defaultKeyBindings);var defaultKeyCommands=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={handleKeyCommand:function(command,editorState,eventTimeStamp,_ref){var setEditorState=_ref.setEditorState,newState=void 0;switch(command){case"backspace":case"backspace-word":case"backspace-to-start-of-line":newState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.RichUtils.onBackspace(editorState);break;case"delete":case"delete-word":case"delete-to-end-of-block":newState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.RichUtils.onDelete(editorState);break;default:return"not-handled"}return null!=newState?(setEditorState(newState),"handled"):"not-handled"}}}));unwrapExports(defaultKeyCommands);var Editor=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=_interopRequireDefault(react__WEBPACK_IMPORTED_MODULE_1___default.a),_propTypes2=_interopRequireDefault(prop_types__WEBPACK_IMPORTED_MODULE_7___default.a),_proxies2=_interopRequireDefault(proxies_1),_moveSelectionToEnd2=_interopRequireDefault(moveSelectionToEnd_1),_resolveDecorators2=_interopRequireDefault(resolveDecorators_1),_defaultKeyBindings2=_interopRequireDefault(defaultKeyBindings),_defaultKeyCommands2=_interopRequireDefault(defaultKeyCommands);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var getDecoratorLength=function(obj){var decorators=void 0;return null!=obj.decorators?decorators=obj.decorators:null!=obj._decorators&&(decorators=obj._decorators),null!=decorators.size?decorators.size:decorators.length},PluginEditor=function(_Component){function PluginEditor(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PluginEditor);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PluginEditor.__proto__||Object.getPrototypeOf(PluginEditor)).call(this,props));return _initialiseProps.call(_this),[_this.props].concat(_toConsumableArray(_this.resolvePlugins())).forEach((function(plugin){"function"==typeof plugin.initialize&&plugin.initialize(_this.getPluginMethods())})),_proxies2.default.forEach((function(method){_this[method]=function(){var _this$editor;return(_this$editor=_this.editor)[method].apply(_this$editor,arguments)}})),_this.state={},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PluginEditor,react__WEBPACK_IMPORTED_MODULE_1___default.a.Component),_createClass(PluginEditor,[{key:"componentWillMount",value:function(){var decorator=(0,_resolveDecorators2.default)(this.props,this.getEditorState,this.onChange),editorState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.EditorState.set(this.props.editorState,{decorator:decorator});this.onChange((0,_moveSelectionToEnd2.default)(editorState))}},{key:"componentWillReceiveProps",value:function(next){var currDec=this.props.editorState.getDecorator(),nextDec=next.editorState.getDecorator();if(currDec&&!(currDec===nextDec||currDec&&nextDec&&getDecoratorLength(currDec)===getDecoratorLength(nextDec))){var editorState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.EditorState.set(next.editorState,{decorator:currDec});this.onChange((0,_moveSelectionToEnd2.default)(editorState))}}},{key:"componentWillUnmount",value:function(){var _this2=this;this.resolvePlugins().forEach((function(plugin){plugin.willUnmount&&plugin.willUnmount({getEditorState:_this2.getEditorState,setEditorState:_this2.onChange})}))}},{key:"render",value:function(){var _this3=this,pluginHooks=this.createPluginHooks(),customStyleMap=this.resolveCustomStyleMap(),accessibilityProps=this.resolveAccessibilityProps(),blockRenderMap=this.resolveblockRenderMap();return _react2.default.createElement(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.Editor,_extends({},this.props,accessibilityProps,pluginHooks,{readOnly:this.props.readOnly||this.state.readOnly,customStyleMap:customStyleMap,blockRenderMap:blockRenderMap,onChange:this.onChange,editorState:this.props.editorState,ref:function(element){_this3.editor=element}}))}}]),PluginEditor}();PluginEditor.propTypes={editorState:_propTypes2.default.object.isRequired,onChange:_propTypes2.default.func.isRequired,plugins:_propTypes2.default.array,defaultKeyBindings:_propTypes2.default.bool,defaultKeyCommands:_propTypes2.default.bool,defaultBlockRenderMap:_propTypes2.default.bool,customStyleMap:_propTypes2.default.object,decorators:_propTypes2.default.array},PluginEditor.defaultProps={defaultBlockRenderMap:!0,defaultKeyBindings:!0,defaultKeyCommands:!0,customStyleMap:{},plugins:[],decorators:[]};var _initialiseProps=function(){var _this4=this;this.onChange=function(editorState){var newEditorState=editorState;_this4.resolvePlugins().forEach((function(plugin){plugin.onChange&&(newEditorState=plugin.onChange(newEditorState,_this4.getPluginMethods()))})),_this4.props.onChange&&_this4.props.onChange(newEditorState,_this4.getPluginMethods())},this.getPlugins=function(){return _this4.props.plugins.slice(0)},this.getProps=function(){return _extends({},_this4.props)},this.getReadOnly=function(){return _this4.props.readOnly},this.setReadOnly=function(readOnly){readOnly!==_this4.state.readOnly&&_this4.setState({readOnly:readOnly})},this.getEditorRef=function(){return _this4.editor},this.getEditorState=function(){return _this4.props.editorState},this.getPluginMethods=function(){return{getPlugins:_this4.getPlugins,getProps:_this4.getProps,setEditorState:_this4.onChange,getEditorState:_this4.getEditorState,getReadOnly:_this4.getReadOnly,setReadOnly:_this4.setReadOnly,getEditorRef:_this4.getEditorRef}},this.createEventHooks=function(methodName,plugins){return function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var newArgs=[].slice.apply(args);return newArgs.push(_this4.getPluginMethods()),plugins.some((function(plugin){return"function"==typeof plugin[methodName]&&!0===plugin[methodName].apply(plugin,_toConsumableArray(newArgs))}))}},this.createHandleHooks=function(methodName,plugins){return function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];var newArgs=[].slice.apply(args);return newArgs.push(_this4.getPluginMethods()),plugins.some((function(plugin){return"function"==typeof plugin[methodName]&&"handled"===plugin[methodName].apply(plugin,_toConsumableArray(newArgs))}))?"handled":"not-handled"}},this.createFnHooks=function(methodName,plugins){return function(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];var newArgs=[].slice.apply(args);if(newArgs.push(_this4.getPluginMethods()),"blockRendererFn"===methodName){var block={props:{}};return plugins.forEach((function(plugin){if("function"==typeof plugin[methodName]){var result=plugin[methodName].apply(plugin,_toConsumableArray(newArgs));if(null!=result){var pluginProps=result.props,pluginRest=_objectWithoutProperties(result,["props"]),_block=block,props=_block.props,rest=_objectWithoutProperties(_block,["props"]);block=_extends({},rest,pluginRest,{props:_extends({},props,pluginProps)})}}})),!!block.component&&block}if("blockStyleFn"===methodName){var styles=void 0;return plugins.forEach((function(plugin){if("function"==typeof plugin[methodName]){var result=plugin[methodName].apply(plugin,_toConsumableArray(newArgs));null!=result&&(styles=(styles?styles+" ":"")+result)}})),styles||""}var result=void 0,wasHandled=plugins.some((function(plugin){return"function"==typeof plugin[methodName]&&void 0!==(result=plugin[methodName].apply(plugin,_toConsumableArray(newArgs)))}));return!!wasHandled&&result}},this.createPluginHooks=function(){var pluginHooks={},eventHookKeys=[],handleHookKeys=[],fnHookKeys=[],plugins=[_this4.props].concat(_toConsumableArray(_this4.resolvePlugins()));return plugins.forEach((function(plugin){Object.keys(plugin).forEach((function(attrName){"onChange"!==attrName&&-1===eventHookKeys.indexOf(attrName)&&-1===fnHookKeys.indexOf(attrName)&&(0===attrName.indexOf("on")?eventHookKeys.push(attrName):0===attrName.indexOf("handle")?handleHookKeys.push(attrName):attrName.length-2===attrName.indexOf("Fn")&&fnHookKeys.push(attrName))}))})),eventHookKeys.forEach((function(attrName){pluginHooks[attrName]=_this4.createEventHooks(attrName,plugins)})),handleHookKeys.forEach((function(attrName){pluginHooks[attrName]=_this4.createHandleHooks(attrName,plugins)})),fnHookKeys.forEach((function(attrName){pluginHooks[attrName]=_this4.createFnHooks(attrName,plugins)})),pluginHooks},this.resolvePlugins=function(){var plugins=_this4.props.plugins.slice(0);return!0===_this4.props.defaultKeyBindings&&plugins.push(_defaultKeyBindings2.default),!0===_this4.props.defaultKeyCommands&&plugins.push(_defaultKeyCommands2.default),plugins},this.resolveCustomStyleMap=function(){return _this4.props.plugins.filter((function(plug){return void 0!==plug.customStyleMap})).map((function(plug){return plug.customStyleMap})).concat([_this4.props.customStyleMap]).reduce((function(styles,style){return _extends({},styles,style)}),{})},this.resolveblockRenderMap=function(){var blockRenderMap=_this4.props.plugins.filter((function(plug){return void 0!==plug.blockRenderMap})).reduce((function(maps,plug){return maps.merge(plug.blockRenderMap)}),(0,immutable.Map)({}));return _this4.props.defaultBlockRenderMap&&(blockRenderMap=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.DefaultDraftBlockRenderMap.merge(blockRenderMap)),_this4.props.blockRenderMap&&(blockRenderMap=blockRenderMap.merge(_this4.props.blockRenderMap)),blockRenderMap},this.resolveAccessibilityProps=function(){var accessibilityProps={};return[_this4.props].concat(_toConsumableArray(_this4.resolvePlugins())).forEach((function(plugin){if("function"==typeof plugin.getAccessibilityProps){var props=plugin.getAccessibilityProps(),popupProps={};void 0===accessibilityProps.ariaHasPopup?popupProps.ariaHasPopup=props.ariaHasPopup:"true"===props.ariaHasPopup&&(popupProps.ariaHasPopup="true"),void 0===accessibilityProps.ariaExpanded?popupProps.ariaExpanded=props.ariaExpanded:!0===props.ariaExpanded&&(popupProps.ariaExpanded=!0),accessibilityProps=_extends({},accessibilityProps,props,popupProps)}})),accessibilityProps}};exports.default=PluginEditor}));unwrapExports(Editor);var lib=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.composeDecorators=exports.createEditorStateWithText=exports.default=void 0;var _createEditorStateWithText2=_interopRequireDefault(createEditorStateWithText),_composeDecorators2=_interopRequireDefault(composeDecorators),_Editor2=_interopRequireDefault(Editor);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_Editor2.default,exports.createEditorStateWithText=_createEditorStateWithText2.default,exports.composeDecorators=_composeDecorators2.default})),Editor$1=unwrapExports(lib),lib_1=lib.composeDecorators;lib.createEditorStateWithText;var objectWithoutPropertiesLoose=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target},SideToolbar=function(_Component){function SideToolbar(props){var _this;return(_this=_Component.call(this,props)||this).onEditorStateChange=Object(lodash__WEBPACK_IMPORTED_MODULE_2__["debounce"])((function(editorState){var isVisible=(0,_this.props.visibilityFn)(editorState),wasVisible=_this.state.isVisible;if(isVisible){_this.setState({isVisible:isVisible});var _this$props=_this.props,displayOptions=_this$props.displayOptions,offset=_this$props.offset,isMobile=_this$props.isMobile,selection=editorState.getSelection(),currentBlock=editorState.getCurrentContent().getBlockForKey(selection.getStartKey()),offsetKey=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DraftOffsetKey */ "l"].encode(currentBlock.getKey(),0,0);setTimeout((function(){if(displayOptions.displayMode===wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL){var node=document.querySelectorAll('[data-offset-key="'+offsetKey+'"]')[0];if(node){var top=node.getBoundingClientRect().top,parentTop=node.offsetParent.getBoundingClientRect().top;_this.setState({position:_extends_1(_extends_1({top:top-parentTop+offset.y},isMobile?{right:offset.x}:{left:offset.x,right:offset.x}),{},{transform:"scale("+(isMobile?.76:1)+")",transition:"transform 0.15s cubic-bezier(.3,1.2,.2,1)"})})}}else displayOptions.displayMode===wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].FLOATING&&_this.setState({position:{top:offset.y,left:offset.x,right:offset.x,transform:"scale("+(isMobile?.76:1)+")",transition:"transform 0.15s cubic-bezier(.3,1.2,.2,1)",position:"absolute"}})}))}else wasVisible&&_this.setState({isVisible:!1,position:{transform:"scale(0)"}})}),40),_this.state={position:{transform:"scale(0)"}},_this.ToolbarDecoration=props.toolbarDecorationFn(),_this}inheritsLoose(SideToolbar,_Component);var _proto=SideToolbar.prototype;return _proto.componentDidMount=function(){this.props.pubsub.subscribe("editorState",this.onEditorStateChange)},_proto.componentWillUnmount=function(){this.props.pubsub.unsubscribe("editorState",this.onEditorStateChange)},_proto.renderToolbarContent=function(){var _this$props2=this.props,theme=_this$props2.theme,pubsub=_this$props2.pubsub;return this.props.structure.map((function(Component,index){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Component,{key:index,getEditorState:pubsub.get("getEditorState"),setEditorState:pubsub.get("setEditorState"),theme:theme})}))},_proto.render=function(){if(!1===this.state.isVisible)return null;var wrapperStyles=(this.props.theme||{}).wrapperStyles,props={className:classnames__WEBPACK_IMPORTED_MODULE_5___default()("Uw7ze",wrapperStyles&&wrapperStyles.sideToolbarWrapper),style:this.state.position};if(this.ToolbarDecoration){var ToolbarDecoration=this.ToolbarDecoration;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ToolbarDecoration,props,this.renderToolbarContent())}return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",props,this.renderToolbarContent())},SideToolbar}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]);SideToolbar.defaultProps={displayOptions:{displayMode:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL},visibilityFn:function(){return!1},toolbarDecorationFn:function(){return null}};var BlockQuoteIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({xmlnsXlink:"http://www.w3.org/1999/xlink",width:19,height:19,viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{id:"block-quote-icon-path",d:"M11.2 4h4.6c.11 0 .2.09.2.2v4.533c0 .852-.095 1.655-.284 2.408a6.033 6.033 0 0 1-.875 1.983 4.501 4.501 0 0 1-1.488 1.364c-.598.341-1.32.512-2.165.512v-2.132c.495 0 .904-.12 1.224-.362.321-.242.584-.562.788-.96.204-.397.343-.845.416-1.343.073-.497.109-.83.109-1.314H11.2a.2.2 0 0 1-.2-.2V4.2c0-.11.09-.2.2-.2zm-8 0h4.6c.11 0 .2.09.2.2v4.533c0 .852-.095 1.655-.284 2.408a6.033 6.033 0 0 1-.875 1.983 4.501 4.501 0 0 1-1.488 1.364c-.598.341-1.32.512-2.165.512v-2.132c.495 0 .904-.12 1.224-.362.321-.242.584-.562.788-.96.204-.397.343-.845.416-1.343.073-.497.109-.83.109-1.314H3.2a.2.2 0 0 1-.2-.2V4.2c0-.11.09-.2.2-.2z"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("g",{fillRule:"evenodd"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("mask",{id:"block-quote-icon-mask"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{xlinkHref:"#block-quote-icon-path"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{fillRule:"nonzero",xlinkHref:"#block-quote-icon-path"})))},BoldIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({xmlnsXlink:"http://www.w3.org/1999/xlink",width:19,height:19,viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{id:"bold-icon-path",d:"M5.2 4h4.84c.515 0 .983.046 1.406.139.423.092.786.244 1.088.454.302.21.537.49.703.84.166.349.25.78.25 1.294 0 .544-.127 1.004-.379 1.379-.251.375-.614.68-1.088.916.665.196 1.161.537 1.489 1.025.327.488.491 1.076.491 1.764 0 .555-.106 1.035-.317 1.44a2.791 2.791 0 0 1-.854.994 3.745 3.745 0 0 1-1.224.57c-.459.123-.93.185-1.413.185H5.2a.2.2 0 0 1-.2-.2V4.2c0-.11.09-.2.2-.2zm2.051 4.452h2.403c.423 0 .77-.102 1.043-.308.272-.205.408-.539.408-1.001 0-.257-.046-.467-.136-.632a1.017 1.017 0 0 0-.363-.385 1.51 1.51 0 0 0-.521-.193 3.395 3.395 0 0 0-.612-.053H7.25v2.572zm0 4.668H9.79c.232 0 .453-.023.665-.069a1.61 1.61 0 0 0 .559-.231 1.15 1.15 0 0 0 .385-.439c.096-.185.144-.421.144-.709 0-.565-.156-.968-.469-1.21-.312-.24-.725-.361-1.239-.361H7.251v3.02z"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("g",{fillRule:"evenodd"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("mask",{id:"bold-icon-mask"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{xlinkHref:"#bold-icon-path"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{fillRule:"nonzero",xlinkHref:"#bold-icon-path"})))},ItalicIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({xmlnsXlink:"http://www.w3.org/1999/xlink",width:19,height:19,viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{id:"italic-icon-path",d:"M7.834 13l1.234-7H7.2a.2.2 0 0 1-.2-.2V4.2c0-.11.09-.2.2-.2h5.6c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.701l-1.234 7H11.8c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H6.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.634z"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("g",{fillRule:"evenodd"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("mask",{id:"italic-icon-mask"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{xlinkHref:"#italic-icon-path"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{fillRule:"nonzero",xlinkHref:"#italic-icon-path"})))},LinkIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{id:"link-icon-path",d:"M8 9h2V6.2c0-.11.09-.2.2-.2h3.3a3.5 3.5 0 0 1 0 7h-3.3a.2.2 0 0 1-.2-.2V10H8v2.8a.2.2 0 0 1-.2.2H4.5a3.5 3.5 0 0 1 0-7h3.3c.11 0 .2.09.2.2V9zm0 0V7.007H4.5a2.5 2.5 0 1 0 0 5H8V10H6.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2H8zm2 1v1.993h3.5a2.5 2.5 0 1 0 0-5H10V9h1.8c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H10z"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{fillRule:"evenodd",transform:"rotate(-45 9 9.5)",xlinkHref:"#link-icon-path"}))},OrderedListIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({xmlnsXlink:"http://www.w3.org/1999/xlink",width:19,height:19,viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{id:"ordered-list-icon-path",d:"M8.2 4h7.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H8.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm0 5h7.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H8.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm0 5h7.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H8.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm-5 1H5v-1h.8c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H3.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm.8-2h-.8a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2h2.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H5v1h-.8a.2.2 0 0 1-.2-.2V13zm-.8-3H4v-.8c0-.11.09-.2.2-.2H5v1h.8c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H3.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zM3 7.8v-.6c0-.11.09-.2.2-.2h2.6c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H5V8H3.2a.2.2 0 0 1-.2-.2zM4 3h-.8a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2h1.6c.11 0 .2.09.2.2v3.6a.2.2 0 0 1-.2.2h-.6a.2.2 0 0 1-.2-.2V3z"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("g",{fillRule:"evenodd"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("mask",{id:"ordered-list-icon-mask"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{xlinkHref:"#ordered-list-icon-path"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{fillRule:"nonzero",xlinkHref:"#ordered-list-icon-path"})))},PlusActiveIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({width:25,height:25,viewBox:"0 0 25 25"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{fillRule:"evenodd",d:"M13.207 12.5l3.394 3.394a.2.2 0 0 1 0 .283l-.424.424a.2.2 0 0 1-.283 0L12.5 13.207l-3.394 3.394a.2.2 0 0 1-.283 0l-.424-.424a.2.2 0 0 1 0-.283l3.394-3.394-3.394-3.394a.2.2 0 0 1 0-.283l.424-.424a.2.2 0 0 1 .283 0l3.394 3.394 3.394-3.394a.2.2 0 0 1 .283 0l.424.424a.2.2 0 0 1 0 .283L13.207 12.5zM12.5 25C5.596 25 0 19.404 0 12.5S5.596 0 12.5 0 25 5.596 25 12.5 19.404 25 12.5 25zm0-1C18.851 24 24 18.851 24 12.5S18.851 1 12.5 1 1 6.149 1 12.5 6.149 24 12.5 24z"}))},PlusIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({width:25,height:25,viewBox:"0 0 25 25"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{fillRule:"evenodd",d:"M13 12h4.8c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H13v4.8a.2.2 0 0 1-.2.2h-.6a.2.2 0 0 1-.2-.2V13H7.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2H12V7.2c0-.11.09-.2.2-.2h.6c.11 0 .2.09.2.2V12zm-.5 13C5.596 25 0 19.404 0 12.5S5.596 0 12.5 0 25 5.596 25 12.5 19.404 25 12.5 25zm0-1C18.851 24 24 18.851 24 12.5S18.851 1 12.5 1 1 6.149 1 12.5 6.149 24 12.5 24z"}))},TitleIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({xmlnsXlink:"http://www.w3.org/1999/xlink",width:19,height:19,viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{id:"title-icon-path",d:"M15 10v4.8a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V10h-1.8a.2.2 0 0 1-.2-.2V8.2c0-.11.09-.2.2-.2h5.6c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H15zM8 6v8.8a.2.2 0 0 1-.2.2H6.2a.2.2 0 0 1-.2-.2V6H2.2a.2.2 0 0 1-.2-.2V4.2c0-.11.09-.2.2-.2h9.6c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H8z"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("g",{fillRule:"evenodd"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("mask",{id:"title-icon-mask"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{xlinkHref:"#title-icon-path"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{fillRule:"nonzero",xlinkHref:"#title-icon-path"})))},TitleOneIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{d:"M10 6v8.8a.2.2 0 0 1-.2.2H8.2a.2.2 0 0 1-.2-.2V6H4.2a.2.2 0 0 1-.2-.2V4.2c0-.11.09-.2.2-.2h9.6c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H10zm4 6h-.8a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2h1.6c.11 0 .2.09.2.2v3.6a.2.2 0 0 1-.2.2h-.6a.2.2 0 0 1-.2-.2V12z",fillRule:"nonzero"}))},TitleTwoIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{d:"M9 8h2.8a.2.2 0 0 0 .2-.2V6.2a.2.2 0 0 0-.2-.2H4.2a.2.2 0 0 0-.2.2v1.6c0 .11.09.2.2.2H7v6.8c0 .11.09.2.2.2h1.6a.2.2 0 0 0 .2-.2V8zm3.2 6h.8v-.8c0-.11.09-.2.2-.2h.8v1h.8c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2h-2.6a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm-.2-2.2v-.6c0-.11.09-.2.2-.2h2.6c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H14v-1h-1.8a.2.2 0 0 1-.2-.2z",fill:"currentColor"}))},UnderlineIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("g",{fillRule:"evenodd"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{d:"M14.014 10.596c0 .676-.116 1.286-.349 1.83a4.102 4.102 0 0 1-.95 1.386c-.402.38-.877.673-1.426.88a5.059 5.059 0 0 1-1.79.308 5.059 5.059 0 0 1-1.79-.309 4.268 4.268 0 0 1-1.434-.88 3.957 3.957 0 0 1-.95-1.385c-.228-.544-.341-1.154-.341-1.83V4.2c0-.11.09-.2.2-.2H6.78c.11 0 .2.09.2.2v6.332c0 .275.042.563.127.864.084.3.224.578.42.832.195.253.453.462.776.625.322.164.72.246 1.196.246.475 0 .874-.082 1.196-.246.322-.163.58-.372.776-.625.196-.254.336-.531.42-.832.085-.301.127-.589.127-.864L12.02 4.2c0-.11.09-.2.2-.2h1.596c.11 0 .2.09.2.2l-.002 6.396z"}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("rect",{width:9,height:1,x:5,y:16,rx:.2})))},UnorderedListIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends_1({xmlnsXlink:"http://www.w3.org/1999/xlink",width:19,height:19,viewBox:"0 0 19 19"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{id:"unordered-list-icon-path",d:"M4.2 4h.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2h-.6a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm3 0h7.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm0 5h7.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm0 5h7.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm-3 0h.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2h-.6a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2zm0-5h.6c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2h-.6a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2z"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("g",{fillRule:"evenodd"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("mask",{id:"unordered-list-icon-mask"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{xlinkHref:"#unordered-list-icon-path"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("use",{fillRule:"nonzero",xlinkHref:"#unordered-list-icon-path"})))};function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var _ref=react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{fillRule:"evenodd",d:"M10.961 5a5.961 5.961 0 014.723 9.599l3.264 3.266a.199.199 0 01.038.23l-.038.052-.8.801a.202.202 0 01-.232.038l-.051-.038-3.266-3.264A5.962 5.962 0 1110.961 5zm-.005 1.079a4.876 4.876 0 100 9.754 4.876 4.876 0 100-9.754z"}),SvgSearchIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends({width:24,height:24,viewBox:"0 0 24 24"},props),_ref)};function _extends$1(){return(_extends$1=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var _displayOptionStyles,_ref$1=react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{d:"M15.385 8l.615.615L12.615 12 16 15.385l-.615.615L12 12.615 8.615 16 8 15.385 11.384 12 8 8.615 8.615 8 12 11.385 15.385 8z",opacity:.6,fill:"currentColor"}),SvgClearIcon=function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends$1({width:24,height:24,viewBox:"0 0 24 24"},props),_ref$1)},Styles$2={sideToolbarPanelWrapper:"_Yk_L",horizontalMenu:"_3zcLi",pluginsWrapper:"_19nme",searchWrapper:"_3cYau",pluginsSectionEmptyState:"_1Y7TI",pluginsSection:"_3emvm",withSearch:"_5VaM-",section:"_238fN",buttonsWrapper:"_9iWn5",buttonWrapper:"_1cmF8",pluginName:"_1Q9IW"},TextSearchInput=function(_Component){function TextSearchInput(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).onChange=function(e){return _this.props.onChange(e.target.value)},_this.onCloseRequested=function(){_this.props.onClose()},_this.handleKeyPress=function(e){e.charCode===wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* KEYS_CHARCODE */ "p"].ESCAPE&&_this.onCloseRequested()},_this.handleClearText=function(){return _this.props.onChange("")},_this}inheritsLoose(TextSearchInput,_Component);var _proto=TextSearchInput.prototype;return _proto.componentDidMount=function(){this.input.focus(),this.input.setSelectionRange(0,this.input.value.length)},_proto.render=function(){var _this2=this,_this$props=this.props,placeHolder=_this$props.placeHolder,value=_this$props.value;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"_2S1LT"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(SvgSearchIcon,{className:"_3EJqW"}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input",{ref:function(_ref){_this2.input=_ref},className:"_3J3cS",placeholder:placeHolder,onKeyPress:this.handleKeyPress,onChange:this.onChange,value:value}),value&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(SvgClearIcon,{className:"_3Luoz",onClick:this.handleClearText}))},TextSearchInput}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),SideToolbarPluginsSection=function(_ref){var getEditorState=_ref.getEditorState,setEditorState=_ref.setEditorState,structure=_ref.structure,searchTag=_ref.searchTag,t=_ref.t,hidePopup=_ref.hidePopup,splitToSections=_ref.splitToSections,horizontalMenu=_ref.horizontalMenu,theme=_ref.theme,styles=Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["mergeStyles"])({styles:Styles$2,theme:theme}),pluginsForTag=searchTag&&function(searchTag,t){var relatedPlugins=[];return[{plugin:"ImagePlugin_InsertButton",tags:"Image_plugin_search_tags"},{plugin:"GalleryPlugin_InsertButton",tags:"Gallery_plugin_search_tags"},{plugin:"VideoPlugin_InsertButton",tags:"Video_plugin_search_tags"},{plugin:"HTMLCodePlugin_InsertButton",tags:"HTML_plugin_search_tags"},{plugin:"DividerPlugin_InsertButton",tags:"Divider_plugin_search_tags"},{plugin:"CodeblockPlugin_InsertButton",tags:"codeBlock_plugin_search_tags"},{plugin:"SoundcloudPlugin_InsertButton",tags:"SoundCloud_plugin_search_tags"},{plugin:"MapPlugin_InsertButton",tags:"Map_plugin_search_tags"},{plugin:"UploadFilePlugin_InsertButton",tags:"UploadFile_plugin_search_tags"},{plugin:"ButtonPlugin_InsertButton",tags:"Button_plugin_search_tags"},{plugin:"UndoPlugin_InsertButton",tags:"Undo_plugin_search_tags"},{plugin:"RedoPlugin_InsertButton",tags:"Redo_plugin_search_tags"},{plugin:"GIFPlugin_InsertButton",tags:"Gif_plugin_search_tags"},{plugin:"EmojiPlugin_InsertButton",tags:"Emoji_plugin_search_tags"},{plugin:"Facebook_InsertButton",tags:"Facebook_plugin_search_tags"},{plugin:"Instagram_InsertButton",tags:"Instagram_plugin_search_tags"},{plugin:"TikTok_InsertButton",tags:"YouTube_plugin_search_tags"},{plugin:"Pinterest_InsertButton",tags:"TikTok_plugin_search_tags"},{plugin:"YouTube_InsertButton",tags:"Pinterest_plugin_search_tags"},{plugin:"Events_InsertButton",tags:"Events_plugin_search_tags"},{plugin:"Bookings_InsertButton",tags:"Bookings_plugin_search_tags"},{plugin:"Stores_InsertButton",tags:"Stores_plugin_search_tags"}].map((function(_ref){var plugin=_ref.plugin,tags=_ref.tags;return t(tags).includes(searchTag)&&relatedPlugins.push(plugin)})),relatedPlugins}(searchTag,t),plugins=searchTag?structure.filter((function(_ref2){var name=_ref2.name;return pluginsForTag.includes(name)})):structure;if(0===plugins.length)return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:styles.pluginsSectionEmptyState},t("BlockToolbar_Search_EmptyState"));var sectionsArr,pluginSectionRenderer=function(section){var pluginsToRender=section?plugins.filter((function(_ref3){return _ref3.section===section})):plugins;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()(styles.section,horizontalMenu&&styles.horizontalMenu)},section&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:styles.pluginsSection},t(section)),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()(styles.buttonsWrapper,horizontalMenu&&styles.horizontalMenu)},pluginsToRender.map((function(_ref4,index){var Component=_ref4.component;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{key:index,className:classnames__WEBPACK_IMPORTED_MODULE_5___default()(styles.buttonWrapper,horizontalMenu&&styles.horizontalMenu)},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Component,{getEditorState:getEditorState,setEditorState:setEditorState,showName:!horizontalMenu,toolbarName:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].SIDE,hidePopup:hidePopup,theme:theme}))}))))},sections=[];return splitToSections&&structure.forEach((function(_ref5){var section=_ref5.section;return!sections.includes(section)&&sections.push(section)})),sections.length>0?(sectionsArr=sections,["BlockToolbar_Section_Basic","BlockToolbar_Section_Embed_Wix","BlockToolbar_Section_Embed_Social","BlockToolbar_Section_Tools"].map((function(section){return!!sectionsArr.includes(section)&&section})).filter((function(section){return section}))).map((function(section){return pluginSectionRenderer(section)})):pluginSectionRenderer()},AddPluginMenu=function(_Component){function AddPluginMenu(props){var _classNames,_this;(_this=_Component.call(this,props)||this).onChange=function(value){return _this.setState({value:value},(function(){var _this$container;return null===(_this$container=_this.container)||void 0===_this$container?void 0:_this$container.scrollTo(0,0)}))},_this.state={value:""};var addPluginMenuConfig=props.addPluginMenuConfig,isMobile=props.isMobile;return _this.showSearch=(null==addPluginMenuConfig?void 0:addPluginMenuConfig.showSearch)&&!isMobile,_this.horizontalMenu=!addPluginMenuConfig&&!isMobile,_this.wrapperClassName=classnames__WEBPACK_IMPORTED_MODULE_5___default()(Styles$2.sideToolbarPanelWrapper,((_classNames={})[Styles$2.horizontalMenu]=_this.horizontalMenu,_classNames)),_this.pluginsClassName=classnames__WEBPACK_IMPORTED_MODULE_5___default()(Styles$2.pluginsWrapper,_this.horizontalMenu&&Styles$2.horizontalMenu,_this.showSearch&&Styles$2.withSearch),_this}return inheritsLoose(AddPluginMenu,_Component),AddPluginMenu.prototype.render=function(){var _this$container2,_this2=this,_this$props=this.props,getEditorState=_this$props.getEditorState,setEditorState=_this$props.setEditorState,structure=_this$props.structure,hidePopup=_this$props.hidePopup,t=_this$props.t,addPluginMenuConfig=_this$props.addPluginMenuConfig,isActive=_this$props.isActive,theme=_this$props.theme,showSearch=this.showSearch,wrapperClassName=this.wrapperClassName,pluginsClassName=this.pluginsClassName,horizontalMenu=this.horizontalMenu,value=this.state.value;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:wrapperClassName,"data-hook":"addPluginMenu",ref:function(_ref){return _this2.container=_ref},style:{height:null===(_this$container2=this.container)||void 0===_this$container2?void 0:_this$container2.offsetHeight}},showSearch&&isActive&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:Styles$2.searchWrapper},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TextSearchInput,{onClose:hidePopup,placeHolder:t("BlockToolbar_Search_Placeholder"),onChange:this.onChange,value:value})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:pluginsClassName},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(SideToolbarPluginsSection,{getEditorState:getEditorState,setEditorState:setEditorState,structure:structure,searchTag:value,t:t,hidePopup:hidePopup,splitToSections:!value&&(null==addPluginMenuConfig?void 0:addPluginMenuConfig.splitToSections),horizontalMenu:horizontalMenu,theme:theme})))},AddPluginMenu}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),PopupOffsetnHoc=function(_ref){var children=_ref.children,elementHeight=_ref.elementHeight,elementMarginTop=_ref.elementMarginTop,elementMarginBottom=_ref.elementMarginBottom,targetElement=_ref.targetElement,bodyRect=document.body.getBoundingClientRect(),elemRect=null==targetElement?void 0:targetElement.getBoundingClientRect(),offset=bodyRect.height-(null==elemRect?void 0:elemRect.top)-elementMarginTop;return react__WEBPACK_IMPORTED_MODULE_1___default.a.cloneElement(children,{top:offset<elementHeight?elementMarginBottom-elementHeight:elementMarginTop})},AddPluginFloatingToolbar=function(_Component){function AddPluginFloatingToolbar(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).state={isActive:!1,tabIndex:-1,style:{transform:"translate(-50%) scale(0)"}},_this.onWindowClick=function(){_this.state.isActive&&_this.hidePopup()},_this.openAddPluginModal=function(){var _this$props=_this.props,getEditorState=_this$props.getEditorState,setEditorState=_this$props.setEditorState,structure=_this$props.structure,pubsub=_this$props.pubsub,theme=_this$props.theme,helpers=_this$props.helpers,t=_this$props.t,isMobile=_this$props.isMobile,addPluginMenuConfig=_this$props.addPluginMenuConfig;helpers.openModal({modalName:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorModals */ "m"].MOBILE_ADD_PLUGIN,modalStyles:Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getModalStyles */ "S"])({fullScreen:!1,isMobile:isMobile,stickyButtomMobile:!0}),structure:structure,theme:theme,hidePopup:helpers.closeModal,getEditorState:getEditorState,setEditorState:setEditorState,pubsub:pubsub,t:t,isMobile:isMobile,addPluginMenuConfig:addPluginMenuConfig})},_this.onClick=function(event){event.preventDefault(),event.stopPropagation(),_this.props.isMobile?_this.openAddPluginModal():_this.togglePopup()},_this.onKeyDown=function(event){switch(event.key){case"Escape":_this.hidePopup()}},_this.togglePopup=function(){_this.state.isActive?_this.hidePopup():_this.showPopup()},_this.showPopup=function(){_this.setState({style:_extends_1(_extends_1({},_this.getPopupOffset()),{},{transform:"translate(-50%) scale(1)",transition:"transform 0.15s cubic-bezier(.3,1.2,.2,1)",width:_this.popupRef.offsetWidth}),isActive:!0,tabIndex:0})},_this.hidePopup=function(){_this.setState({style:{transform:"translate(-50%) scale(0)"},isActive:!1,tabIndex:-1})},_this.getPopupOffset=function(){return _this.popupOffset||_this.popupRef&&(_this.popupOffset={left:_this.popupRef.offsetWidth/2+30,right:-_this.popupRef.offsetWidth/2+30}),_this.popupOffset},_this}inheritsLoose(AddPluginFloatingToolbar,_Component);var _proto=AddPluginFloatingToolbar.prototype;return _proto.componentDidMount=function(){window.addEventListener("click",this.onWindowClick)},_proto.componentWillUnmount=function(){window.removeEventListener("click",this.onWindowClick)},_proto.render=function(){var _this$popupRef,_this2=this,_this$props2=this.props,theme=_this$props2.theme,getEditorState=_this$props2.getEditorState,setEditorState=_this$props2.setEditorState,structure=_this$props2.structure,t=_this$props2.t,addPluginMenuConfig=_this$props2.addPluginMenuConfig,isMobile=_this$props2.isMobile,isActive=this.state.isActive,toolbarStyles=(theme||{}).toolbarStyles,floatingContainerClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()("_1guAn",toolbarStyles&&toolbarStyles.sideToolbar_floatingContainer),floatingIconClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()("_210ya",toolbarStyles&&toolbarStyles.sideToolbar_floatingIcon),popoupClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()("_20iMo",toolbarStyles&&toolbarStyles.sideToolbar);return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* FocusManager */ "o"],{role:"toolbar",active:isActive,"aria-orientation":"horizontal",focusTrapOptions:{escapeDeactivates:!1,clickOutsideDeactivates:!0},className:floatingContainerClassNames,onKeyDown:function(e){return _this2.onKeyDown(e)}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{"aria-label":"Plugin Toolbar","aria-pressed":isActive,tabIndex:"0",className:floatingIconClassNames,"data-hook":"addPluginFloatingToolbar",onClick:this.onClick,ref:function(el){return _this2.selectButton=el}},isActive?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PlusActiveIcon,null):react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PlusIcon,null)),!Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["isSSR"])()&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(PopupOffsetnHoc,{elementHeight:null===(_this$popupRef=this.popupRef)||void 0===_this$popupRef?void 0:_this$popupRef.offsetHeight,elementMarginTop:addPluginMenuConfig?-20:-15,elementMarginBottom:45,targetElement:this.selectButton},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement((function(_ref2){var top=_ref2.top,isActive=_this2.state.isActive,horizontalMenuWidth=39*structure.length;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:popoupClassNames,style:_extends_1(_extends_1({},_this2.state.style),{},{top:top,width:addPluginMenuConfig?320:horizontalMenuWidth}),ref:function(el){return _this2.popupRef=el},onClick:function(e){return e.stopPropagation()},role:"none","data-hook":"floatingAddPluginMenu"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(AddPluginMenu,{t:t,getEditorState:getEditorState,setEditorState:setEditorState,structure:structure,hidePopup:_this2.hidePopup,addPluginMenuConfig:addPluginMenuConfig,isMobile:isMobile,isActive:isActive,theme:theme}))}),null)))},AddPluginFloatingToolbar}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),createSideToolbar$1=function(_ref2){var buttons=_ref2.buttons,offset=_ref2.offset,pubsub=_ref2.pubsub,theme=_ref2.theme,visibilityFn=_ref2.visibilityFn,isMobile=_ref2.isMobile,helpers=_ref2.helpers,t=_ref2.t,displayOptions=_ref2.displayOptions,toolbarDecorationFn=_ref2.toolbarDecorationFn,config=_ref2.config,addPluginMenuConfig=_ref2.addPluginMenuConfig,buttonStyles=theme.buttonStyles,rest=objectWithoutPropertiesLoose(theme,["buttonStyles"]),toolbarButtonTheme=_extends_1({buttonStyles:{button:buttonStyles.sideToolbarButton,buttonWrapper:buttonStyles.sideToolbarButton_wrapper,icon:buttonStyles.sideToolbarButton_icon,label:buttonStyles.sideToolbarButton_label}},rest);return function(data){void 0===data&&(data={});var _data=data,_data$name=_data.name,name=void 0===_data$name?"SideToolbar":_data$name,_data$pubsub=_data.pubsub,pubsub=void 0===_data$pubsub?Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* simplePubsub */ "jb"])({isVisible:!1}):_data$pubsub,theme=_data.theme,_data$structure=_data.structure,structure=void 0===_data$structure?[]:_data$structure,visibilityFn=_data.visibilityFn,offset=_data.offset,isMobile=_data.isMobile,displayOptions=_data.displayOptions,toolbarDecorationFn=_data.toolbarDecorationFn,config=_data.config;return{name:name,initialize:function(_ref){var setEditorState=_ref.setEditorState,getEditorState=_ref.getEditorState;pubsub.set("getEditorState",getEditorState),pubsub.set("setEditorState",setEditorState)},onChange:function(editorState){return pubsub.set("editorState",editorState),editorState},SideToolbar:Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* decorateComponentWithProps */ "K"])(SideToolbar,{pubsub:pubsub,structure:structure,theme:theme,isMobile:isMobile,offset:offset,visibilityFn:visibilityFn,displayOptions:displayOptions,toolbarDecorationFn:toolbarDecorationFn,config:config})}}({offset:offset,theme:theme,visibilityFn:visibilityFn,isMobile:isMobile,displayOptions:displayOptions,toolbarDecorationFn:toolbarDecorationFn,config:config,structure:[function(_ref3){var getEditorState=_ref3.getEditorState,setEditorState=_ref3.setEditorState;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(AddPluginFloatingToolbar,{getEditorState:getEditorState,setEditorState:setEditorState,theme:toolbarButtonTheme,structure:buttons,pubsub:pubsub,isMobile:isMobile,helpers:helpers,t:t,addPluginMenuConfig:addPluginMenuConfig})}]})},displayOptionStyles=((_displayOptionStyles={})[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL]={},_displayOptionStyles[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].FLOATING]={position:"absolute"},_displayOptionStyles),StaticToolbar=function(_React$PureComponent){function StaticToolbar(props){var _this;return(_this=_React$PureComponent.call(this,props)||this).onSelectionChanged=Object(lodash__WEBPACK_IMPORTED_MODULE_2__["debounce"])((function(){return _this.forceUpdate()}),100),_this.setToolbarScrollButton=function(scrollLeft,scrollWidth,clientWidth){if(!_this.props.isMobile){var isScroll=scrollWidth-clientWidth-(_this.state.showLeftArrow||_this.state.showRightArrow?20:0)>8;_this.setState({showLeftArrow:isScroll&&scrollLeft===scrollWidth-clientWidth,showRightArrow:isScroll&&scrollLeft<scrollWidth-clientWidth})}},_this.onOverrideContent=function(overrideContent){return _this.setState({overrideContent:overrideContent})},_this.onExtendContent=function(extendContent){return _this.setState({extendContent:extendContent})},_this.state={overrideContent:void 0,extendContent:void 0,showRightArrow:!1,showLeftArrow:!1},_this.ToolbarDecoration=props.toolbarDecorationFn(),_this}inheritsLoose(StaticToolbar,_React$PureComponent);var _proto=StaticToolbar.prototype;return _proto.componentWillMount=function(){this.props.pubsub.subscribe("selection",this.onSelectionChanged)},_proto.componentWillUnmount=function(){this.props.pubsub.unsubscribe("selection",this.onSelectionChanged)},_proto.scrollToolbar=function(event,leftDirection){event.preventDefault();var _this$scrollContainer=this.scrollContainer,clientWidth=_this$scrollContainer.clientWidth,scrollWidth=_this$scrollContainer.scrollWidth;this.scrollContainer.scrollLeft=leftDirection?0:Math.min(this.scrollContainer.scrollLeft+clientWidth,scrollWidth)},_proto.renderToolbarContent=function(childrenProps){var _classNames,_this2=this,_this$props=this.props,theme=_this$props.theme,structure=_this$props.structure,isMobile=_this$props.isMobile,toolbarStyles=(theme||{}).toolbarStyles,_this$state=this.state,showLeftArrow=_this$state.showLeftArrow,showRightArrow=_this$state.showRightArrow,OverrideContent=_this$state.overrideContent,hasArrow=showLeftArrow||showRightArrow,arrowClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()("_1O9k1",toolbarStyles.responsiveArrow),leftArrowIconClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()("_1CiRG",toolbarStyles.responsiveArrowStart_icon),rightArrowIconClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()("_3KVM5",toolbarStyles.responsiveArrowEnd_icon),buttonClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()("_3v2NX",toolbarStyles.buttons),scrollableClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()("_1R64m",toolbarStyles.scrollableContainer,((_classNames={}).Ynekp=isMobile,_classNames));return childrenProps.toolbarName=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].FOOTER,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:buttonClassNames},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_measure__WEBPACK_IMPORTED_MODULE_9__[/* default */ "a"],{client:!0,scroll:!0,innerRef:function(ref){return _this2.scrollContainer=ref},onResize:function(_ref2){var scroll=_ref2.scroll,client=_ref2.client;return _this2.setToolbarScrollButton(scroll.left,scroll.width,client.width)}},(function(_ref3){var measure=_ref3.measure,measureRef=_ref3.measureRef;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:scrollableClassNames,ref:measureRef,onScroll:function(){return measure()}},OverrideContent?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(OverrideContent,childrenProps):structure.map((function(Button,index){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Button,_extends_1({key:index},childrenProps))})))})),hasArrow&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{className:arrowClassNames,"data-hook":"toolbarArrow",onMouseDown:function(e){return _this2.scrollToolbar(e,showLeftArrow)}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i",{className:showLeftArrow?leftArrowIconClassNames:rightArrowIconClassNames})))},_proto.render=function(){var _this$props2=this.props,visibilityFn=_this$props2.visibilityFn,pubsub=_this$props2.pubsub;if(visibilityFn&&!visibilityFn(pubsub.get("getEditorState")()))return null;var _this$props3=this.props,theme=_this$props3.theme,helpers=_this$props3.helpers,isMobile=_this$props3.isMobile,linkModal=_this$props3.linkModal,anchorTarget=_this$props3.anchorTarget,relValue=_this$props3.relValue,t=_this$props3.t,dataHook=_this$props3.dataHook,id=_this$props3.id,offset=_this$props3.offset,uiSettings=_this$props3.uiSettings,displayOptions=_this$props3.displayOptions,renderTooltips=_this$props3.renderTooltips,locale=_this$props3.locale,setEditorState=_this$props3.setEditorState,config=_this$props3.config,ExtendContent=this.state.extendContent,toolbarStyles=(theme||{}).toolbarStyles,extendClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()("_3wCla",toolbarStyles.extend),childrenProps={theme:theme,helpers:helpers,isMobile:isMobile,linkModal:linkModal,anchorTarget:anchorTarget,relValue:relValue,t:t,getEditorState:pubsub.get("getEditorState"),setEditorState:pubsub.get("setEditorState"),onOverrideContent:this.onOverrideContent,onExtendContent:this.onExtendContent,uiSettings:uiSettings},_offset$x=offset.x,left=void 0===_offset$x?0:_offset$x,_offset$y=offset.y,props={style:_extends_1({left:left,top:void 0===_offset$y?0:_offset$y},displayOptionStyles[displayOptions.displayMode]),className:classnames__WEBPACK_IMPORTED_MODULE_5___default()("_3gq3m",toolbarStyles.toolbar,toolbarStyles.staticToolbar),role:"toolbar","aria-orientation":"horizontal",id:id,"data-hook":dataHook},ToolbarDecoration=this.ToolbarDecoration?this.ToolbarDecoration:"div";if(renderTooltips){var context={isMobile:isMobile,theme:theme,t:t,anchorTarget:anchorTarget,relValue:relValue,locale:locale,helpers:helpers,config:config,setEditorState:setEditorState};return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1__["Fragment"],null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ToolbarDecoration,_extends_1({},props,context),this.renderToolbarContent(_extends_1(_extends_1({},childrenProps),context)),ExtendContent&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:extendClassNames},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ExtendContent,_extends_1({},childrenProps,context)))),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TooltipHost */ "G"],null))}return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ToolbarDecoration,props,this.renderToolbarContent(childrenProps),ExtendContent&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:extendClassNames},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ExtendContent,childrenProps)))},StaticToolbar}(react__WEBPACK_IMPORTED_MODULE_1___default.a.PureComponent);StaticToolbar.defaultProps={displayOptions:{displayMode:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL},toolbarDecorationFn:function(){return null}};var createStaticToolbar=function(data){var _classNames;void 0===data&&(data={});var pubsub=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* simplePubsub */ "jb"])(),_data=data,_data$name=_data.name,name=void 0===_data$name?"StaticToolbar":_data$name,theme=_data.theme,_data$structure=_data.structure,structure=void 0===_data$structure?[]:_data$structure,_data$isMobile=_data.isMobile,isMobile=void 0!==_data$isMobile&&_data$isMobile,helpers=_data.helpers,_data$linkModal=_data.linkModal,linkModal=void 0!==_data$linkModal&&_data$linkModal,anchorTarget=_data.anchorTarget,relValue=_data.relValue,t=_data.t,id=_data.id,offset=_data.offset,visibilityFn=_data.visibilityFn,displayOptions=_data.displayOptions,toolbarDecorationFn=_data.toolbarDecorationFn,_data$renderTooltips=_data.renderTooltips,renderTooltips=void 0!==_data$renderTooltips&&_data$renderTooltips,locale=_data.locale,setEditorState=_data.setEditorState,config=_data.config,toolbarProps={pubsub:pubsub,structure:structure,theme:theme,isMobile:isMobile,helpers:helpers,linkModal:linkModal,anchorTarget:anchorTarget,relValue:relValue,t:t,id:id,dataHook:Object(lodash__WEBPACK_IMPORTED_MODULE_2__["camelCase"])(name),offset:offset,visibilityFn:visibilityFn,displayOptions:displayOptions,toolbarDecorationFn:toolbarDecorationFn,renderTooltips:renderTooltips,locale:locale,setEditorState:setEditorState,config:config},staticToolbarClassName=classnames__WEBPACK_IMPORTED_MODULE_5___default()(((_classNames={})._1RMoq=toolbarProps.isMobile,_classNames));return{name:name,initialize:function(_ref){var getEditorState=_ref.getEditorState,setEditorState=_ref.setEditorState;pubsub.set("getEditorState",getEditorState),pubsub.set("setEditorState",setEditorState)},onChange:function(editorState){return pubsub.set("selection",editorState.getSelection()),editorState},Toolbar:function(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:staticToolbarClassName,dir:Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["getLangDir"])(locale)},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(StaticToolbar,_extends_1({},toolbarProps,props)))}}},styles$1={inlineToolbarButton_wrapper:"QGwpa",inlineToolbarButton:"_3zx08",inlineToolbarButton_icon:"_2Dg1H",inlineToolbarButton_active:"_2SD0p"},TextButton=function(_Component){function TextButton(props){var _this;(_this=_Component.call(this,props)||this).isActive=function(){var isActive=_this.props.isActive;return!!isActive&&isActive()},_this.handleClick=function(event){var onClick=_this.props.onClick;react_tooltip__WEBPACK_IMPORTED_MODULE_11__[/* default */ "a"].hide(),onClick&&onClick(event)},_this.preventBubblingUp=function(event){return event.preventDefault()};var buttonStyles=(props.theme||{}).buttonStyles;return _this.styles=Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["mergeStyles"])({styles:styles$1,theme:buttonStyles}),_this}return inheritsLoose(TextButton,_Component),TextButton.prototype.render=function(){var _classNames,styles=this.styles,_this$props=this.props,Icon=_this$props.icon,theme=_this$props.theme,isMobile=_this$props.isMobile,tooltipText=_this$props.tooltipText,dataHook=_this$props.dataHook,tabIndex=_this$props.tabIndex,shouldRefreshTooltips=_this$props.shouldRefreshTooltips,showTooltip=!isMobile&&!Object(lodash__WEBPACK_IMPORTED_MODULE_2__["isEmpty"])(tooltipText),iconClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()(styles.inlineToolbarButton_icon,((_classNames={})[styles.inlineToolbarButton_active]=this.isActive(),_classNames)),textButton=react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:styles.inlineToolbarButton_wrapper,onMouseDown:this.preventBubblingUp},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{tabIndex:tabIndex,"aria-label":tooltipText,"aria-pressed":this.isActive(),className:styles.inlineToolbarButton,"data-hook":dataHook,onClick:this.handleClick},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:iconClassNames},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Icon,null))));return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* ToolbarButton */ "E"],{theme:theme,showTooltip:showTooltip,tooltipText:tooltipText,button:textButton,shouldRefreshTooltips:shouldRefreshTooltips})},TextButton}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]);TextButton.defaultProps={tabIndex:0};var createTextAlignmentButton=function(_ref){var alignment=_ref.alignment,Icon=_ref.Icon,tooltipTextKey=_ref.tooltipTextKey;return function(_Component){function TextAlignmentButton(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).isActive=function(){return _this.props.alignment===alignment},_this.handleClick=function(){var _this$props=_this.props,onClick=_this$props.onClick,getEditorState=_this$props.getEditorState,setEditorState=_this$props.setEditorState;onClick?onClick(alignment):setEditorState(Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* setTextAlignment */ "ib"])(getEditorState(),alignment))},_this}return inheritsLoose(TextAlignmentButton,_Component),TextAlignmentButton.prototype.render=function(){var _this$props2=this.props,theme=_this$props2.theme,isMobile=_this$props2.isMobile,t=_this$props2.t,tabIndex=_this$props2.tabIndex,shouldRefreshTooltips=_this$props2.shouldRefreshTooltips,tooltipText=t(tooltipTextKey),dataHookText="textAlignmentButton_"+alignment;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TextButton,{icon:Icon,theme:theme,isMobile:isMobile,isActive:this.isActive,onClick:this.handleClick,tooltipText:tooltipText,dataHook:dataHookText,tabIndex:tabIndex,shouldRefreshTooltips:shouldRefreshTooltips})},TextAlignmentButton}(react__WEBPACK_IMPORTED_MODULE_1__["Component"])};function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _displayOptionStyles$1,createTextBlockStyleButton=function(_ref){var blockTypes=_ref.blockTypes,Icons=_ref.Icons,_ref$InactiveIcon=_ref.InactiveIcon,InactiveIcon=void 0===_ref$InactiveIcon?null:_ref$InactiveIcon,tooltipTextKey=_ref.tooltipTextKey;return function(_Component){function TextBlockStyleButton(props){var _this;return(_this=_Component.call(this,props)||this).nextBlockTypeIndex=function(){var blockType=_this.activeBlockType,nextBlockTypeIndex=0;if(blockType){var blockTypeIndex=blockTypes.findIndex((function(t){return t===blockType}));nextBlockTypeIndex=blockTypeIndex+1<blockTypes.length?blockTypeIndex+1:-1}return nextBlockTypeIndex>-1?nextBlockTypeIndex:void 0},_this.setBlockStyle=function(event){event.preventDefault();var _this$props=_this.props,getEditorState=_this$props.getEditorState,setEditorState=_this$props.setEditorState,blockTypeIndex=_this.nextBlockTypeIndex();_this.setState({blockTypeIndex:blockTypeIndex},(function(){var blockType=_this.activeBlockType;setEditorState(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* RichUtils */ "w"].toggleBlockType(getEditorState(),blockType))}))},_this.blockTypeIsActive=function(){var blockType=_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12___default()(_this).blockType;return void 0!==blockType&&blockType===_this.activeBlockType},_this.state={blockTypeIndex:void 0},_this}inheritsLoose(TextBlockStyleButton,_Component);var Constructor,protoProps,staticProps,_proto=TextBlockStyleButton.prototype;return _proto.componentWillReceiveProps=function(nextProps){if(!1===this.props.isVisible&&!0===nextProps.isVisible){var selectionBlockType=this.selectionBlockType,blockTypeFoundIndex=blockTypes.findIndex((function(b){return b===selectionBlockType})),blockTypeIndex=blockTypeFoundIndex>-1?blockTypeFoundIndex:void 0;this.setState({blockTypeIndex:blockTypeIndex})}},_proto.render=function(){var Icon=this.Icon,_this$props2=this.props,theme=_this$props2.theme,isMobile=_this$props2.isMobile,t=_this$props2.t,tabIndex=_this$props2.tabIndex,tooltipText=t(tooltipTextKey),dataHookText="textBlockStyleButton_"+tooltipText.replace(/\s+/,"");return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TextButton,{icon:Icon,theme:theme,isMobile:isMobile,isActive:this.blockTypeIsActive,onClick:this.setBlockStyle,tooltipText:tooltipText,dataHook:dataHookText,tabIndex:tabIndex})},Constructor=TextBlockStyleButton,(protoProps=[{key:"activeBlockType",get:function(){var blockTypeIndex=this.state.blockTypeIndex;return void 0!==blockTypeIndex?blockTypes[blockTypeIndex]:"unstyled"}},{key:"selectionBlockType",get:function(){var getEditorState=this.props.getEditorState;if(!getEditorState)return!1;var editorState=getEditorState();return editorState.getCurrentContent().getBlockForKey(editorState.getSelection().getStartKey()).getType()}},{key:"Icon",get:function(){var blockTypeIndex=this.state.blockTypeIndex;return void 0!==blockTypeIndex?Icons[blockTypeIndex]:InactiveIcon||Icons[0]}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),TextBlockStyleButton}(react__WEBPACK_IMPORTED_MODULE_1__["Component"])},createTextInlineStyleButton=function(_ref){var style=_ref.style,Icon=_ref.Icon,tooltipTextKey=_ref.tooltipTextKey;return function(_Component){function TextInlineStyleButton(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).toggleStyle=function(event){var _this$props=_this.props,getEditorState=_this$props.getEditorState,setEditorState=_this$props.setEditorState;event.preventDefault(),setEditorState(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* RichUtils */ "w"].toggleInlineStyle(getEditorState(),style))},_this.isActive=function(){var getEditorState=_this.props.getEditorState;return!!getEditorState&&getEditorState().getCurrentInlineStyle().has(style)},_this}return inheritsLoose(TextInlineStyleButton,_Component),TextInlineStyleButton.prototype.render=function(){var _this$props2=this.props,theme=_this$props2.theme,isMobile=_this$props2.isMobile,t=_this$props2.t,tabIndex=_this$props2.tabIndex,tooltipText=t(tooltipTextKey),dataHookText="textInlineStyleButton_"+tooltipText.replace(/\s+/,"");return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TextButton,{icon:Icon,theme:theme,isMobile:isMobile,isActive:this.isActive,onClick:this.toggleStyle,tooltipText:tooltipText,dataHook:dataHookText,tabIndex:tabIndex})},TextInlineStyleButton}(react__WEBPACK_IMPORTED_MODULE_1__["Component"])},styles$2={inlineToolbarDropdown_wrapper:"_2p1n_",inlineToolbarDropdown_options:"_2bRDr",inlineToolbarDropdownButton_wrapper:"MytZM",inlineToolbarDropdownButton:"_216Ce",inlineToolbarDropdownButton_icon:"_3qjP5"},ClickOutside=unwrapExports(createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=_interopRequireDefault(react__WEBPACK_IMPORTED_MODULE_1___default.a),_propTypes2=_interopRequireDefault(prop_types__WEBPACK_IMPORTED_MODULE_7___default.a);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ClickOutside=function(_Component){function ClickOutside(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClickOutside);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ClickOutside.__proto__||Object.getPrototypeOf(ClickOutside)).call(this,props));return _this.handle=function(e){if("touchend"===e.type&&(_this.isTouch=!0),"click"!==e.type||!_this.isTouch){var onClickOutside=_this.props.onClickOutside,el=_this.container;el&&!el.contains(e.target)&&onClickOutside(e)}},_this.getContainer=_this.getContainer.bind(_this),_this.isTouch=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ClickOutside,react__WEBPACK_IMPORTED_MODULE_1___default.a.Component),_createClass(ClickOutside,[{key:"getContainer",value:function(ref){this.container=ref}},{key:"render",value:function(){var _props=this.props,children=_props.children,props=(_props.onClickOutside,function(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}(_props,["children","onClickOutside"]));return _react2.default.createElement("div",_extends({},props,{ref:this.getContainer}),children)}},{key:"componentDidMount",value:function(){document.addEventListener("touchend",this.handle,!0),document.addEventListener("click",this.handle,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("touchend",this.handle,!0),document.removeEventListener("click",this.handle,!0)}}]),ClickOutside}();ClickOutside.propTypes={onClickOutside:_propTypes2.default.func.isRequired},exports.default=ClickOutside}))),italicButton=function(icon){return createTextInlineStyleButton({style:"ITALIC",Icon:icon||ItalicIcon,tooltipTextKey:"ItalicButton_Tooltip"})},underlineButton=function(icon){return createTextInlineStyleButton({style:"UNDERLINE",Icon:icon||UnderlineIcon,tooltipTextKey:"UnderlineButton_Tooltip"})},blockquoteButton=function(icon){return createTextBlockStyleButton({blockTypes:["blockquote"],Icons:[icon||BlockQuoteIcon],tooltipTextKey:"QuoteButton_Tooltip"})},alignTextLeftButton=function(icon){return createTextAlignmentButton({alignment:"left",Icon:icon||wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* AlignLeftIcon */ "c"],tooltipTextKey:"AlignTextLeftButton_Tooltip"})},alignTextCenterButton=function(icon){return createTextAlignmentButton({alignment:"center",Icon:icon||wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* AlignTextCenterIcon */ "e"],tooltipTextKey:"AlignTextCenterButton_Tooltip"})},alignTextRightButton=function(icon){return createTextAlignmentButton({alignment:"right",Icon:icon||wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* AlignRightIcon */ "d"],tooltipTextKey:"AlignTextRightButton_Tooltip"})},alignTextJustifyButton=function(icon){return createTextAlignmentButton({alignment:"justify",Icon:icon||wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* AlignJustifyIcon */ "b"],tooltipTextKey:"AlignTextJustifyButton_Tooltip"})},orderedListButton=function(icon){return createTextBlockStyleButton({blockTypes:["ordered-list-item"],Icons:[icon||OrderedListIcon],tooltipTextKey:"OrderedListButton_Tooltip"})},unorderedListButton=function(icon){return createTextBlockStyleButton({blockTypes:["unordered-list-item"],Icons:[icon||UnorderedListIcon],tooltipTextKey:"UnorderedListButton_Tooltip"})},activeIcon=function(textAlignment,icons){var AlignLeft=icons.AlignLeft,AlignCenter=icons.AlignCenter,AlignRight=icons.AlignRight,AlignJustify=icons.AlignJustify;switch(textAlignment){case"center":return AlignCenter||wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* AlignTextCenterIcon */ "e"];case"right":return AlignRight||wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* AlignRightIcon */ "d"];case"justify":return AlignJustify||wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* AlignJustifyIcon */ "b"];case"left":default:return AlignLeft||wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* AlignLeftIcon */ "c"]}},textAlignmentButton=function(icons){var AlignLeft=icons.AlignLeft,AlignCenter=icons.AlignCenter,AlignRight=icons.AlignRight,AlignJustify=icons.AlignJustify;return function(_ref){var buttons=_ref.buttons,activeItem=_ref.activeItem,onChange=_ref.onChange,tooltipTextKey=_ref.tooltipTextKey;return function(_PureComponent){function TextDropdownButton(props){var _this;(_this=_PureComponent.call(this,props)||this).showOptions=function(){return _this.setState({isOpen:!0})},_this.renderOptions=function(){var _extends2,_this$props=_this.props,getEditorState=_this$props.getEditorState,setEditorState=_this$props.setEditorState,_this$state=_this.state,selected=_this$state.selected,isOpen=_this$state.isOpen,typeKey=Object.keys(selected).filter((function(k){return"Icon"!==k}))[0],buttonProps=_extends_1(_extends_1(((_extends2={})[typeKey]=selected[typeKey],_extends2.onClick=function(value){onChange(getEditorState,setEditorState,value),_this.setState({selected:activeItem({value:value}),isOpen:!1})},_extends2),_this.props),{},{theme:_this.theme,shouldRefreshTooltips:function(){return isOpen}});return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ClickOutside,{onClickOutside:function(){return _this.setState({isOpen:!1})},className:_this.styles.inlineToolbarDropdown_options},buttons.map((function(Button,i){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Button,_extends_1({key:i,tabIndex:"0"},buttonProps))})))};var _this$props2=_this.props,defaultTextAlignment=_this$props2.defaultTextAlignment,_getEditorState=_this$props2.getEditorState;_this.state={isOpen:!1,selected:activeItem({getEditorState:_getEditorState,defaultValue:defaultTextAlignment})};var theme=props.theme||{};return _this.theme=_extends_1(_extends_1({},theme),{},{buttonStyles:{inlineToolbarButton_wrapper:classnames__WEBPACK_IMPORTED_MODULE_5___default()(styles$2.inlineToolbarDropdownButton_wrapper,theme&&theme.inlineToolbarDropdownButton_wrapper),inlineToolbarButton:classnames__WEBPACK_IMPORTED_MODULE_5___default()(styles$2.inlineToolbarDropdownButton,theme&&theme.inlineToolbarDropdownButton),inlineToolbarButton_icon:classnames__WEBPACK_IMPORTED_MODULE_5___default()(styles$2.inlineToolbarDropdownButton_icon,theme&&theme.inlineToolbarDropdownButton_icon),inlineToolbarButton_active:classnames__WEBPACK_IMPORTED_MODULE_5___default()(styles$2.inlineToolbarButton_active,theme&&theme.inlineToolbarDropdownButton_active)}}),_this.styles=Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["mergeStyles"])({styles:styles$2,theme:_this.theme}),_this}inheritsLoose(TextDropdownButton,_PureComponent);var _proto=TextDropdownButton.prototype;return _proto.componentWillReceiveProps=function(nextProps){!0===this.props.isVisible&&!1===nextProps.isVisible&&this.setState({isOpen:!1})},_proto.render=function(){var _this$state2=this.state,Icon=_this$state2.selected.Icon,isOpen=_this$state2.isOpen,_this$props3=this.props,isMobile=_this$props3.isMobile,tabIndex=_this$props3.tabIndex,tooltipText=(0,_this$props3.t)(tooltipTextKey),dataHookText="textDropDownButton_"+tooltipText.replace(/\s+/,"");return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* Tooltip */ "F"],{content:tooltipText,moveBy:{y:-20}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:this.styles.inlineToolbarDropdown_wrapper},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TextButton,{icon:Icon,theme:this.theme,isMobile:isMobile,dataHook:dataHookText,onClick:this.showOptions,tabIndex:tabIndex}),isOpen&&this.renderOptions()))},TextDropdownButton}(react__WEBPACK_IMPORTED_MODULE_1__["PureComponent"])}({buttons:[alignTextLeftButton(AlignLeft),alignTextCenterButton(AlignCenter),alignTextRightButton(AlignRight),alignTextJustifyButton(AlignJustify)],activeItem:function(_ref){var getEditorState=_ref.getEditorState,value=_ref.value,defaultValue=_ref.defaultValue,alignment=value||Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getTextAlignment */ "V"])(getEditorState(),defaultValue);return{alignment:alignment,Icon:activeIcon(alignment,icons)}},onChange:function(getEditorState,setEditorState,textAlignment){setEditorState(Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* setTextAlignment */ "ib"])(getEditorState(),textAlignment))},tooltipTextKey:"AlignTextDropdownButton_Tooltip"})},AddPluginButton=function(_Component){function AddPluginButton(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).handleClick=function(){return _this.openAddPluginModal()},_this.openAddPluginModal=function(){var _this$props=_this.props,getEditorState=_this$props.getEditorState,setEditorState=_this$props.setEditorState,structure=_this$props.structure,pubsub=_this$props.pubsub,theme=_this$props.theme,t=_this$props.t,isMobile=_this$props.isMobile,addPluginMenuConfig=_this$props.addPluginMenuConfig;_this.props.openModal({modalName:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorModals */ "m"].MOBILE_ADD_PLUGIN,modalStyles:Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getModalStyles */ "S"])({fullScreen:!1,isMobile:!0,stickyButtomMobile:!0}),structure:structure.map((function(_ref){var component=_ref.component,_ref$buttonSettings=_ref.buttonSettings;return{component:component,name:_ref$buttonSettings.name,section:_ref$buttonSettings.section||"BlockToolbar_Section_Basic"}})),theme:theme,hidePopup:_this.props.closeModal,getEditorState:getEditorState,setEditorState:setEditorState,pubsub:pubsub,t:t,isMobile:isMobile,addPluginMenuConfig:addPluginMenuConfig})},_this}return inheritsLoose(AddPluginButton,_Component),AddPluginButton.prototype.render=function(){var theme=this.props.theme;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TextButton,{icon:PlusIcon,theme:theme,dataHook:"addPluginButton",onClick:this.handleClick})},AddPluginButton}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),DesktopTextButtonList=[[],["Bold","Italic","Underline","Title","Blockquote"],["Alignment","OrderedList","UnorderedList"]],MobileTextButtonList=[[],["AddPlugin","Bold","Italic","Underline","Title","Blockquote","AlignLeft","AlignCenter","AlignRight","AlignJustify","OrderedList","UnorderedList"]],getTextButtonsFromList=function(_ref){var _config$getToolbarSet,_customSettings$getIc,inactiveIconTitle,iconForTitleOne,iconForTitleTwo,icon,buttons=_ref.buttons,theme=_ref.theme,t=_ref.t,isMobile=_ref.isMobile,_ref$textPluginButton=_ref.textPluginButtons,textPluginButtons=void 0===_ref$textPluginButton?{}:_ref$textPluginButton,uiSettings=_ref.uiSettings,config=_ref.config,themedSeparator=function(horizontal){return function(_ref){var _ref$theme=_ref.theme,_ref$horizontal=_ref.horizontal,separatorProps={name:"Separator",horizontal:void 0!==_ref$horizontal&&_ref$horizontal},separatorStyles=(void 0===_ref$theme?{}:_ref$theme).separatorStyles;return separatorStyles&&separatorStyles.inlineToolbarSeparator&&(separatorProps.className=separatorStyles.inlineToolbarSeparator),separatorStyles&&separatorStyles.separator&&(separatorProps.className=separatorStyles.separator),Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* decorateComponentWithProps */ "K"])(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* Separator */ "y"],separatorProps)}({theme:theme,horizontal:horizontal})},customSettings=null==config||null===(_config$getToolbarSet=config.getToolbarSettings)||void 0===_config$getToolbarSet?void 0:_config$getToolbarSet.call(config,{}).find((function(setting){return setting.name===wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].TEXT})),icons=(null==customSettings||null===(_customSettings$getIc=customSettings.getIcons)||void 0===_customSettings$getIc?void 0:_customSettings$getIc.call(customSettings))||{},buttonByName={Bold:(icon=icons.Bold,createTextInlineStyleButton({style:"BOLD",Icon:icon||BoldIcon,tooltipTextKey:"BoldButton_Tooltip"})),Italic:italicButton(icons.Italic),Underline:underlineButton(icons.Underline),Title:(inactiveIconTitle=icons.inactiveIconTitle,iconForTitleOne=icons.TitleOne,iconForTitleTwo=icons.TitleTwo,createTextBlockStyleButton({blockTypes:[wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["HEADER_BLOCK"].TWO,wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["HEADER_BLOCK"].THREE],Icons:[iconForTitleOne||TitleOneIcon,iconForTitleTwo||TitleTwoIcon],InactiveIcon:inactiveIconTitle||TitleIcon,tooltipTextKey:"TitleButton_Tooltip"})),Blockquote:blockquoteButton(icons.Blockquote),Alignment:textAlignmentButton(icons),AlignLeft:alignTextLeftButton(icons.AlignLeft),AlignCenter:alignTextCenterButton(icons.AlignCenter),AlignRight:alignTextRightButton(icons.AlignRight),AlignJustify:alignTextJustifyButton(icons.AlignJustify),OrderedList:orderedListButton(icons.OrderedList),UnorderedList:unorderedListButton(icons.UnorderedList),Separator:themedSeparator(!1),HorizontalSeparator:themedSeparator(!0)},buttonMap=_extends_1(_extends_1({},buttonByName),textPluginButtons);return buttons.map((function(buttonName){return buttonMap[buttonName]})).filter((function(b){return void 0!==b})).map((function(b){return Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* decorateComponentWithProps */ "K"])(b,{t:t,isMobile:isMobile,uiSettings:uiSettings,config:config})}))},reducePluginTextButtons=function(pluginTextButtons,filterButtons){return void 0===filterButtons&&(filterButtons=function(){return!0}),pluginTextButtons.reduce((function(buttons,buttonData,i){if(buttonData){var buttonSet=Object.keys(buttonData).reduce((function(singlePluginButtons,key){var _extends2;return filterButtons(buttonData[key])?_extends_1(_extends_1({},singlePluginButtons),{},((_extends2={})[key+"_"+i]=buttonData[key].component,_extends2)):singlePluginButtons}),{});return _extends_1(_extends_1({},buttons),buttonSet)}return buttons}),{})},reducePluginTextButtonNames=function(pluginTextButtons,filterButtons){return void 0===filterButtons&&(filterButtons=function(){return!0}),pluginTextButtons.reduce((function(buttonNames,buttonData,i){if(buttonData){var singlePluginButtonNames=Object.keys(buttonData).reduce((function(names,key){return filterButtons(buttonData[key])?[].concat(names,[{name:key+"_"+i,position:buttonData[key].position,group:buttonData[key].group}]):names}),[]);return[].concat(buttonNames,singlePluginButtonNames)}return buttonNames}),[])},separatorButton={buttonName:"Separator"},shouldCreateNewGroup=function(groups,groupIndex){return!groups[groupIndex]},compareButtons=function(a,b){return a.position-b.position},addButton=function(buttonName,position,groupIndex,groups){for(;shouldCreateNewGroup(groups,groupIndex);)groups.push([]);groups[groupIndex].push({buttonName:buttonName,position:position,groupIndex:groupIndex})},mergeButtonLists=function(defaultButtons,pluginButtons,formFactor){void 0===formFactor&&(formFactor="desktop");var groups=function(defaultButtons,pluginButtons,formFactor){var groups=[];return defaultButtons.forEach((function(group,groupIndex){group.forEach((function(buttonName,position){addButton(buttonName,position,groupIndex,groups)}))})),pluginButtons.forEach((function(buttonData){var _buttonData$group$for,_buttonData$group,_buttonData$position$,_buttonData$position,groupIndex=null!=(_buttonData$group$for=null===(_buttonData$group=buttonData.group)||void 0===_buttonData$group?void 0:_buttonData$group[formFactor])?_buttonData$group$for:defaultButtons.length,position=null!=(_buttonData$position$=null===(_buttonData$position=buttonData.position)||void 0===_buttonData$position?void 0:_buttonData$position[formFactor])?_buttonData$position$:100;addButton(buttonData.name,position,groupIndex,groups)})),groups}(defaultButtons,pluginButtons,formFactor);groups.forEach((function(group){return group.sort(compareButtons)})),"desktop"===formFactor&&function(groups){groups.forEach((function(group,i){0!==group.length&&i!==groups.length-1&&group.push(separatorButton)}))}(groups);var mergedList=[];return groups.forEach((function(group){group.forEach((function(button){mergedList=[].concat(mergedList,[button.buttonName])}))})),mergedList},getStaticTextToolbarId=function(refId){return"static_text_toolbar_"+refId},toolbarStyles={textToolbar:"_30_nC",textToolbar_scrollableContainer:"Bvr-H"},createStaticTextToolbar=function(_ref2){var buttons=_ref2.buttons,textPluginButtons=_ref2.textPluginButtons,pubsub=_ref2.pubsub,theme=_ref2.theme,isMobile=_ref2.isMobile,helpers=_ref2.helpers,anchorTarget=_ref2.anchorTarget,relValue=_ref2.relValue,t=_ref2.t,refId=_ref2.refId,offset=_ref2.offset,visibilityFn=_ref2.visibilityFn,displayOptions=_ref2.displayOptions,uiSettings=_ref2.uiSettings,toolbarDecorationFn=_ref2.toolbarDecorationFn,config=_ref2.config,locale=_ref2.locale,setEditorState=_ref2.setEditorState,staticTextTheme=function(theme){var _ref=theme||{},toolbarTheme=_ref.toolbarStyles,buttonTheme=_ref.buttonStyles,separatorTheme=_ref.separatorStyles,rest=objectWithoutPropertiesLoose(_ref,["toolbarStyles","buttonStyles","separatorStyles"]);return _extends_1({toolbarStyles:{toolbar:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles.textToolbar,toolbarTheme&&toolbarTheme.textToolbar),scrollableContainer:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles.textToolbar_scrollableContainer,toolbarTheme&&toolbarTheme.textToolbar_scrollableContainer),buttons:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles.textToolbar_buttons,toolbarTheme&&toolbarTheme.textToolbar_buttons),extend:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles.textToolbar_extend,toolbarTheme&&toolbarTheme.textToolbar_extend),responsiveSpacer:toolbarStyles.textToolbar_responsiveSpacer,responsiveArrow:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles.textToolbar_responsiveArrow,toolbarTheme&&toolbarTheme.textToolbar_responsiveArrow),responsiveArrowStart:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles.textToolbar_responsiveArrowStart,toolbarTheme&&toolbarTheme.textToolbar_responsiveArrowStart),responsiveArrowEnd:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles.textToolbar_responsiveArrowEnd,toolbarTheme&&toolbarTheme.textToolbar_responsiveArrowEnd),responsiveArrowStart_icon:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles.textToolbar_responsiveArrowStart_icon,toolbarTheme&&toolbarTheme.textToolbar_responsiveArrowStart_icon),responsiveArrowEnd_icon:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles.textToolbar_responsiveArrowEnd_icon,toolbarTheme&&toolbarTheme.textToolbar_responsiveArrowEnd_icon)},buttonStyles:{inlineToolbarButton_wrapper:buttonTheme&&buttonTheme.textToolbarButton_wrapper,inlineToolbarButton:buttonTheme&&buttonTheme.textToolbarButton,inlineToolbarButton_icon:buttonTheme&&buttonTheme.textToolbarButton_icon},separatorStyles:{separator:classnames__WEBPACK_IMPORTED_MODULE_5___default()("J-smu",separatorTheme&&separatorTheme.textToolbarSeparator)}},rest)}(theme),structure=getTextButtonsFromList({buttons:buttons,textPluginButtons:textPluginButtons,pubsub:pubsub,theme:staticTextTheme,t:t,uiSettings:uiSettings,config:config,isMobile:isMobile}),id=getStaticTextToolbarId(refId);return createStaticToolbar({name:"StaticTextToolbar",structure:structure,pubsub:pubsub,theme:staticTextTheme,isMobile:isMobile,helpers:helpers,linkModal:!0,anchorTarget:anchorTarget,relValue:relValue,t:t,id:id,offset:offset,visibilityFn:visibilityFn,displayOptions:displayOptions,uiSettings:uiSettings,toolbarDecorationFn:toolbarDecorationFn,renderTooltips:!0,locale:locale,setEditorState:setEditorState,config:config})},toolbarStyles$1={mobileToolbar:"_2jHVo"},buttonStyles={mobileToolbarButton_wrapper:"h9v9v",mobileToolbarButton:"_1CJem",mobileToolbarButton_icon:"_3Xm-h"},separatorStyles$1={mobileToolbarSeparator:"_35q1X"},createMobileToolbar=function(_ref){var buttons=_ref.buttons,textPluginButtons=_ref.textPluginButtons,pluginButtons=_ref.pluginButtons,helpers=_ref.helpers,pubsub=_ref.pubsub,getEditorState=_ref.getEditorState,setEditorState=_ref.setEditorState,anchorTarget=_ref.anchorTarget,relValue=_ref.relValue,theme=_ref.theme,t=_ref.t,offset=_ref.offset,visibilityFn=_ref.visibilityFn,uiSettings=_ref.uiSettings,displayOptions=_ref.displayOptions,toolbarDecorationFn=_ref.toolbarDecorationFn,config=_ref.config,locale=_ref.locale,addPluginMenuConfig=_ref.addPluginMenuConfig,mobileTheme=getMobileTheme(theme);return createStaticToolbar({helpers:helpers,t:t,name:"MobileToolbar",theme:mobileTheme,structure:getMobileButtons({buttons:buttons,textPluginButtons:textPluginButtons,pluginButtons:pluginButtons,helpers:helpers,pubsub:pubsub,getEditorState:getEditorState,setEditorState:setEditorState,mobileTheme:mobileTheme,t:t,uiSettings:uiSettings,config:config,addPluginMenuConfig:addPluginMenuConfig}),anchorTarget:anchorTarget,relValue:relValue,isMobile:!0,offset:offset,visibilityFn:visibilityFn,uiSettings:uiSettings,displayOptions:displayOptions,toolbarDecorationFn:toolbarDecorationFn,locale:locale})},getMobileTheme=function(theme){var _ref2=theme||{},toolbarTheme=_ref2.toolbarStyles,buttonTheme=_ref2.buttonStyles,separatorTheme=_ref2.separatorStyles,rest=objectWithoutPropertiesLoose(_ref2,["toolbarStyles","buttonStyles","separatorStyles"]),toolbarMergeStyles=Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["mergeStyles"])({styles:toolbarStyles$1,theme:toolbarTheme}),buttonMergeStyles=Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["mergeStyles"])({styles:buttonStyles,theme:buttonTheme}),separatorMergeStyles=Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["mergeStyles"])({styles:separatorStyles$1,theme:separatorTheme});return _extends_1({toolbarStyles:{toolbar:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarMergeStyles.mobileToolbar,toolbarMergeStyles.mobileToolbar_fixed),scrollableContainer:toolbarMergeStyles.mobileToolbar_scrollableContainer,buttons:toolbarMergeStyles.mobileToolbar_buttons,extend:toolbarMergeStyles.mobileToolbar_extend,responsiveSpacer:toolbarMergeStyles.mobileToolbar_responsiveSpacer,responsiveArrow:toolbarMergeStyles.mobileToolbar_responsiveArrow,responsiveArrowStart:toolbarMergeStyles.mobileToolbar_responsiveArrowStart,responsiveArrowEnd:toolbarMergeStyles.mobileToolbar_responsiveArrowEnd,responsiveArrowStart_icon:toolbarMergeStyles.mobileToolbar_responsiveArrowStart_icon,responsiveArrowEnd_icon:toolbarMergeStyles.mobileToolbar_responsiveArrowEnd_icon},buttonStyles:{inlineToolbarButton_wrapper:buttonMergeStyles.mobileToolbarButton_wrapper,inlineToolbarButton:buttonMergeStyles.mobileToolbarButton,inlineToolbarButton_icon:buttonMergeStyles.mobileToolbarButton_icon},separatorStyles:{separator:separatorMergeStyles.mobileToolbarSeparator}},rest)},getMobileButtons=function(_ref3){var buttons=_ref3.buttons,textPluginButtons=_ref3.textPluginButtons,pluginButtons=_ref3.pluginButtons,helpers=_ref3.helpers,pubsub=_ref3.pubsub,getEditorState=_ref3.getEditorState,setEditorState=_ref3.setEditorState,mobileTheme=_ref3.mobileTheme,t=_ref3.t,uiSettings=_ref3.uiSettings,config=_ref3.config,addPluginMenuConfig=_ref3.addPluginMenuConfig,addPluginIndex=buttons.findIndex((function(b){return"AddPlugin"===b}));-1!==addPluginIndex&&buttons.splice(addPluginIndex,1);var structure=getTextButtonsFromList({buttons:buttons,textPluginButtons:textPluginButtons,theme:mobileTheme,isMobile:!0,t:t,uiSettings:uiSettings,config:config});return-1!==addPluginIndex&&pluginButtons&&pluginButtons.length&&structure.splice(addPluginIndex,0,Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* decorateComponentWithProps */ "K"])(AddPluginButton,{openModal:helpers.openModal,closeModal:helpers.closeModal,structure:pluginButtons.filter((function(_ref4){var buttonSettings=_ref4.buttonSettings;return"UndoPlugin_InsertButton"!==buttonSettings.name&&"RedoPlugin_InsertButton"!==buttonSettings.name})),getEditorState:getEditorState,setEditorState:setEditorState,pubsub:pubsub,t:t,theme:mobileTheme,addPluginMenuConfig:addPluginMenuConfig})),structure},toolbarStyles$2={footerToolbar:"tfFfS",footerToolbar_buttons:"_2E527",footerToolbar_scrollableContainer:"_18O3S"},createFooterToolbar=function(_ref2){var buttons=_ref2.buttons,theme=_ref2.theme,offset=_ref2.offset,visibilityFn=_ref2.visibilityFn,displayOptions=_ref2.displayOptions,toolbarDecorationFn=_ref2.toolbarDecorationFn,footerTheme=function(theme){var _ref=theme||{},toolbarTheme=_ref.toolbarStyles,buttonStyles=_ref.buttonStyles,separatorTheme=_ref.separatorStyles,rest=objectWithoutPropertiesLoose(_ref,["toolbarStyles","buttonStyles","separatorStyles"]);return _extends_1({toolbarStyles:{toolbar:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles$2.footerToolbar,toolbarTheme&&toolbarTheme.footerToolbar),staticToolbar:theme.staticToolbar,scrollableContainer:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles$2.footerToolbar_scrollableContainer,toolbarTheme&&toolbarTheme.footerToolbar_scrollableContainer),buttons:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles$2.footerToolbar_buttons,toolbarTheme&&toolbarTheme.footerToolbar_buttons),extend:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles$2.footerToolbar_extend,toolbarTheme&&toolbarTheme.footerToolbar_extend),responsiveArrow:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles$2.footerToolbar_responsiveArrow,toolbarTheme&&toolbarTheme.footerToolbar_responsiveArrow),responsiveArrowStart:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles$2.footerToolbar_responsiveArrowStart,toolbarTheme&&toolbarTheme.footerToolbar_responsiveArrowStart),responsiveArrowEnd:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles$2.footerToolbar_responsiveArrowEnd,toolbarTheme&&toolbarTheme.footerToolbar_responsiveArrowEnd),responsiveArrowStart_icon:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles$2.footerToolbar_responsiveArrowStart_icon,toolbarTheme&&toolbarTheme.footerToolbar_responsiveArrowStart_icon),responsiveArrowEnd_icon:classnames__WEBPACK_IMPORTED_MODULE_5___default()(toolbarStyles$2.footerToolbar_responsiveArrowEnd_icon,toolbarTheme&&toolbarTheme.footerToolbar_responsiveArrowEnd_icon)},buttonStyles:{buttonWrapper:buttonStyles&&buttonStyles.footerToolbarButton_wrapper,button:buttonStyles&&buttonStyles.footerToolbarButton,icon:buttonStyles&&buttonStyles.footerToolbarButton_icon},separatorStyles:{separator:separatorTheme&&separatorTheme.footerToolbarSeparator}},rest)}(theme);return createStaticToolbar({name:"FooterToolbar",theme:footerTheme,structure:buttons,offset:offset,visibilityFn:visibilityFn,displayOptions:displayOptions,toolbarDecorationFn:toolbarDecorationFn})},Styles$4=_extends_1(_extends_1({},{inlineToolbar:"_3gNw0",inlineToolbar_buttons:"XRwO7",inlineToolbar_overrideContent:"_2FzZ3",inlineToolbar_scrollableContainer:"kNBS9",mobile:"_1rx-k",inlineToolbar_extend:"IkLgS",inlineToolbar_responsiveSpacer:"vPypx",inlineToolbar_responsiveArrow:"_1T4Oc"}),{inlineToolbar_responsiveArrow:"_3GHWr",inlineToolbar_responsiveArrowStart_icon:"_2HUZx",inlineToolbar_responsiveArrowEnd_icon:"_3Tew2"}),displayOptionStyles$1=((_displayOptionStyles$1={})[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL]={},_displayOptionStyles$1[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].FLOATING]={position:"absolute"},_displayOptionStyles$1),InlineToolbar=function(_Component){function InlineToolbar(props){var _this;(_this=_Component.call(this,props)||this).onOverrideContent=function(overrideContent){_this.setState({overrideContent:overrideContent})},_this.onExtendContent=function(extendContent){return _this.setState({extendContent:extendContent})},_this.setKeepOpen=function(keepOpen){return _this.setState({keepOpen:keepOpen})},_this.onClickOutside=function(){(_this.state.overrideContent||_this.state.extendContent)&&_this.setState({overrideContent:null,extendContent:null})},_this.onSelectionChanged=Object(lodash__WEBPACK_IMPORTED_MODULE_2__["debounce"])((function(){if(_this.setState({isVisible:_this.shouldBeVisible()}),_this.toolbar&&!_this.state.overrideContent&&!_this.state.extendContent&&_this.props.displayOptions.displayMode===wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL&&!_this.state.keepOpen){var _this$getRelativePosi=_this.getRelativePosition(),top=_this$getRelativePosi.top,left=_this$getRelativePosi.left;_this.setState({position:{"--offset-top":top+"px","--offset-left":left+"px"}})}}),40),_this.getTabIndexByVisibility=function(){return _this.isVisible()?0:-1},_this.shouldBeVisible=function(){var _this$props=_this.props,pubsub=_this$props.pubsub,visibilityFn=_this$props.visibilityFn,_this$state=_this.state,overrideContent=_this$state.overrideContent,extendContent=_this$state.extendContent,keepOpen=_this$state.keepOpen,isVisible=!1;return visibilityFn&&(isVisible=visibilityFn(pubsub.get("getEditorState")())),isVisible||overrideContent||extendContent||keepOpen},_this.isVisible=function(){return _this.state.isVisible},_this.handleToolbarRef=function(node){_this.toolbar=node},_this.setToolbarScrollButton=function(scrollLeft,scrollWidth,clientWidth){if(!_this.props.isMobile){var isScroll=scrollWidth-clientWidth-(_this.state.showLeftArrow||_this.state.showRightArrow?20:0)>8;_this.setState({showLeftArrow:isScroll&&scrollLeft===scrollWidth-clientWidth,showRightArrow:isScroll&&scrollLeft<scrollWidth-clientWidth})}};var position,offset=props.offset;return props.displayOptions.displayMode===wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].FLOATING&&(position={"--offset-top":offset.y+"px","--offset-left":offset.x+"px"}),_this.state={position:position,overrideContent:void 0,extendContent:void 0,showRightArrow:!1,showLeftArrow:!1},_this.ToolbarDecoration=props.toolbarDecorationFn(),_this}inheritsLoose(InlineToolbar,_Component);var _proto=InlineToolbar.prototype;return _proto.componentWillMount=function(){this.props.pubsub.subscribe("selection",this.onSelectionChanged)},_proto.componentWillUnmount=function(){this.props.pubsub.unsubscribe("selection",this.onSelectionChanged)},_proto.getRelativePosition=function(){var top,relativeParent=function getRelativeParent(element){return element?"static"!==window.getComputedStyle(element).getPropertyValue("position")?element:getRelativeParent(element.parentElement):null}(this.toolbar.parentElement),halfToolbarWidth=this.toolbar.clientWidth/2,toolbarHeight=this.toolbar.clientHeight,toolbarParentRect=(relativeParent||document.body).getBoundingClientRect(),selectionRect=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getVisibleSelectionRect */ "X"])(window);if(!selectionRect)return{top:0,left:0};top=this.props.isMobile?selectionRect.bottom-toolbarParentRect.top+5:selectionRect.top-toolbarParentRect.top-toolbarHeight-5;var left=selectionRect.left-toolbarParentRect.left+selectionRect.width/2-halfToolbarWidth;return selectionRect.left-toolbarParentRect.left<halfToolbarWidth?left=0:left+this.toolbar.clientWidth>toolbarParentRect.width&&(left=toolbarParentRect.width-this.toolbar.clientWidth),{top:top+=this.props.offset.y,left:left+=this.props.offset.x}},_proto.getStyle=function(){var displayOptions=this.props.displayOptions,position=this.state.position,defaultDispayStyles={visibility:this.isVisible()?"visible":"hidden",transform:this.isVisible()?"scale(1)":"scale(0)"};return _extends_1(_extends_1(_extends_1({},position),defaultDispayStyles),displayOptionStyles$1[displayOptions.displayMode])},_proto.scrollToolbar=function(event,leftDirection){event.preventDefault();var _this$scrollContainer=this.scrollContainer,clientWidth=_this$scrollContainer.clientWidth,scrollWidth=_this$scrollContainer.scrollWidth;this.scrollContainer.scrollLeft=leftDirection?0:Math.min(this.scrollContainer.scrollLeft+clientWidth,scrollWidth)},_proto.renderToolbarContent=function(){var _classNames,_classNames2,_this2=this,_this$props2=this.props,theme=_this$props2.theme,pubsub=_this$props2.pubsub,structure=_this$props2.structure,defaultTextAlignment=_this$props2.defaultTextAlignment,helpers=_this$props2.helpers,isMobile=_this$props2.isMobile,anchorTarget=_this$props2.anchorTarget,relValue=_this$props2.relValue,t=_this$props2.t,locale=_this$props2.locale,_this$state2=this.state,showLeftArrow=_this$state2.showLeftArrow,showRightArrow=_this$state2.showRightArrow,OverrideContent=_this$state2.overrideContent,ExtendContent=_this$state2.extendContent,tabIndex=this.isVisible()?0:-1,toolbarStyle=this.getStyle(),hasArrow=showLeftArrow||showRightArrow,toolbarStyles=(theme||{}).toolbarStyles,buttonClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()(Styles$4.inlineToolbar_buttons,toolbarStyles&&toolbarStyles.inlineToolbar_buttons,((_classNames={})[Styles$4.inlineToolbar_overrideContent]=!!OverrideContent,_classNames[toolbarStyles.inlineToolbar_overrideContent]=!!OverrideContent,_classNames)),extendClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()(Styles$4.inlineToolbar_extend,toolbarStyles&&toolbarStyles.inlineToolbar_extend),scrollableClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()(Styles$4.inlineToolbar_scrollableContainer,toolbarStyles&&toolbarStyles.inlineToolbar_scrollableContainer,((_classNames2={})[Styles$4.mobile]=isMobile,_classNames2)),arrowClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()(Styles$4.inlineToolbar_responsiveArrow,toolbarStyles.inlineToolbar_responsiveArrow),leftArrowIconClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()(Styles$4.inlineToolbar_responsiveArrowStart_icon,toolbarStyles.responsiveArrowStart_icon),rightArrowIconClassNames=classnames__WEBPACK_IMPORTED_MODULE_5___default()(Styles$4.inlineToolbar_responsiveArrowEnd_icon,toolbarStyles.responsiveArrowEnd_icon),childrenProps={theme:theme,getEditorState:pubsub.get("getEditorState"),setEditorState:pubsub.get("setEditorState"),onOverrideContent:this.onOverrideContent,onExtendContent:this.onExtendContent,setKeepOpen:this.setKeepOpen,defaultTextAlignment:defaultTextAlignment,isVisible:"visible"===toolbarStyle.visibility,isMobile:isMobile,helpers:helpers,anchorTarget:anchorTarget,relValue:relValue,t:t,tabIndex:tabIndex};return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ClickOutside,{onClickOutside:this.onClickOutside},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:buttonClassNames,dir:Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["getLangDir"])(locale)},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_measure__WEBPACK_IMPORTED_MODULE_9__[/* default */ "a"],{client:!0,scroll:!0,innerRef:function(ref){return _this2.scrollContainer=ref},onResize:function(_ref2){var scroll=_ref2.scroll,client=_ref2.client;return _this2.setToolbarScrollButton(scroll.left,scroll.width,client.width)}},(function(_ref3){var measure=_ref3.measure,measureRef=_ref3.measureRef;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:scrollableClassNames,ref:measureRef,onScroll:function(){return measure()}},OverrideContent?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(OverrideContent,childrenProps):structure.map((function(Button,index){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Button,_extends_1({key:index},childrenProps))})))})),hasArrow&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{tabIndex:tabIndex,className:arrowClassNames,"data-hook":"inlineToolbarRightArrow",onMouseDown:function(e){return _this2.scrollToolbar(e,showLeftArrow)}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i",{className:showLeftArrow?leftArrowIconClassNames:rightArrowIconClassNames}))),ExtendContent&&react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:extendClassNames},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ExtendContent,childrenProps)))},_proto.render=function(){if(!1===this.isVisible())return null;var toolbarStyles=(this.props.theme||{}).toolbarStyles,props={className:classnames__WEBPACK_IMPORTED_MODULE_5___default()(Styles$4.inlineToolbar,toolbarStyles&&toolbarStyles.inlineToolbar),style:this.getStyle(),tabIndex:this.isVisible()?0:-1,role:"toolbar","aria-orientation":"horizontal","data-hook":"inlineToolbar"};if(this.ToolbarDecoration){var ToolbarDecoration=this.ToolbarDecoration;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ToolbarDecoration,_extends_1({refCallback:this.handleToolbarRef},props),this.renderToolbarContent())}return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",_extends_1({ref:this.handleToolbarRef},props),this.renderToolbarContent())},InlineToolbar}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]);InlineToolbar.defaultProps={displayOptions:{displayMode:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL},offset:{x:0,y:0},toolbarDecorationFn:function(){return null}};var createInlineTextToolbar=function(data){var buttons=data.buttons,textPluginButtons=data.textPluginButtons,defaultTextAlignment=data.defaultTextAlignment,pubsub=data.pubsub,theme=data.theme,isMobile=data.isMobile,helpers=data.helpers,anchorTarget=data.anchorTarget,relValue=data.relValue,t=data.t,offset=data.offset,visibilityFn=data.visibilityFn,displayOptions=data.displayOptions,uiSettings=data.uiSettings,toolbarDecorationFn=data.toolbarDecorationFn,config=data.config,locale=data.locale;return function(config){void 0===config&&(config={});var _config=config,_config$name=_config.name,name=void 0===_config$name?"InlineToolbar":_config$name,_config$pubsub=_config.pubsub,pubsub=void 0===_config$pubsub?Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* simplePubsub */ "jb"])():_config$pubsub,defaultTextAlignment=_config.defaultTextAlignment,theme=_config.theme,_config$structure=_config.structure,structure=void 0===_config$structure?[]:_config$structure,_config$isMobile=_config.isMobile,isMobile=void 0!==_config$isMobile&&_config$isMobile,helpers=_config.helpers,anchorTarget=_config.anchorTarget,relValue=_config.relValue,t=_config.t,offset=_config.offset,visibilityFn=_config.visibilityFn,displayOptions=_config.displayOptions,toolbarDecorationFn=_config.toolbarDecorationFn,locale=_config.locale;return{name:name,initialize:function(_ref){var getEditorState=_ref.getEditorState,setEditorState=_ref.setEditorState;pubsub.set("getEditorState",getEditorState),pubsub.set("setEditorState",setEditorState)},onChange:function(editorState){return pubsub.set("selection",editorState.getSelection()),editorState},InlineToolbar:Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* decorateComponentWithProps */ "K"])(InlineToolbar,{pubsub:pubsub,structure:structure,defaultTextAlignment:defaultTextAlignment,theme:theme,isMobile:isMobile,helpers:helpers,anchorTarget:anchorTarget,relValue:relValue,t:t,offset:offset,visibilityFn:visibilityFn,displayOptions:displayOptions,toolbarDecorationFn:toolbarDecorationFn,locale:locale})}}({name:"InlineTextToolbar",structure:getTextButtonsFromList({buttons:buttons,textPluginButtons:textPluginButtons,pubsub:pubsub,theme:theme,t:t,uiSettings:uiSettings,config:config,isMobile:isMobile}),defaultTextAlignment:defaultTextAlignment,pubsub:pubsub,theme:theme,isMobile:isMobile,helpers:helpers,anchorTarget:anchorTarget,relValue:relValue,t:t,offset:offset,visibilityFn:visibilityFn,displayOptions:displayOptions,uiSettings:uiSettings,toolbarDecorationFn:toolbarDecorationFn,locale:locale})},defaultInlineToolbarVisibilityFn=function(editorState){var selection=editorState.getSelection();return!selection.isCollapsed()&&selection.getHasFocus()},defaultSideToolbarVisibilityFn=function(editorState){var selection=editorState.getSelection(),type=editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType();return"atomic"!==type&&"code-block"!==type},defaultDisplayOptions={desktop:{displayMode:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL},mobile:{ios:{displayMode:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL},android:{displayMode:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL}}},defaultToolbarDecorationFn={desktop:function(){return null},mobile:{ios:function(){return null},android:function(){return null}}},defaultOffset={desktop:{x:0,y:0},mobile:{ios:{x:0,y:0},android:{x:0,y:0}}},defaultTextPluginButtons={desktop:{},mobile:{ios:{},android:{}}},DraftOffsetKey_1_encode=function(blockKey,decoratorKey,leafKey){return blockKey+"-"+decoratorKey+"-"+leafKey};function toVal(mix){var k,y,str="";if(mix)if("object"==typeof mix)if(Array.isArray(mix))for(k=0;k<mix.length;k++)mix[k]&&(y=toVal(mix[k]))&&(str&&(str+=" "),str+=y);else for(k in mix)mix[k]&&(y=toVal(k))&&(str&&(str+=" "),str+=y);else"boolean"==typeof mix||mix.call||(str&&(str+=" "),str+=mix);return str}function insertNewLine(editorState){var contentState,selectionState,newBlock,targetKey,array,withNewLine=(contentState=editorState.getCurrentContent(),selectionState=editorState.getSelection(),newBlock=new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["ContentBlock"]({key:Object(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["genKey"])(),type:"unstyled",text:"",characterList:immutable_1()}),targetKey=selectionState.getStartKey(),array=[],contentState.getBlockMap().forEach((function(block,blockKey){array.push(block),blockKey===targetKey&&array.push(newBlock)})),contentState.merge({blockMap:_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["BlockMapBuilder"].createFromArray(array),selectionBefore:selectionState,selectionAfter:selectionState.merge({anchorKey:newBlock.getKey(),anchorOffset:newBlock.getLength(),focusKey:newBlock.getKey(),focusOffset:newBlock.getLength(),isBackward:!1})})),newContent=withNewLine.merge({selectionAfter:withNewLine.getSelectionAfter().set("hasFocus",!0)});return _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].push(editorState,newContent,"insert-fragment")}var setSelection=function(getEditorState,setEditorState,mode,event){var editorState=getEditorState(),selectionKey=editorState.getSelection().getAnchorKey(),newActiveBlock="up"===mode?editorState.getCurrentContent().getBlockBefore(selectionKey):editorState.getCurrentContent().getBlockAfter(selectionKey);if((!newActiveBlock||newActiveBlock.get("key")!==selectionKey)&&newActiveBlock){var offsetKey=DraftOffsetKey_1_encode(newActiveBlock.getKey(),0,0),node=document.querySelectorAll('[data-offset-key="'.concat(offsetKey,'"]'))[0],selection=window.getSelection(),range=document.createRange();range.setStart(node,0),range.setEnd(node,0),selection.removeAllRanges(),selection.addRange(range);var offset="up"===mode?newActiveBlock.getLength():0;event.preventDefault(),setEditorState(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].forceSelection(editorState,new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["SelectionState"]({anchorKey:newActiveBlock.getKey(),anchorOffset:offset,focusKey:newActiveBlock.getKey(),focusOffset:offset,isBackward:!1})))}},setSelectionToBlock=function(getEditorState,setEditorState,newActiveBlock){var editorState=getEditorState(),offsetKey=DraftOffsetKey_1_encode(newActiveBlock.getKey(),0,0),node=document.querySelectorAll('[data-offset-key="'.concat(offsetKey,'"]'))[0],selection=window.getSelection(),range=document.createRange();range.setStart(node,0),range.setEnd(node,0),selection.removeAllRanges(),selection.addRange(range),setEditorState(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].forceSelection(editorState,new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["SelectionState"]({anchorKey:newActiveBlock.getKey(),anchorOffset:0,focusKey:newActiveBlock.getKey(),focusOffset:0,isBackward:!1})))};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends$2(){return(_extends$2=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _possibleConstructorReturn(self,call){return!call||"object"!=typeof call&&"function"!=typeof call?_assertThisInitialized(self):call}var createDecorator=function(_ref){var theme=_ref.theme,blockKeyStore=_ref.blockKeyStore;return function(WrappedComponent){var _class,_temp;return _temp=_class=function(_Component){function BlockFocusDecorator(){var _getPrototypeOf2,_this;_classCallCheck(this,BlockFocusDecorator);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(_assertThisInitialized(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BlockFocusDecorator)).call.apply(_getPrototypeOf2,[this].concat(args)))),"onClick",(function(evt){evt.preventDefault(),_this.props.blockProps.isFocused||_this.props.blockProps.setFocusToBlock()})),_this}var protoProps;return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(BlockFocusDecorator,react__WEBPACK_IMPORTED_MODULE_1__["Component"]),(protoProps=[{key:"componentDidMount",value:function(){blockKeyStore.add(this.props.block.getKey())}},{key:"componentWillUnmount",value:function(){blockKeyStore.remove(this.props.block.getKey())}},{key:"render",value:function(){var _this$props=this.props,blockProps=_this$props.blockProps,combinedClassName=function(){for(var x,i=0,str="";i<arguments.length;)(x=toVal(arguments[i++]))&&(str&&(str+=" "),str+=x);return str}(_this$props.className,blockProps.isFocused?theme.focused:theme.unfocused);return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(WrappedComponent,_extends$2({},this.props,{onClick:this.onClick,className:combinedClassName}))}}])&&function(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}(BlockFocusDecorator.prototype,protoProps),BlockFocusDecorator}(),_defineProperty(_class,"displayName","BlockFocus(".concat(function(WrappedComponent){var component=WrappedComponent.WrappedComponent||WrappedComponent;return component.displayName||component.name||"Component"}(WrappedComponent),")")),_defineProperty(_class,"WrappedComponent",WrappedComponent.WrappedComponent||WrappedComponent),_temp}},createBlockKeyStore=function(){var keys=immutable_1();return{add:function(key){return keys=keys.push(key)},remove:function(key){return keys=keys.filter((function(item){return item!==key}))},includes:function(key){return keys.includes(key)},getAll:function(){return keys}}},getBlockMapKeys=function(contentState,startKey,endKey){return contentState.getBlockMap().keySeq().skipUntil((function(key){return key===startKey})).takeUntil((function(key){return key===endKey})).concat([endKey])},blockInSelection=function(editorState,blockKey){return function(editorState){var selectionState=editorState.getSelection(),contentState=editorState.getCurrentContent();return getBlockMapKeys(contentState,selectionState.getStartKey(),selectionState.getEndKey())}(editorState).includes(blockKey)};function removeBlock(editorState,blockKey){var content=editorState.getCurrentContent(),beforeKey=content.getKeyBefore(blockKey),beforeBlock=content.getBlockForKey(beforeKey);if(void 0===beforeBlock){var _targetRange=new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["SelectionState"]({anchorKey:blockKey,anchorOffset:0,focusKey:blockKey,focusOffset:1});content=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Modifier"].removeRange(content,_targetRange,"backward"),content=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Modifier"].setBlockType(content,_targetRange,"unstyled");var _newState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].push(editorState,content,"remove-block"),_newSelection=new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["SelectionState"]({anchorKey:blockKey,anchorOffset:0,focusKey:blockKey,focusOffset:0});return _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].forceSelection(_newState,_newSelection)}var targetRange=new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["SelectionState"]({anchorKey:beforeKey,anchorOffset:beforeBlock.getLength(),focusKey:blockKey,focusOffset:1});content=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Modifier"].removeRange(content,targetRange,"backward");var newState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].push(editorState,content,"remove-block"),newSelection=new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["SelectionState"]({anchorKey:beforeKey,anchorOffset:beforeBlock.getLength(),focusKey:beforeKey,focusOffset:beforeBlock.getLength()});return _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].forceSelection(newState,newSelection)}var defaultTheme={unfocused:"u1tbkpvz",focused:"flv743z"},focusableBlockIsSelected=function(editorState,blockKeyStore){var selection=editorState.getSelection();if(selection.getAnchorKey()!==selection.getFocusKey())return!1;var block=editorState.getCurrentContent().getBlockForKey(selection.getAnchorKey());return blockKeyStore.includes(block.getKey())},deleteCommands=["backspace","backspace-word","backspace-to-start-of-line","delete","delete-word","delete-to-end-of-block"],deafultStyles={resizeHandleR:"_3PaWO",resizeHandleL:"_2PdJ9"},round=function(x,steps){return Math.ceil(x/steps)*steps},createDecorator$1=function(_ref){var config=_ref.config,store=_ref.store;return function(WrappedComponent){var _class,_temp;return _temp=_class=function(_Component){function BlockResizeableDecorator(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).state={hoverPosition:{},clicked:!1},_this.updateEntityData=function(width,height){var _this$props$blockProp=_this.props.blockProps,setData=_this$props$blockProp.setData,data=(0,_this$props$blockProp.getData)();setData(_extends_1(_extends_1({},data),{},{config:_extends_1(_extends_1({},data.config),{},{width:width,height:height})}))},_this.mouseLeave=function(){_this.state.clicked||_this.setState({hoverPosition:{}})},_this.getDataConfig=function(){var _this$props$blockProp2;return(null===(_this$props$blockProp2=_this.props.blockProps.getData())||void 0===_this$props$blockProp2?void 0:_this$props$blockProp2.config)||{}},_this.mouseMove=function(evt){var _this$props=_this.props,vertical=_this$props.vertical,horizontal=_this$props.horizontal,_this$getDataConfig=_this.getDataConfig(),size=_this$getDataConfig.size,alignment=_this$getDataConfig.alignment,hoverPosition=_this.state.hoverPosition,b=react_dom__WEBPACK_IMPORTED_MODULE_13___default.a.findDOMNode(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12___default()(_this)).getBoundingClientRect(),x=evt.clientX-b.left,y=evt.clientY-b.top,isTop=!(!vertical||"auto"===vertical)&&y<6,isLeft=!!horizontal&&x<6,isRight=!!horizontal&&x>=b.width-6,isBottom=!(!vertical||"auto"===vertical)&&y>=b.height-6&&y<b.height,newHoverPosition={isTop:isTop,isLeft:isLeft=isLeft&&"left"!==alignment&&"fullWidth"!==size&&!config.isMobile,isRight:isRight=isRight&&"right"!==alignment&&"fullWidth"!==size&&!config.isMobile,isBottom:isBottom,canResize:isTop||isLeft||isRight||isBottom};Object.keys(newHoverPosition).filter((function(key){return hoverPosition[key]!==newHoverPosition[key]})).length&&_this.setState({hoverPosition:newHoverPosition})},_this.mouseDown=function(event){if(_this.state.hoverPosition.canResize){event.preventDefault();var _this$props2=_this.props,resizeSteps=_this$props2.resizeSteps,vertical=_this$props2.vertical,horizontal=_this$props2.horizontal,hoverPosition=_this.state.hoverPosition,isTop=hoverPosition.isTop,isLeft=hoverPosition.isLeft,isRight=hoverPosition.isRight,isBottom=hoverPosition.isBottom,pane=react_dom__WEBPACK_IMPORTED_MODULE_13___default.a.findDOMNode(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12___default()(_this)),startX=event.clientX,startY=event.clientY,startWidth=parseInt(document.defaultView.getComputedStyle(pane).width,10),startHeight=parseInt(document.defaultView.getComputedStyle(pane).height,10),doDrag=function(dragEvent){var width=startWidth+(isLeft?startX-dragEvent.clientX:dragEvent.clientX-startX),height=startHeight+dragEvent.clientY-startY,editorComp=store.getEditorRef(),editorNode=editorComp.refs.editor?editorComp.refs.editor:editorComp.editor;width=Math.min(editorNode.clientWidth,width),height=Math.min(editorNode.clientHeight,height);var widthPerc=100/editorNode.clientWidth*width,heightPerc=100/editorNode.clientHeight*height,newState={};(isLeft||isRight)&&"relative"===horizontal?(newState.width=resizeSteps?round(widthPerc,resizeSteps):widthPerc,newState.width=Math.max(widthPerc,_this.props.minWidth)):(isLeft||isRight)&&"absolute"===horizontal&&(newState.width=resizeSteps?round(width,resizeSteps):width,newState.width=Math.max(width,_this.props.minWidth)),(isTop||isBottom)&&"relative"===vertical?(newState.height=resizeSteps?round(heightPerc,resizeSteps):heightPerc,newState.height=Math.max(heightPerc,_this.props.minHeight)):(isTop||isBottom)&&"absolute"===vertical&&(newState.height=resizeSteps?round(height,resizeSteps):height,newState.height=Math.max(height,_this.props.minHeight)),dragEvent.preventDefault(),_this.setState(newState)};document.addEventListener("mousemove",doDrag,!1),document.addEventListener("mouseup",(function stopDrag(){document.removeEventListener("mousemove",doDrag,!1),document.removeEventListener("mouseup",stopDrag,!1);var _this$state=_this.state,width=_this$state.width,height=_this$state.height;_this.setState({clicked:!1}),_this.updateEntityData(width,height)}),!1),_this.setState({clicked:!0})}},_this}return inheritsLoose(BlockResizeableDecorator,_Component),BlockResizeableDecorator.prototype.render=function(){var _classNames,_this2=this,_this$props3=this.props,blockProps=_this$props3.blockProps,vertical=_this$props3.vertical,horizontal=_this$props3.horizontal,style=_this$props3.style,elementProps=(_this$props3.resizeSteps,objectWithoutPropertiesLoose(_this$props3,["blockProps","vertical","horizontal","style","resizeSteps"])),_this$getDataConfig2=this.getDataConfig(),size=_this$getDataConfig2.size,alignment=_this$getDataConfig2.alignment,_this$state2=this.state,_this$state2$width=_this$state2.width,width=void 0===_this$state2$width?this.getDataConfig().width:_this$state2$width,_this$state2$height=_this$state2.height,height=void 0===_this$state2$height?this.getDataConfig().height:_this$state2$height,hoverPosition=_this$state2.hoverPosition,isTop=hoverPosition.isTop,isLeft=hoverPosition.isLeft,isRight=hoverPosition.isRight,isBottom=hoverPosition.isBottom,styles=_extends_1({position:"relative"},style);this.mergedStyles=this.mergedStyles||Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["mergeStyles"])({styles:deafultStyles,theme:config.theme}),"auto"===horizontal?styles.width="auto":"relative"===horizontal?styles.width=(width||this.props.minWidth)+"%":"absolute"===horizontal&&(styles.width=(width||this.props.minWidth)+"px"),"auto"===vertical?styles.height="auto":"relative"===vertical?styles.height=(height||this.props.minHeight)+"%":"absolute"===vertical&&(styles.height=(height||this.props.minHeight)+"px"),styles.cursor=isRight&&isBottom||isLeft&&isTop?"nwse-resize":isRight&&isTop||isBottom&&isLeft?"nesw-resize":isRight||isLeft?"ew-resize":isBottom||isTop?"ns-resize":"default";var containerClassName=classnames__WEBPACK_IMPORTED_MODULE_5___default()(((_classNames={})[this.mergedStyles.resizeHandleR]="right"!==alignment&&"fullWidth"!==size&&!config.isMobile,_classNames[this.mergedStyles.resizeHandleL]="left"!==alignment&&"fullWidth"!==size&&!config.isMobile,_classNames)),interactionProps={onMouseDown:this.mouseDown,onMouseMove:this.mouseMove,onMouseLeave:this.mouseLeave,width:this.state.width||this.props.minWidth,containerClassName:containerClassName};return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(WrappedComponent,_extends_1({},elementProps,interactionProps,{blockProps:blockProps,ref:function(element){_this2.wrapper=element},style:styles}))},BlockResizeableDecorator}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),_class.displayName="Resizable("+function(WrappedComponent){var component=WrappedComponent.WrappedComponent||WrappedComponent;return component.displayName||component.name||"Component"}(WrappedComponent)+")",_class.WrappedComponent=WrappedComponent.WrappedComponent||WrappedComponent,_class.defaultProps=_extends_1({horizontal:"relative",vertical:!1,resizeSteps:1,minHeight:40,minWidth:40},config),_temp}},addBlock=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(editorState,selection,type,data,entityType){var text=arguments.length>5&&void 0!==arguments[5]?arguments[5]:" ",currentContentState=editorState.getCurrentContent(),currentSelectionState=selection,afterRemovalContentState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.Modifier.removeRange(currentContentState,currentSelectionState,"backward"),targetSelection=afterRemovalContentState.getSelectionAfter(),blockKeyForTarget=targetSelection.get("focusKey"),block=currentContentState.getBlockForKey(blockKeyForTarget),insertionTargetSelection=void 0,insertionTargetBlock=void 0,isEmptyBlock=0===block.getLength()&&null===block.getEntityAt(0),selectedFromStart=0===currentSelectionState.getStartOffset();isEmptyBlock||selectedFromStart?(insertionTargetSelection=targetSelection,insertionTargetBlock=afterRemovalContentState):insertionTargetSelection=(insertionTargetBlock=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.Modifier.splitBlock(afterRemovalContentState,targetSelection)).getSelectionAfter();var newContentStateAfterSplit=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.Modifier.setBlockType(insertionTargetBlock,insertionTargetSelection,type),contentStateWithEntity=newContentStateAfterSplit.createEntity(entityType||type,"IMMUTABLE",_extends({},data)),entityKey=contentStateWithEntity.getLastCreatedEntityKey(),charData=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.CharacterMetadata.create({entity:entityKey}),fragmentArray=[new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.ContentBlock({key:(0,_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.genKey)(),type:type,text:text,characterList:(0,immutable.List)((0,immutable.Repeat)(charData,text.length||1))}),new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.ContentBlock({key:(0,_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.genKey)(),type:"unstyled",text:"",characterList:(0,immutable.List)()})],fragment=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.BlockMapBuilder.createFromArray(fragmentArray);return _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.Modifier.replaceWithFragment(newContentStateAfterSplit,insertionTargetSelection,fragment)}}));unwrapExports(addBlock);var removeBlock$1=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(contentState,blockKey){var targetRange,afterKey=contentState.getKeyAfter(blockKey),afterBlock=contentState.getBlockForKey(afterKey);targetRange=afterBlock&&"unstyled"===afterBlock.getType()&&0===afterBlock.getLength()&&afterBlock===contentState.getBlockMap().last()?new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.SelectionState({anchorKey:blockKey,anchorOffset:0,focusKey:afterKey,focusOffset:0}):new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.SelectionState({anchorKey:blockKey,anchorOffset:0,focusKey:blockKey,focusOffset:1});var newContentState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.Modifier.setBlockType(contentState,targetRange,"unstyled");return _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.Modifier.removeRange(newContentState,targetRange,"backward")}}));unwrapExports(removeBlock$1);var constants=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.DRAFTJS_BLOCK_KEY="DRAFTJS_BLOCK_KEY",exports.DRAFTJS_BLOCK_TYPE="DRAFTJS_BLOCK_TYPE"}));unwrapExports(constants),constants.DRAFTJS_BLOCK_KEY,constants.DRAFTJS_BLOCK_TYPE;var handleDrop=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _addBlock2=_interopRequireDefault(addBlock),_removeBlock2=_interopRequireDefault(removeBlock$1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(selection,dataTransfer,isInternal,_ref){var getEditorState=_ref.getEditorState,setEditorState=_ref.setEditorState,editorState=getEditorState(),raw=dataTransfer.data.getData("text"),data=raw?raw.split(":"):[];if(2===data.length){if(data[0]===constants.DRAFTJS_BLOCK_KEY){var blockKey=data[1],contentState=editorState.getCurrentContent(),block=contentState.getBlockForKey(blockKey),entity=contentState.getEntity(block.getEntityAt(0)),contentStateAfterInsert=(0,_addBlock2.default)(editorState,selection,block.getType(),entity.data,entity.type),contentStateAfterRemove=(0,_removeBlock2.default)(contentStateAfterInsert,blockKey),newSelection=new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.SelectionState({anchorKey:blockKey,anchorOffset:0,focusKey:blockKey,focusOffset:0}),newState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.EditorState.push(editorState,contentStateAfterRemove,"move-block");setEditorState(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8___default.a.EditorState.forceSelection(newState,newSelection))}return"handled"}}}));unwrapExports(handleDrop);var createDecorator$2=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var obj,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react2=(obj=react__WEBPACK_IMPORTED_MODULE_1___default.a)&&obj.__esModule?obj:{default:obj};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}exports.default=function(_ref){var store=_ref.store;return function(WrappedComponent){var _class,_temp2;return _temp2=_class=function(_Component){function BlockDraggableDecorator(){var _ref2,_temp,_this;_classCallCheck(this,BlockDraggableDecorator);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref2=BlockDraggableDecorator.__proto__||Object.getPrototypeOf(BlockDraggableDecorator)).call.apply(_ref2,[this].concat(args))),_this.startDrag=function(event){event.dataTransfer.dropEffect="move",event.dataTransfer.setData("text",constants.DRAFTJS_BLOCK_KEY+":"+_this.props.block.key)},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BlockDraggableDecorator,react__WEBPACK_IMPORTED_MODULE_1___default.a.Component),_createClass(BlockDraggableDecorator,[{key:"render",value:function(){var readOnly=!store.getReadOnly||store.getReadOnly();return _react2.default.createElement(WrappedComponent,_extends({},this.props,{onDragStart:readOnly?void 0:this.startDrag}))}}]),BlockDraggableDecorator}(),_class.displayName="BlockDraggable("+function(WrappedComponent){var component=WrappedComponent.WrappedComponent||WrappedComponent;return component.displayName||component.name||"Component"}(WrappedComponent)+")",_class.WrappedComponent=WrappedComponent.WrappedComponent||WrappedComponent,_temp2}}}));unwrapExports(createDecorator$2);var createBlockDndPlugin=unwrapExports(createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _handleDrop2=_interopRequireDefault(handleDrop),_createDecorator2=_interopRequireDefault(createDecorator$2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){var store={getReadOnly:void 0};return{initialize:function(_ref){var getReadOnly=_ref.getReadOnly;store.getReadOnly=getReadOnly},decorator:(0,_createDecorator2.default)({store:store}),handleDrop:_handleDrop2.default}}}))),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function startList(editorState,content,blockKey,firstSpacePos,blockType){var selectionToRemove=new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["SelectionState"]({anchorKey:blockKey,anchorOffset:0,focusKey:blockKey,focusOffset:firstSpacePos+1}),updatedContent=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Modifier"].removeRange(content,selectionToRemove,"backward"),updatedState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].push(editorState,updatedContent,"change-block-type");return updatedState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].forceSelection(updatedState,updatedContent.getSelectionAfter()),_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["RichUtils"].toggleBlockType(updatedState,blockType)}var CONFIG_DEFAULTS={allowNestedLists:!0,maxDepth:4,olRegex:/\d\./,ulChars:["-","","*"]},COMMAND_BY_SHORTCUT=[{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].TITLE,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND,wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT],key:"1"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].SUBTITLE,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND,wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT],key:"2"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].ALIGN_LEFT,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND,wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT],key:"l"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].ALIGN_RIGHT,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND,wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT],key:"r"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].ALIGN_CENTER,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND,wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT],key:"e"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].JUSTIFY,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND],key:"j"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].NUMBERED_LIST,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND],key:"m"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].BULLET_LIST,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND,wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT],key:"l"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].CODE,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND,wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT],key:"8"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].BLOCKQUOTE,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND,wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT],key:"9"}],hasCommandModifier=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* KeyBindingUtil */ "q"].hasCommandModifier,usesMacOSHeuristics=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* KeyBindingUtil */ "q"].usesMacOSHeuristics,isCtrlKeyCommand=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* KeyBindingUtil */ "q"].isCtrlKeyCommand,isOptionKeyCommand=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* KeyBindingUtil */ "q"].isOptionKeyCommand;function getModifiers(e){return[].concat(hasCommandModifier(e)?[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].COMMAND]:[],usesMacOSHeuristics(e)&&isCtrlKeyCommand(e)?[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].CTRL]:[],isOptionKeyCommand(e)?[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].OPTION]:[],e.shiftKey?[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT]:[])}function removeBlockAdjacentToAtomic(editorState,isAbove){var block,offsetKey,node,selection,range,content=editorState.getCurrentContent(),startKey=editorState.getSelection().getStartKey(),adjacentBlock=isAbove?content.getBlockAfter(startKey):content.getBlockBefore(startKey),blockMap=(isAbove?content.getFirstBlock().key:content.getLastBlock().key)!==startKey?content.getBlockMap().delete(startKey):content.getBlockMap(),newSelection=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* SelectionState */ "x"].createEmpty(adjacentBlock.getKey()),withoutCurrentBlock=content.merge({blockMap:blockMap,selectionAfter:newSelection});return withoutCurrentBlock!==content?(block=adjacentBlock,offsetKey=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DraftOffsetKey */ "l"].encode(block.getKey(),0,0),node=document.querySelectorAll('[data-offset-key="'+offsetKey+'"]')[0],selection=window.getSelection(),(range=document.createRange()).setStart(node,0),range.setEnd(node,0),selection.removeAllRanges(),selection.addRange(range),wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorState */ "n"].forceSelection(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorState */ "n"].push(editorState,withoutCurrentBlock,"remove-range"),newSelection)):null}var getDirection=function(){return event.shiftKey?-1:1},handleKeyCommand=function(updateEditorState,customHandlers,blockType){return function(command,editorState){var newState;if(customHandlers[command])newState=function(command){return command===wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].TAB||command===wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].SHIFT_TAB}(command)?function(editorState,blockType,customHandlers,command){var newState;return function(blockType){return"ordered-list-item"===blockType||"unordered-list-item"===blockType}(blockType)?newState=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* indentSelectedBlocks */ "Y"])(editorState,getDirection()):Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* isTypeText */ "bb"])(blockType)?newState=function(editorState){var newState;return editorState.getSelection().isCollapsed()?event.shiftKey?"\t"===Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getCharacterBeforeSelection */ "P"])(editorState)&&(newState=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* deleteCharacterBeforeCursor */ "L"])(editorState)):newState=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* insertString */ "Z"])(editorState,wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* CHARACTERS */ "h"].TAB):newState=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* indentSelectedBlocks */ "Y"])(editorState,getDirection()),newState}(editorState):function(blockType){return"code-block"===blockType}(blockType)||(newState=customHandlers[command](editorState)),newState}(editorState,blockType,customHandlers,command):customHandlers[command](editorState);else switch(command){case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].ALIGN_RIGHT:case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].ALIGN_LEFT:case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].ALIGN_CENTER:case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].JUSTIFY:newState=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* mergeBlockData */ "db"])(editorState,{textAlignment:command});break;case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].TITLE:case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].SUBTITLE:case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].NUMBERED_LIST:case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].BULLET_LIST:case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].BLOCKQUOTE:case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].CODE:newState=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* RichUtils */ "w"].toggleBlockType(editorState,command);break;case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].BACKSPACE:newState=function(editorState){var selection=editorState.getSelection();if(Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* isAtomicBlockFocused */ "ab"])(editorState))return Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* replaceWithEmptyBlock */ "gb"])(editorState,selection.getAnchorKey());if(!selection.isCollapsed()||selection.getAnchorOffset()||selection.getFocusOffset())return null;var content=editorState.getCurrentContent(),startKey=selection.getStartKey(),blockBefore=content.getBlockBefore(startKey);if(blockBefore&&"atomic"===blockBefore.getType()){var withoutCurrentBlock=removeBlockAdjacentToAtomic(editorState,!1);if(withoutCurrentBlock)return withoutCurrentBlock}var withoutBlockStyle=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* RichUtils */ "w"].tryToRemoveBlockStyle(editorState);return withoutBlockStyle?wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorState */ "n"].push(editorState,withoutBlockStyle,"change-block-type"):selection.isCollapsed()&&0===selection.getAnchorOffset()&&Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getSelectedBlocks */ "U"])(editorState)[0].getDepth()>0?Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* indentSelectedBlocks */ "Y"])(editorState,-1):null}(editorState);break;case wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].DELETE:newState=function(editorState){var selection=editorState.getSelection();if(Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* isAtomicBlockFocused */ "ab"])(editorState))return Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* replaceWithEmptyBlock */ "gb"])(editorState,selection.getAnchorKey());if(!selection.isCollapsed())return null;var content=editorState.getCurrentContent(),startKey=selection.getStartKey(),blockLength=content.getBlockForKey(startKey).getLength();if(selection.getStartOffset()<blockLength)return null;var blockAfter=content.getBlockAfter(startKey);return blockAfter&&"atomic"===blockAfter.getType()?removeBlockAdjacentToAtomic(editorState,!0):null}(editorState);break;default:newState=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* RichUtils */ "w"].handleKeyCommand(editorState,command)}return newState?(updateEditorState(newState),"handled"):"not-handled"}},styles$4={fontElementMap:"_2X1ls",pluginContainerReadOnly:"_1HLi3",pluginContainer:"_3NnBy",panelContainer:"_1E2rR",wrapper:"LG3cc",flex:"_1b9WG",absFull:"_3r7BO",visuallyHidden:"_3_54f",hasFocus:"_9yezB",overlay:"_3lmrY",hidden:"_1I01k",pluginContainerMobile:"_2WM_0",isImage:"sao9C",anchor:"p2mZq",infoIcon:"_3EZUP",infoContainer:"mwBaK",editor:"Tux6h",desktop:"_1LOTO",atomic:"_3Ecss",toolbar:"_1g9ew",block:"_3Bzge",elementSpacing:"_2hXa7",blockStyleSpacing:"j7VHc",text:"jwLWP _2hXa7",justify:"c1DFJ",quote:"pjZF7 j7VHc",headerOne:"_34qUI _2hXa7",headerTwo:"_6PM_v _2hXa7",headerThree:"_1pddf _2hXa7",code:"_2b0WX j7VHc",codeBlock:"yFBFi j7VHc",transformed:"_20neQ"},styles$5=_extends_1(_extends_1({},styles$4),{left:"_1idAv",center:"_21OX4",right:"_3n_Yy"}),types={blockquote:"quote","header-one":"headerOne","header-two":"headerTwo","header-three":"headerThree","header-four":"headerFour","header-five":"headerFive","header-six":"headerSix",atomic:"atomic","code-block":"codeBlock","ordered-list-item":"orderedList","unordered-list-item":"unorderedList"},blockStyleFn=function(theme,styleToClass){return function(contentBlock){var _contentBlock$toJS=contentBlock.toJS(),type=_contentBlock$toJS.type,depth=_contentBlock$toJS.depth,_contentBlock$toJS$da=_contentBlock$toJS.data,textAlignment=_contentBlock$toJS$da.textAlignment,_contentBlock$toJS$da2=_contentBlock$toJS$da.dynamicStyles,dynamicStyles=void 0===_contentBlock$toJS$da2?{}:_contentBlock$toJS$da2,key=types[type]||"text",classList=[styles$5[key],theme[key]];"atomic"!==type&&classList.push(styles$5[textAlignment],theme[textAlignment],!function(type){return"ordered-list-item"===type||"unordered-list-item"===type}(type)&&Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["depthClassName"])(depth));var dynamicClasses=Object.entries(dynamicStyles).map(styleToClass);return classnames__WEBPACK_IMPORTED_MODULE_5___default.a.apply(void 0,classList.concat(dynamicClasses))}},rangeSort=function(r1,r2){return r1.offset===r2.offset?r2.length-r1.length:r1.offset-r2.offset};react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h1",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h5",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h6",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("blockquote",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("ul",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("ol",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("figure",null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("figure",null);var fallback=function(html){var doc=document.implementation.createHTMLDocument("");return doc.documentElement.innerHTML=html,doc};function parseHTML(html){var doc;return"undefined"!=typeof DOMParser&&null!==(doc=(new DOMParser).parseFromString(html,"text/html"))&&null!==doc.body||(doc=fallback(html)),doc.body}var REGEX_CR=new RegExp("\r","g"),REGEX_LF=new RegExp("\n","g"),REGEX_NBSP=new RegExp("&nbsp;","g"),REGEX_BLOCK_DELIMITER=new RegExp("\r","g"),blockTags=["p","h1","h2","h3","h4","h5","h6","li","blockquote","pre"],inlineTags={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},handleMiddleware=function(maybeMiddleware,base){return maybeMiddleware&&!0===maybeMiddleware.__isMiddleware?maybeMiddleware(base):maybeMiddleware},defaultHTMLToBlock=function(nodeName,node,lastList){},defaultHTMLToStyle=function(nodeName,node,currentStyle){return currentStyle},defaultHTMLToEntity=function(nodeName,node){},defaultTextToEntity=function(text){return[]},nullthrows=function(x){if(null!=x)return x;throw new Error("Got unexpected null or undefined")};function getSoftNewlineChunk(block,depth){var flat=arguments.length>2&&void 0!==arguments[2]&&arguments[2],data=arguments.length>3&&void 0!==arguments[3]?arguments[3]:immutable_3();return!0===flat?{text:"\r",inlines:[immutable_2()],entities:new Array(1),blocks:[{type:block,data:data,depth:Math.max(0,Math.min(4,depth))}],isNewline:!0}:{text:"\n",inlines:[immutable_2()],entities:new Array(1),blocks:[]}}function getBlockDividerChunk(block,depth){var data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:immutable_3();return{text:"\r",inlines:[immutable_2()],entities:new Array(1),blocks:[{type:block,data:data,depth:Math.max(0,Math.min(4,depth))}]}}function getBlockTypeForTag(tag,lastList){switch(tag){case"h1":return"header-one";case"h2":return"header-two";case"h3":return"header-three";case"h4":return"header-four";case"h5":return"header-five";case"h6":return"header-six";case"li":return"ol"===lastList?"ordered-list-item":"unordered-list-item";case"blockquote":return"blockquote";case"pre":return"code-block";case"div":case"p":return"unstyled";default:return null}}function baseCheckBlockType(nodeName,node,lastList){return getBlockTypeForTag(nodeName,lastList)}function processInlineTag(tag,node,currentStyle){var styleToCheck=inlineTags[tag];if(styleToCheck)currentStyle=currentStyle.add(styleToCheck).toOrderedSet();else if(node instanceof HTMLElement){var htmlElement=node;currentStyle=currentStyle.withMutations((function(style){"bold"===htmlElement.style.fontWeight&&style.add("BOLD"),"italic"===htmlElement.style.fontStyle&&style.add("ITALIC"),"underline"===htmlElement.style.textDecoration&&style.add("UNDERLINE"),"line-through"===htmlElement.style.textDecoration&&style.add("STRIKETHROUGH")})).toOrderedSet()}return currentStyle}function baseProcessInlineTag(tag,node){var inlineStyles=arguments.length>2&&void 0!==arguments[2]?arguments[2]:immutable_2();return processInlineTag(tag,node,inlineStyles)}function joinChunks(A,B){var flat=arguments.length>2&&void 0!==arguments[2]&&arguments[2],firstInB=B.text.slice(0,1),lastInA=A.text.slice(-1),adjacentDividers="\r"===lastInA&&"\r"===firstInB,isJoiningBlocks="\r"!==A.text&&"\r"!==B.text,addingNewlineToEmptyBlock="\r"===A.text&&!A.isNewline&&B.isNewline;if(adjacentDividers&&(isJoiningBlocks||addingNewlineToEmptyBlock)&&(A.text=A.text.slice(0,-1),A.inlines.pop(),A.entities.pop(),A.blocks.pop()),"\r"===A.text.slice(-1)&&!0===flat){if(" "===B.text||"\n"===B.text)return A;" "!==firstInB&&"\n"!==firstInB||(B.text=B.text.slice(1),B.inlines.shift(),B.entities.shift())}var isNewline=0===A.text.length&&B.isNewline;return{text:A.text+B.text,inlines:A.inlines.concat(B.inlines),entities:A.entities.concat(B.entities),blocks:A.blocks.concat(B.blocks),isNewline:isNewline}}function getChunkForHTML(html,processCustomInlineStyles,checkEntityNode,checkEntityText,checkBlockType,createEntity,getEntity,mergeEntityData,replaceEntityData,options,DOMBuilder){var safeBody=DOMBuilder(html=html.trim().replace(REGEX_CR,"").replace(REGEX_NBSP," "));if(!safeBody)return null;var workingBlocks=function(html){return blockTags.some((function(tag){return-1!==html.indexOf("<".concat(tag))}))}(html)?blockTags.concat(["div"]):["div"],chunk=function genFragment(node,inlineStyle,lastList,inBlock,fragmentBlockTags,depth,processCustomInlineStyles,checkEntityNode,checkEntityText,checkBlockType,createEntity,getEntity,mergeEntityData,replaceEntityData,options,inEntity){var nodeName=node.nodeName.toLowerCase(),newBlock=!1,nextBlockType="unstyled";if("#text"===nodeName){var text=node.textContent;if(""===text.trim()&&null===inBlock)return{text:"",inlines:[],entities:[],blocks:[]};if(""===text.trim()&&"code-block"!==inBlock)return function(inEntity){var entities=new Array(1);return inEntity&&(entities[0]=inEntity),{text:" ",inlines:[immutable_2()],entities:entities,blocks:[]}}(inEntity);"code-block"!==inBlock&&(text=text.replace(REGEX_LF," "));var entities=Array(text.length).fill(inEntity),offsetChange=0;return checkEntityText(text,createEntity,getEntity,mergeEntityData,replaceEntityData).sort(rangeSort).forEach((function(_ref){var entity=_ref.entity,offset=_ref.offset,length=_ref.length,result=_ref.result,adjustedOffset=offset+offsetChange;null==result&&(result=text.substr(adjustedOffset,length));var textArray=text.split("");textArray.splice.bind(textArray,adjustedOffset,length).apply(textArray,result.split("")),text=textArray.join(""),entities.splice.bind(entities,adjustedOffset,length).apply(entities,Array(result.length).fill(entity)),offsetChange+=result.length-length})),{text:text,inlines:Array(text.length).fill(inlineStyle),entities:entities,blocks:[]}}if("br"===nodeName){var _blockType=inBlock;return null===_blockType?getSoftNewlineChunk("unstyled",depth,!0):getSoftNewlineChunk(_blockType||"unstyled",depth,options.flat)}var chunk={text:"",inlines:[],entities:[],blocks:[]};inlineStyle=processCustomInlineStyles(nodeName,node,inlineStyle=processInlineTag(nodeName,node,inlineStyle)),"ul"!==nodeName&&"ol"!==nodeName||(lastList&&(depth+=1),lastList=nodeName,inBlock=null);var blockType,blockDataMap,blockInfo=checkBlockType(nodeName,node,lastList,inBlock);if(!1===blockInfo)return{text:"",inlines:[],entities:[],blocks:[]};if("string"==typeof(blockInfo=blockInfo||{})?(blockType=blockInfo,blockDataMap=immutable_3()):(blockType="string"==typeof blockInfo?blockInfo:blockInfo.type,blockDataMap=blockInfo.data?immutable_3(blockInfo.data):immutable_3()),inBlock||-1===fragmentBlockTags.indexOf(nodeName)&&!blockType)if(!lastList||"ordered-list-item"!==inBlock&&"unordered-list-item"!==inBlock||"li"!==nodeName)inBlock&&"atomic"!==inBlock&&"atomic"===blockType&&(inBlock=blockType,newBlock=!0,chunk=getSoftNewlineChunk(blockType,depth,!0,blockDataMap));else{var listItemBlockType=getBlockTypeForTag(nodeName,lastList);chunk=getBlockDividerChunk(listItemBlockType,depth),inBlock=listItemBlockType,newBlock=!0,nextBlockType="ul"===lastList?"unordered-list-item":"ordered-list-item"}else chunk=getBlockDividerChunk(blockType||getBlockTypeForTag(nodeName,lastList),depth,blockDataMap),inBlock=blockType||getBlockTypeForTag(nodeName,lastList),newBlock=!0;var child=node.firstChild;null!=child||!inEntity||"atomic"!==blockType&&"atomic"!==inBlock||(child=document.createTextNode("a")),null!=child&&(nodeName=child.nodeName.toLowerCase());for(var entityId=null;child;){entityId=checkEntityNode(nodeName,child,createEntity,getEntity,mergeEntityData,replaceEntityData),chunk=joinChunks(chunk,genFragment(child,inlineStyle,lastList,inBlock,fragmentBlockTags,depth,processCustomInlineStyles,checkEntityNode,checkEntityText,checkBlockType,createEntity,getEntity,mergeEntityData,replaceEntityData,options,entityId||inEntity),options.flat);var sibling=child.nextSibling;if(sibling&&fragmentBlockTags.indexOf(nodeName)>=0&&inBlock){var newBlockInfo=checkBlockType(nodeName,child,lastList,inBlock),newBlockType=void 0,newBlockData=void 0;!1!==newBlockInfo&&("string"==typeof(newBlockInfo=newBlockInfo||{})?(newBlockType=newBlockInfo,newBlockData=immutable_3()):(newBlockType=newBlockInfo.type||getBlockTypeForTag(nodeName,lastList),newBlockData=newBlockInfo.data?immutable_3(newBlockInfo.data):immutable_3()),chunk=joinChunks(chunk,getSoftNewlineChunk(newBlockType,depth,options.flat,newBlockData),options.flat))}sibling&&(nodeName=sibling.nodeName.toLowerCase()),child=sibling}return newBlock&&(chunk=joinChunks(chunk,getBlockDividerChunk(nextBlockType,depth,immutable_3()),options.flat)),chunk}(safeBody,immutable_2(),"ul",null,workingBlocks,-1,processCustomInlineStyles,checkEntityNode,checkEntityText,checkBlockType,createEntity,getEntity,mergeEntityData,replaceEntityData,options);return 0===chunk.text.indexOf("\r")&&(chunk={text:chunk.text.slice(1),inlines:chunk.inlines.slice(1),entities:chunk.entities.slice(1),blocks:chunk.blocks}),"\r"===chunk.text.slice(-1)&&(chunk.text=chunk.text.slice(0,-1),chunk.inlines=chunk.inlines.slice(0,-1),chunk.entities=chunk.entities.slice(0,-1),chunk.blocks.pop()),0===chunk.blocks.length&&chunk.blocks.push({type:"unstyled",data:immutable_3(),depth:0}),chunk.text.split("\r").length===chunk.blocks.length+1&&chunk.blocks.unshift({type:"unstyled",data:immutable_3(),depth:0}),chunk}function convertFromHTMLtoContentBlocks(html,processCustomInlineStyles,checkEntityNode,checkEntityText,checkBlockType,createEntity,getEntity,mergeEntityData,replaceEntityData,options,DOMBuilder,generateKey){var chunk=getChunkForHTML(html,processCustomInlineStyles,checkEntityNode,checkEntityText,checkBlockType,createEntity,getEntity,mergeEntityData,replaceEntityData,options,DOMBuilder);if(null==chunk)return[];var start=0;return chunk.text.split("\r").map((function(textBlock,blockIndex){textBlock=textBlock.replace(REGEX_BLOCK_DELIMITER,"");var end=start+textBlock.length,inlines=nullthrows(chunk).inlines.slice(start,end),entities=nullthrows(chunk).entities.slice(start,end),characterList=immutable_1(inlines.map((function(style,entityIndex){var data={style:style,entity:null};return entities[entityIndex]&&(data.entity=entities[entityIndex]),_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["CharacterMetadata"].create(data)})));return start=end+1,new _wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["ContentBlock"]({key:generateKey(),type:nullthrows(chunk).blocks[blockIndex].type,data:nullthrows(chunk).blocks[blockIndex].data,depth:nullthrows(chunk).blocks[blockIndex].depth,text:textBlock,characterList:characterList})}))}var _ref9,convertFromHTML=function(_ref2){var _ref2$htmlToStyle=_ref2.htmlToStyle,htmlToStyle=void 0===_ref2$htmlToStyle?defaultHTMLToStyle:_ref2$htmlToStyle,_ref2$htmlToEntity=_ref2.htmlToEntity,htmlToEntity=void 0===_ref2$htmlToEntity?defaultHTMLToEntity:_ref2$htmlToEntity,_ref2$textToEntity=_ref2.textToEntity,textToEntity=void 0===_ref2$textToEntity?defaultTextToEntity:_ref2$textToEntity,_ref2$htmlToBlock=_ref2.htmlToBlock,htmlToBlock=void 0===_ref2$htmlToBlock?defaultHTMLToBlock:_ref2$htmlToBlock;return function(html){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{flat:!1},DOMBuilder=arguments.length>2&&void 0!==arguments[2]?arguments[2]:parseHTML,generateKey=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["genKey"],contentState=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["ContentState"].createFromText(""),createEntityWithContentState=function(){var _contentState;return contentState.createEntity?(contentState=(_contentState=contentState).createEntity.apply(_contentState,arguments)).getLastCreatedEntityKey():_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Entity"].create.apply(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Entity"],arguments)},getEntityWithContentState=function(){var _contentState2;return contentState.getEntity?(_contentState2=contentState).getEntity.apply(_contentState2,arguments):_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Entity"].get.apply(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Entity"],arguments)},mergeEntityDataWithContentState=function(){var _contentState3;contentState.mergeEntityData?contentState=(_contentState3=contentState).mergeEntityData.apply(_contentState3,arguments):_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Entity"].mergeData.apply(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Entity"],arguments)},replaceEntityDataWithContentState=function(){var _contentState4;contentState.replaceEntityData?contentState=(_contentState4=contentState).replaceEntityData.apply(_contentState4,arguments):_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Entity"].replaceData.apply(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["Entity"],arguments)},contentBlocks=convertFromHTMLtoContentBlocks(html,handleMiddleware(htmlToStyle,baseProcessInlineTag),handleMiddleware(htmlToEntity,defaultHTMLToEntity),handleMiddleware(textToEntity,defaultTextToEntity),handleMiddleware(htmlToBlock,baseCheckBlockType),createEntityWithContentState,getEntityWithContentState,mergeEntityDataWithContentState,replaceEntityDataWithContentState,options,DOMBuilder,generateKey),blockMap=_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["BlockMapBuilder"].createFromArray(contentBlocks),firstBlockKey=contentBlocks[0].getKey();return contentState.merge({blockMap:blockMap,selectionBefore:_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["SelectionState"].createEmpty(firstBlockKey),selectionAfter:_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["SelectionState"].createEmpty(firstBlockKey)})}},rgbToHex=function(rgbString){var sep=rgbString.indexOf(",")>-1?",":" ",rgb=rgbString.substr(4).split(")")[0].split(sep),r=Number(rgb[0]).toString(16),g=Number(rgb[1]).toString(16),b=Number(rgb[2]).toString(16);return 1===r.length&&(r="0"+r),1===g.length&&(g="0"+g),1===b.length&&(b="0"+b),"#"+r+g+b},pastedContentConfig={htmlToStyle:function(nodeName,node,currentStyle){if("span"===nodeName){var styles=[];return node.style.color&&styles.push('{"FG":"'+rgbToHex(node.style.color)+'"}'),node.style.backgroundColor&&styles.push('{"BG":"'+rgbToHex(node.style.backgroundColor)+'"}'),node.style.fontWeight>500&&styles.push("BOLD"),immutable_2.of.apply(immutable_2,styles).merge(currentStyle)}return immutable_2.of.apply(immutable_2,[]).merge(currentStyle)},htmlToEntity:function(nodeName,node,createEntity){return"a"===nodeName?createEntity("LINK","MUTABLE",{url:node.href,target:"_blank",rel:"noopener"}):null}},unnecessaryInlineStyles=["CODE"],RichContentEditor=function(_Component){function RichContentEditor(props){var _this,_ref2;(_this=_Component.call(this,props)||this).onChangedFocusedBlock=function(blockKey){var onAtomicBlockFocus=_this.props.onAtomicBlockFocus;if(onAtomicBlockFocus){if(blockKey){var _getBlockInfo=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getBlockInfo */ "N"])(_this.getEditorState(),blockKey);onAtomicBlockFocus({blockKey:blockKey,type:_getBlockInfo.type,data:_getBlockInfo.entityData})}onAtomicBlockFocus({})}},_this.getEditorState=function(){return _this.state.editorState},_this.setEditorState=function(editorState){return _this.setState({editorState:editorState})},_this.initContext=function(){var _this$props=_this.props,theme=_this$props.theme,t=_this$props.t,locale=_this$props.locale,anchorTarget=_this$props.anchorTarget,relValue=_this$props.relValue,_this$props$helpers=_this$props.helpers,helpers=void 0===_this$props$helpers?{}:_this$props$helpers,config=_this$props.config,_this$props$isMobile=_this$props.isMobile,isMobile=void 0!==_this$props$isMobile&&_this$props$isMobile,shouldRenderOptimizedImages=_this$props.shouldRenderOptimizedImages,siteDomain=_this$props.siteDomain,iframeSandboxDomain=_this$props.iframeSandboxDomain;_this.fixFileHandlersName(helpers),_this.contextualData={theme:theme||{},t:t,locale:locale,anchorTarget:anchorTarget,relValue:relValue,helpers:_extends_1(_extends_1({},helpers),{},{onPluginAdd:function(){for(var _helpers$onPluginAdd,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return null===(_helpers$onPluginAdd=helpers.onPluginAdd)||void 0===_helpers$onPluginAdd?void 0:_helpers$onPluginAdd.call.apply(_helpers$onPluginAdd,[helpers].concat(args,[wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["Version"].currentVersion]))}}),config:config,isMobile:isMobile,setEditorState:_this.setEditorState,getEditorState:_this.getEditorState,getEditorBounds:_this.getEditorBounds,languageDir:Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["getLangDir"])(locale),shouldRenderOptimizedImages:shouldRenderOptimizedImages,siteDomain:siteDomain,iframeSandboxDomain:iframeSandboxDomain,setInPluginEditingMode:_this.setInPluginEditingMode,getInPluginEditingMode:_this.getInPluginEditingMode}},_this.getEditorBounds=function(){return _this.state.editorBounds},_this.removeEventListeners=function(){_this.toolbars[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].EXTERNAL].shouldCreate&&__webpack_require__.e(/* import() */ 2).then(__webpack_require__.bind(null, 1035)).then((function(_ref){return(0,_ref.removeAllListeners)(_ref.EVENTS.PLUGIN_BUTTONS_READY)}))},_this.getToolbars=function(){return{MobileToolbar:_this.toolbars[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].MOBILE]?_this.toolbars[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].MOBILE].Toolbar:null,TextToolbar:"static"===_this.props.textToolbarType?_this.toolbars[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].STATIC].Toolbar:null}},_this.updateEditorState=function(editorState){var _this$props$helpers2,_this$props$onChange,_this$props2,onPluginDelete=null===(_this$props$helpers2=_this.props.helpers)||void 0===_this$props$helpers2?void 0:_this$props$helpers2.onPluginDelete;onPluginDelete&&_this.calculateDiff(editorState,(function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return onPluginDelete.apply(void 0,args.concat([wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["Version"].currentVersion]))})),_this.setEditorState(editorState),null===(_this$props$onChange=(_this$props2=_this.props).onChange)||void 0===_this$props$onChange||_this$props$onChange.call(_this$props2,editorState)},_this.handlePastedText=function(text,html,editorState){var handlePastedText=_this.props.handlePastedText;if(handlePastedText)return handlePastedText(text,html,editorState);if(html){var htmlContentState=function(){return arguments.length>=1&&"string"==typeof(arguments.length<=0?void 0:arguments[0])?convertFromHTML({}).apply(void 0,arguments):convertFromHTML.apply(void 0,arguments)}(pastedContentConfig)(html),contentState=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* Modifier */ "u"].replaceWithFragment(editorState.getCurrentContent(),editorState.getSelection(),htmlContentState.getBlockMap()),newEditorState=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorState */ "n"].push(editorState,contentState,"insert-fragment"),newContentState=function(contentState){var selection=function(contentState){var firstBlock=contentState.getBlockMap().first(),lastBlock=contentState.getBlockMap().last(),firstBlockKey=firstBlock.getKey(),lastBlockKey=lastBlock.getKey(),lengthOfLastBlock=lastBlock.getLength();return new wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* SelectionState */ "x"]({anchorKey:firstBlockKey,anchorOffset:0,focusKey:lastBlockKey,focusOffset:lengthOfLastBlock})}(contentState);return Object(lodash__WEBPACK_IMPORTED_MODULE_2__["reduce"])(unnecessaryInlineStyles,(function(newContentState,style){return wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* Modifier */ "u"].removeInlineStyle(newContentState,selection,style)}),contentState)}(contentState),resultEditorState=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorState */ "n"].set(newEditorState,{currentContent:newContentState,selection:newEditorState.getSelection()});return _this.updateEditorState(resultEditorState),"handled"}return!1},_this.handleTabCommand=function(){if(_this.getToolbars().TextToolbar){var staticToolbarButton=_this.findFocusableChildForElement(""+getStaticTextToolbarId(_this.refId));staticToolbarButton&&staticToolbarButton.focus()}else _this.editor.blur()},_this.getCustomCommandHandlers=function(){return{commands:[].concat(_this.pluginKeyBindings.commands,[{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].TAB,modifiers:[],key:"Tab"},{command:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* COMMANDS */ "i"].SHIFT_TAB,modifiers:[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* MODIFIERS */ "t"].SHIFT],key:"Tab"}]),commandHanders:_extends_1(_extends_1({},_this.pluginKeyBindings.commandHandlers),{},{tab:_this.handleTabCommand,shiftTab:_this.handleTabCommand})}},_this.focus=function(){return setTimeout(_this.editor.focus)},_this.blur=function(){return _this.editor.blur()},_this.publish=(_ref2=asyncToGenerator(regenerator.mark((function _callee(postId){var _this$props$helpers3,_getPostContentSummar,pluginsCount,pluginsDetails;return regenerator.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(null===(_this$props$helpers3=_this.props.helpers)||void 0===_this$props$helpers3?void 0:_this$props$helpers3.onPublish){_context.next=2;break}return _context.abrupt("return");case 2:_getPostContentSummar=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getPostContentSummary */ "T"])(_this.state.editorState),pluginsCount=_getPostContentSummar.pluginsCount,pluginsDetails=_getPostContentSummar.pluginsDetails,_this.props.helpers.onPublish(postId,pluginsCount,pluginsDetails,wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["Version"].currentVersion);case 4:case"end":return _context.stop()}}),_callee)}))),function(_x){return _ref2.apply(this,arguments)}),_this.setEditor=function(ref){return _this.editor=Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(ref,"editor",ref)},_this.inPluginEditingMode=!1,_this.setInPluginEditingMode=function(shouldEnable){var mode=shouldEnable?"render":"edit";_this.editor.setMode(mode),_this.inPluginEditingMode=shouldEnable},_this.getInPluginEditingMode=function(){return _this.inPluginEditingMode},_this.renderToolbars=function(){var toolbarsToIgnore=["MobileToolbar","StaticTextToolbar","static"===_this.props.textToolbarType?"InlineTextToolbar":""];return _this.plugins.map((function(plugin,index){var Toolbar=plugin.Toolbar||plugin.InlinePluginToolbar||plugin.InlineToolbar||plugin.SideToolbar;if(Toolbar)return Object(lodash__WEBPACK_IMPORTED_MODULE_2__["includes"])(toolbarsToIgnore,plugin.name)?null:react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Toolbar,{key:"k"+index})}))},_this.renderInlineModals=function(){return _this.plugins.map((function(plugin,index){if(plugin.InlineModals&&plugin.InlineModals.length>0)return plugin.InlineModals.map((function(Modal,modalIndex){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Modal,{key:"k"+index+"m"+modalIndex})}))}))},_this.renderEditor=function(){var updateEditorState,customCommands,bindingMap,_this$props3=_this.props,helpers=_this$props3.helpers,editorKey=_this$props3.editorKey,tabIndex=_this$props3.tabIndex,placeholder=_this$props3.placeholder,spellCheck=_this$props3.spellCheck,stripPastedStyles=_this$props3.stripPastedStyles,autoCapitalize=_this$props3.autoCapitalize,autoComplete=_this$props3.autoComplete,autoCorrect=_this$props3.autoCorrect,ariaActiveDescendantID=_this$props3.ariaActiveDescendantID,ariaAutoComplete=_this$props3.ariaAutoComplete,ariaControls=_this$props3.ariaControls,ariaDescribedBy=_this$props3.ariaDescribedBy,ariaExpanded=_this$props3.ariaExpanded,ariaLabel=_this$props3.ariaLabel,ariaMultiline=_this$props3.ariaMultiline,onBlur=_this$props3.onBlur,onFocus=_this$props3.onFocus,textAlignment=_this$props3.textAlignment,handleBeforeInput=_this$props3.handleBeforeInput,handleReturn=_this$props3.handleReturn,editorState=_this.state.editorState,theme=_this.contextualData.theme;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Editor$1,{ref:_this.setEditor,handleReturn:handleReturn?handleReturn(_this.updateEditorState):(updateEditorState=_this.updateEditorState,function(command,editorState){if(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* KeyBindingUtil */ "q"].isSoftNewlineEvent(command)){var newState=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* RichUtils */ "w"].insertSoftNewline(editorState);return updateEditorState(newState),"handled"}var dynamicStyles=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getAnchorBlockData */ "M"])(editorState).dynamicStyles;if(dynamicStyles){var _newState=function(editorState,styles){var splitContentState=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* Modifier */ "u"].splitBlock(editorState.getCurrentContent(),editorState.getSelection()),contentStateWithStyles=wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* Modifier */ "u"].mergeBlockData(splitContentState,splitContentState.getSelectionAfter(),{dynamicStyles:styles});return wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorState */ "n"].push(editorState,contentStateWithStyles,"split-block")}(editorState,dynamicStyles);return updateEditorState(_newState),"handled"}return"not-handled"}),editorState:editorState,onChange:_this.updateEditorState,handleBeforeInput:handleBeforeInput,handlePastedText:_this.handlePastedText,plugins:_this.plugins,blockStyleFn:blockStyleFn(theme,_this.styleToClass),handleKeyCommand:handleKeyCommand(_this.updateEditorState,_this.getCustomCommandHandlers().commandHanders,Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getBlockType */ "O"])(editorState)),editorKey:editorKey,keyBindingFn:(customCommands=_this.getCustomCommandHandlers().commands||[],bindingMap=[].concat(COMMAND_BY_SHORTCUT,customCommands),function(e){return function(shortcut,bindingMap){var commands=bindingMap.filter((function(mapped){return mapped.key===shortcut.key&&Object(lodash__WEBPACK_IMPORTED_MODULE_2__["isEqual"])(mapped.modifiers,shortcut.modifiers)})).map((function(mapped){return mapped.command}));return commands.length>0?commands[0]:void 0}({modifiers:getModifiers(e),key:e.key},bindingMap)}),customStyleFn:_this.customStyleFn,helpers:helpers,tabIndex:tabIndex,placeholder:placeholder||"",spellCheck:spellCheck,stripPastedStyles:stripPastedStyles,autoCapitalize:autoCapitalize,autoComplete:autoComplete,autoCorrect:autoCorrect,ariaActiveDescendantID:ariaActiveDescendantID,ariaAutoComplete:ariaAutoComplete,ariaControls:ariaControls,ariaDescribedBy:ariaDescribedBy,ariaExpanded:ariaExpanded,ariaLabel:ariaLabel,ariaMultiline:ariaMultiline,onBlur:onBlur,onFocus:onFocus,textAlignment:textAlignment})},_this.renderAccessibilityListener=function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["AccessibilityListener"],{isMobile:_this.contextualData.isMobile})},_this.renderTooltipHost=function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TooltipHost */ "G"],{theme:_this.contextualData.theme})},_this.styleToClass=function(_ref3){return"rich_content_"+_ref3[0]+"-"+_ref3[1].toString().replace(".","_")},_this.renderStyleTag=function(){var blocks=_this.getEditorState().getCurrentContent().getBlockMap(),styles={};blocks.forEach((function(block){var _block$get$toJS$dynam=block.get("data").toJS().dynamicStyles,dynamicStyles=void 0===_block$get$toJS$dynam?{}:_block$get$toJS$dynam;Object.entries(dynamicStyles).forEach((function(style){return styles[_this.styleToClass(style)]=(_ref4=style)[0]+": "+_ref4[1]+";";var _ref4}))}));var css=Object.entries(styles).reduce((function(cssString,_ref5){return cssString+"[dir] ."+_ref5[0]+" {"+_ref5[1]+"}"}),"");return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("style",{id:"dynamicStyles"},css)},_this.onResize=Object(lodash__WEBPACK_IMPORTED_MODULE_2__["debounce"])((function(_ref6){var bounds=_ref6.bounds;return _this.updateBounds(bounds)}),100),_this.state={editorState:_this.getInitialEditorState(),editorBounds:{}},_this.refId=Math.floor(9999*Math.random());var _props$config$uiSetti=props.config.uiSettings,uiSettings=void 0===_props$config$uiSetti?{}:_props$config$uiSetti;return uiSettings.blankTargetToggleVisibilityFn=uiSettings.blankTargetToggleVisibilityFn||function(anchorTarget){return"_blank"!==anchorTarget},uiSettings.nofollowRelToggleVisibilityFn=uiSettings.nofollowRelToggleVisibilityFn||function(relValue){return"nofollow"!==relValue},_this.calculateDiff=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* createCalcContentDiff */ "J"])(_this.state.editorState),_this.initContext(),_this.initPlugins(),_this}inheritsLoose(RichContentEditor,_Component),RichContentEditor.getDerivedStateFromError=function(error){return{error:error}};var _proto=RichContentEditor.prototype;return _proto.componentDidUpdate=function(){this.handleBlockFocus(this.state.editorState)},_proto.componentDidMount=function(){this.dispatchPluginButtonsReady(this.pluginButtonProps)},_proto.componentWillMount=function(){var _this2=this;this.updateBounds=function(editorBounds){_this2.setState({editorBounds:editorBounds})}},_proto.componentWillUnmount=function(){this.updateBounds=function(){return""},this.removeEventListeners()},_proto.handleBlockFocus=function(editorState){var focusedBlockKey=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getFocusedBlockKey */ "Q"])(editorState);focusedBlockKey!==this.focusedBlockKey&&(this.focusedBlockKey=focusedBlockKey,this.onChangedFocusedBlock(focusedBlockKey))},_proto.initPlugins=function(){var styleFns,_this$props4=this.props,plugins=_this$props4.plugins,customStyleFn=_this$props4.customStyleFn,_createPlugins=function(_ref){var config,store,plugins=_ref.plugins,context=_ref.context,focusPlugin=function(){var lastSelection,lastContentState,config=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},blockKeyStore=createBlockKeyStore(),theme=config.theme?config.theme:defaultTheme;return{handleReturn:function(event,editorState,_ref){var setEditorState=_ref.setEditorState;return focusableBlockIsSelected(editorState,blockKeyStore)?(setEditorState(insertNewLine(editorState)),"handled"):"not-handled"},handleKeyCommand:function(command,editorState,eventTimeStamp,_ref2){var setEditorState=_ref2.setEditorState;if(deleteCommands.includes(command)&&focusableBlockIsSelected(editorState,blockKeyStore)){var key=editorState.getSelection().getStartKey(),newEditorState=removeBlock(editorState,key);if(newEditorState!==editorState)return setEditorState(newEditorState),"handled"}return"not-handled"},onChange:function(editorState){var contentState=editorState.getCurrentContent();if(!contentState.equals(lastContentState))return lastSelection=editorState.getSelection(),lastContentState=contentState,editorState;lastContentState=contentState;var selection=editorState.getSelection();if(lastSelection&&selection.equals(lastSelection))return lastSelection=editorState.getSelection(),editorState;var focusableBlockKeys=blockKeyStore.getAll();return lastSelection&&getBlockMapKeys(contentState,lastSelection.getStartKey(),lastSelection.getEndKey()).some((function(key){return focusableBlockKeys.includes(key)}))||getBlockMapKeys(contentState,selection.getStartKey(),selection.getEndKey()).some((function(key){return focusableBlockKeys.includes(key)}))?(lastSelection=selection,_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["EditorState"].forceSelection(editorState,editorState.getSelection())):editorState},keyBindingFn:function(evt,_ref3){var getEditorState=_ref3.getEditorState,setEditorState=_ref3.setEditorState,editorState=getEditorState();if(focusableBlockIsSelected(editorState,blockKeyStore)&&(37===evt.keyCode&&setSelection(getEditorState,setEditorState,"up",evt),39===evt.keyCode&&setSelection(getEditorState,setEditorState,"down",evt),38===evt.keyCode&&setSelection(getEditorState,setEditorState,"up",event),40===evt.keyCode))setSelection(getEditorState,setEditorState,"down",event);else if(!evt.shiftKey){if(37===evt.keyCode){var selection=editorState.getSelection(),selectionKey=selection.getAnchorKey(),beforeBlock=editorState.getCurrentContent().getBlockBefore(selectionKey);beforeBlock&&0===selection.getAnchorOffset()&&blockKeyStore.includes(beforeBlock.getKey())&&setSelection(getEditorState,setEditorState,"up",evt)}if(39===evt.keyCode){var _selection=editorState.getSelection(),_selectionKey=_selection.getFocusKey(),currentBlock=editorState.getCurrentContent().getBlockForKey(_selectionKey),afterBlock=editorState.getCurrentContent().getBlockAfter(_selectionKey),notAtomicAndLastPost="atomic"!==currentBlock.getType()&&currentBlock.getLength()===_selection.getFocusOffset();afterBlock&&notAtomicAndLastPost&&blockKeyStore.includes(afterBlock.getKey())&&setSelection(getEditorState,setEditorState,"down",evt)}if(38===evt.keyCode){var _selectionKey2=editorState.getSelection().getAnchorKey(),_beforeBlock=editorState.getCurrentContent().getBlockBefore(_selectionKey2);_beforeBlock&&blockKeyStore.includes(_beforeBlock.getKey())&&setSelection(getEditorState,setEditorState,"up",event)}if(40===evt.keyCode){var _selectionKey3=editorState.getSelection().getAnchorKey(),_afterBlock=editorState.getCurrentContent().getBlockAfter(_selectionKey3);_afterBlock&&blockKeyStore.includes(_afterBlock.getKey())&&setSelection(getEditorState,setEditorState,"down",event)}}},blockRendererFn:function(contentBlock,_ref4){var getEditorState=_ref4.getEditorState,setEditorState=_ref4.setEditorState;if("atomic"===contentBlock.getType()){var editorState=getEditorState();return{props:{isFocused:blockInSelection(editorState,contentBlock.getKey()),isCollapsedSelection:editorState.getSelection().isCollapsed(),setFocusToBlock:function(){setSelectionToBlock(getEditorState,setEditorState,contentBlock)}}}}},decorator:createDecorator({theme:theme,blockKeyStore:blockKeyStore})}}(),resizePlugin=(config={horizontal:"absolute",minWidth:350,theme:context.theme,isMobile:context.isMobile},{initialize:function(_ref){var getEditorRef=_ref.getEditorRef,getEditorState=_ref.getEditorState,setEditorState=_ref.setEditorState;store.getEditorRef=getEditorRef,store.getEditorState=getEditorState,store.setEditorState=setEditorState},decorator:createDecorator$1({config:config,store:store={getEditorRef:void 0,getEditorState:void 0,setEditorState:void 0}})}),listPlugin=function(config){var _a=__assign(__assign({},CONFIG_DEFAULTS),{olRegex:/1\./,allowNestedLists:!1}),allowNestedLists=_a.allowNestedLists,maxDepth=_a.maxDepth,olRegex=_a.olRegex,ulChars=_a.ulChars;if(maxDepth<1)throw Error("maxDepth cannot be "+maxDepth+" (must be a positive integer)");ulChars.forEach((function(char){if(1!==char.length)throw Error('ulChar "'+char+'" must be exactly one character long')}));var plugin={handleBeforeInput:function(chars,editorState,_eventTimeStamp,_a){var setEditorState=_a.setEditorState;if(" "===chars){var content=editorState.getCurrentContent(),selection=editorState.getSelection(),blockKey=selection.getStartKey(),block=content.getBlockForKey(blockKey);if("unstyled"!==block.getType())return"not-handled";var cursorPos=selection.getStartOffset(),text=block.getText()+" ",firstSpacePos=text.indexOf(" ");if(cursorPos===firstSpacePos){if(function(text,ulChars){return ulChars.includes(text[0])}(text,ulChars))return setEditorState(startList(editorState,content,blockKey,firstSpacePos,"unordered-list-item")),"handled";if(function(text,olRegex){return olRegex.test(text)}(text,olRegex))return setEditorState(startList(editorState,content,blockKey,firstSpacePos,"ordered-list-item")),"handled"}}return"not-handled"}};return allowNestedLists&&(plugin.keyBindingFn=function(e,_a){var getEditorState=_a.getEditorState,setEditorState=_a.setEditorState;if("Tab"===e.key){var editorState=getEditorState();setEditorState(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["RichUtils"].onTab(e,editorState,maxDepth))}return Object(_wix_draft_js__WEBPACK_IMPORTED_MODULE_8__["getDefaultKeyBinding"])(e)}),plugin}(),dndPlugin=createBlockDndPlugin(),handleDrop=dndPlugin.handleDrop;dndPlugin.handleDrop=function(handleDrop){return function(selection,dataTransfer,isInternal,_ref){var getEditorState=_ref.getEditorState,setEditorState=_ref.setEditorState,firstKey=getEditorState().getCurrentContent().getFirstBlock().key;if(selection.anchorKey!==firstKey||0!==selection.anchorOffset)return handleDrop(selection,dataTransfer,isInternal,{getEditorState:getEditorState,setEditorState:setEditorState})}}(handleDrop);var wixPluginsDecorators=lib_1(dndPlugin.decorator,resizePlugin.decorator,focusPlugin.decorator),wixPluginConfig=_extends_1(_extends_1({decorator:wixPluginsDecorators,commonPubsub:Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* simplePubsub */ "jb"])(),pluginDefaults:{}},context),context.config),wixPlugins=(plugins||[]).map((function(createPlugin){return createPlugin(wixPluginConfig)})),pluginButtons=[],externalizedButtonProps=[],pluginTextButtons=[],pluginStyleFns=[];return wixPlugins.forEach((function(wixPlugin){externalizedButtonProps=[].concat(externalizedButtonProps,wixPlugin.externalizedButtonProps||[]),pluginButtons=[].concat(pluginButtons,wixPlugin.InsertPluginButtons||[]),pluginTextButtons=[].concat(pluginTextButtons,wixPlugin.TextButtonMapper?[wixPlugin.TextButtonMapper(wixPlugin.pubsub)]:[]),pluginStyleFns=[].concat(pluginStyleFns,wixPlugin.customStyleFn?[wixPlugin.customStyleFn]:[])})),{pluginInstances:[resizePlugin,focusPlugin,dndPlugin,listPlugin].concat(wixPlugins),pluginButtons:pluginButtons,pluginTextButtons:pluginTextButtons,pluginStyleFns:pluginStyleFns,externalizedButtonProps:externalizedButtonProps}}({plugins:plugins,context:this.contextualData}),pluginInstances=_createPlugins.pluginInstances,pluginButtons=_createPlugins.pluginButtons,pluginTextButtons=_createPlugins.pluginTextButtons,pluginStyleFns=_createPlugins.pluginStyleFns,externalizedButtonProps=_createPlugins.externalizedButtonProps;this.pluginButtonProps=externalizedButtonProps,this.initEditorToolbars(pluginButtons,pluginTextButtons),this.pluginKeyBindings=function(pluginTextButtons){return pluginTextButtons.reduce((function(bindings,buttonData,i){if(buttonData){var buttonBindings=Object.keys(buttonData).reduce((function(buttonBindings,key){if(buttonData[key].keyBindings&&buttonData[key].keyBindings.length>0){var buttonCommands=buttonData[key].keyBindings.map((function(binding){return _extends_1(_extends_1({},binding.keyCommand),{},{command:binding.keyCommand.command+"_"+i})})),buttonCommandHandlers={};return buttonData[key].keyBindings.forEach((function(binding){buttonCommandHandlers[binding.keyCommand.command+"_"+i]=binding.commandHandler})),{commands:[].concat(buttonBindings.commands,buttonCommands),commandHandlers:_extends_1(_extends_1({},buttonBindings.commandHandlers),buttonCommandHandlers)}}return buttonBindings}),{commands:[],commandHandlers:{}});return{commands:[].concat(bindings.commands,buttonBindings.commands),commandHandlers:_extends_1(_extends_1({},bindings.commandHandlers),buttonBindings.commandHandlers)}}return bindings}),{commands:[],commandHandlers:{}})}(pluginTextButtons),this.plugins=[].concat(pluginInstances,Object.values(this.toolbars)),this.customStyleFn=(styleFns=[].concat(pluginStyleFns,[customStyleFn]),function(style,block){return styleFns.reduce((function(cssStyle,fn){return void 0===fn&&(fn=function(){return{}}),_extends_1(_extends_1({},cssStyle),fn(style,block))}),{})})},_proto.dispatchPluginButtonsReady=function(pluginButtonProps){this.toolbars[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].EXTERNAL].shouldCreate&&__webpack_require__.e(/* import() */ 2).then(__webpack_require__.bind(null, 1035)).then((function(_ref7){return(0,_ref7.emit)(_ref7.EVENTS.PLUGIN_BUTTONS_READY,pluginButtonProps)}))},_proto.initEditorToolbars=function(pluginButtons,pluginTextButtons){var textAlignment=this.props.textAlignment,buttons={pluginButtons:pluginButtons,pluginTextButtons:pluginTextButtons};this.toolbars=function(_ref){var _externalToolbarSetti,buttons=_ref.buttons,textAlignment=_ref.textAlignment,refId=_ref.refId,context=_ref.context,_context$config=context.config,_context$config$uiSet=_context$config.uiSettings,uiSettings=void 0===_context$config$uiSet?{}:_context$config$uiSet,_context$config$getTo=_context$config.getToolbarSettings,getToolbarSettings=void 0===_context$config$getTo?function(){return[]}:_context$config$getTo,pluginButtons=buttons.pluginButtons,pluginTextButtons=buttons.pluginTextButtons,isMobile=context.isMobile,_context$theme=context.theme,theme=void 0===_context$theme?{}:_context$theme,pubsub=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* simplePubsub */ "jb"])(),textButtons={mobile:mergeButtonLists(MobileTextButtonList,reducePluginTextButtonNames(pluginTextButtons,(function(_ref2){return!1!==_ref2.isMobile})),"mobile"),desktop:mergeButtonLists(DesktopTextButtonList,reducePluginTextButtonNames(pluginTextButtons),"desktop")},pluginTextButtonsByFormFactor={mobile:reducePluginTextButtons(pluginTextButtons,(function(_ref3){return!1!==_ref3.isMobile})),desktop:reducePluginTextButtons(pluginTextButtons)},defaultSettings=function(_ref){var pluginButtons=_ref.pluginButtons,textButtons=_ref.textButtons,pluginTextButtons=_ref.pluginTextButtons;return[{name:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].EXTERNAL,shouldCreate:function(){return{desktop:!1,mobile:{android:!1,ios:!1}}}},{name:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].SIDE,shouldCreate:function(){var shouldCreate=pluginButtons.filter((function(_ref2){return _ref2.buttonSettings.toolbars.includes(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].SIDE)})).length>0;return{desktop:shouldCreate,mobile:{ios:shouldCreate,android:shouldCreate}}},getPositionOffset:function(){return{desktop:{x:-40,y:0},mobile:{ios:{x:0,y:0},android:{x:0,y:0}}}},getDisplayOptions:function(){return defaultDisplayOptions},getToolbarDecorationFn:function(){return defaultToolbarDecorationFn},getButtons:function(){var buttons=pluginButtons.filter((function(_ref3){return _ref3.buttonSettings.toolbars.includes(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].SIDE)})).map((function(_ref4){var component=_ref4.component,_ref4$buttonSettings=_ref4.buttonSettings;return{component:component,name:_ref4$buttonSettings.name,section:_ref4$buttonSettings.section||"BlockToolbar_Section_Basic"}}));return{desktop:buttons,mobile:{ios:buttons,android:buttons}}},getTextPluginButtons:function(){return defaultTextPluginButtons},getVisibilityFn:function(){return{desktop:defaultSideToolbarVisibilityFn,mobile:{ios:defaultSideToolbarVisibilityFn,android:defaultSideToolbarVisibilityFn}}},getInstance:createSideToolbar$1},{name:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].MOBILE,shouldCreate:function(){return{desktop:!1,mobile:{ios:!0,android:!0}}},getPositionOffset:function(){return defaultOffset},getDisplayOptions:function(){return defaultDisplayOptions},getToolbarDecorationFn:function(){return defaultToolbarDecorationFn},getButtons:function(){return{desktop:[],mobile:{ios:textButtons.mobile,android:textButtons.mobile}}},getTextPluginButtons:function(){return{desktop:{},mobile:{ios:pluginTextButtons.mobile,android:pluginTextButtons.mobile}}},getVisibilityFn:function(){return{desktop:function(){return!1},mobile:{ios:function(){return!0},android:function(){return!0}}}},getInstance:createMobileToolbar},{name:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].FOOTER,shouldCreate:function(){return{desktop:pluginButtons.filter((function(_ref5){return _ref5.buttonSettings.toolbars.includes(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].FOOTER)})).length>0,mobile:{ios:!1,android:!1}}},getPositionOffset:function(){return defaultOffset},getDisplayOptions:function(){return defaultDisplayOptions},getToolbarDecorationFn:function(){return defaultToolbarDecorationFn},getButtons:function(){return{desktop:pluginButtons.filter((function(_ref6){return _ref6.buttonSettings.toolbars.includes(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].FOOTER)})).map((function(_ref7){return _ref7.component})),mobile:{ios:[],android:[]}}},getTextPluginButtons:function(){return defaultTextPluginButtons},getVisibilityFn:function(){return{desktop:function(){return!0},mobile:{ios:function(){return!1},android:function(){return!1}}}},getInstance:createFooterToolbar},{name:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].STATIC,shouldCreate:function(){return{desktop:!0,mobile:{ios:!0,android:!1}}},getPositionOffset:function(){return defaultOffset},getDisplayOptions:function(){return defaultDisplayOptions},getToolbarDecorationFn:function(){return defaultToolbarDecorationFn},getButtons:function(){return{desktop:textButtons.desktop,mobile:{ios:[],android:[]}}},getTextPluginButtons:function(){return{desktop:pluginTextButtons.desktop,mobile:{ios:{},android:{}}}},getVisibilityFn:function(){return{desktop:function(){return!0},mobile:{ios:function(){return!0},android:function(){return!1}}}},getInstance:createStaticTextToolbar},{name:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].INLINE,shouldCreate:function(){return{desktop:!0,mobile:{ios:!1,android:!1}}},getPositionOffset:function(){return defaultOffset},getDisplayOptions:function(){return defaultDisplayOptions},getToolbarDecorationFn:function(){return defaultToolbarDecorationFn},getButtons:function(){return{desktop:textButtons.desktop,mobile:{ios:textButtons.mobile,android:[]}}},getTextPluginButtons:function(){return{desktop:pluginTextButtons.desktop,mobile:{ios:pluginTextButtons.mobile,android:{}}}},getVisibilityFn:function(){return{desktop:defaultInlineToolbarVisibilityFn,mobile:{ios:defaultInlineToolbarVisibilityFn,android:defaultInlineToolbarVisibilityFn}}},getInstance:createInlineTextToolbar}]}({pluginButtons:pluginButtons,textButtons:textButtons,pluginTextButtons:pluginTextButtonsByFormFactor}),customSettings=getToolbarSettings({pluginButtons:pluginButtons,textButtons:textButtons,pluginTextButtons:pluginTextButtonsByFormFactor}),toolbarSettings=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* mergeToolbarSettings */ "eb"])({defaultSettings:defaultSettings,customSettings:customSettings}),toolbars={},deviceName=isMobile?Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* isiOS */ "cb"])()?"mobile.ios":"mobile.android":"desktop";toolbarSettings.filter((function(_ref4){var name=_ref4.name;return name!==wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].PLUGIN&&name!==wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].EXTERNAL})).filter((function(_ref5){var shouldCreate=_ref5.shouldCreate;return Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(shouldCreate(),deviceName,!0)})).forEach((function(_ref6){var name=_ref6.name,getButtons=_ref6.getButtons,getTextPluginButtons=_ref6.getTextPluginButtons,getPositionOffset=_ref6.getPositionOffset,getVisibilityFn=_ref6.getVisibilityFn,getInstance=_ref6.getInstance,getDisplayOptions=_ref6.getDisplayOptions,getToolbarDecorationFn=_ref6.getToolbarDecorationFn,addPluginMenuConfig=_ref6.addPluginMenuConfig;toolbars[name]=getInstance(_extends_1(_extends_1({},context),{},{displayOptions:Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(getDisplayOptions(),deviceName,{displayMode:wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* DISPLAY_MODE */ "k"].NORMAL}),toolbarDecorationFn:Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(getToolbarDecorationFn(),deviceName,(function(){return null})),textPluginButtons:Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(getTextPluginButtons(),deviceName,[]),offset:Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(getPositionOffset(),deviceName,{x:0,y:0}),visibilityFn:Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(getVisibilityFn(),deviceName,(function(){return!0})),buttons:Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(getButtons(),deviceName,[]),theme:_extends_1(_extends_1({},Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getToolbarTheme */ "W"])(theme,name.toLowerCase())),theme),defaultTextAlignment:textAlignment,pluginButtons:pluginButtons,uiSettings:uiSettings,pubsub:pubsub,refId:refId,addPluginMenuConfig:addPluginMenuConfig}))}));var externalToolbarSettings=toolbarSettings.filter((function(_ref7){return _ref7.name===wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].EXTERNAL}))[0]||{};return toolbars[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* TOOLBARS */ "C"].EXTERNAL]={shouldCreate:Object(lodash__WEBPACK_IMPORTED_MODULE_2__["get"])(null===(_externalToolbarSetti=externalToolbarSettings.shouldCreate)||void 0===_externalToolbarSetti?void 0:_externalToolbarSetti.call(externalToolbarSettings),deviceName,!1)},toolbars}({buttons:buttons,textAlignment:textAlignment,refId:this.refId,context:this.contextualData})},_proto.getInitialEditorState=function(){var _this$props5=this.props,editorState=_this$props5.editorState,initialState=_this$props5.initialState,anchorTarget=_this$props5.anchorTarget,relValue=_this$props5.relValue,_this$props5$normaliz=_this$props5.normalize.disableInlineImages;if(editorState)return editorState;if(initialState){var rawContentState=Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["normalizeInitialState"])(initialState,{anchorTarget:anchorTarget,relValue:relValue,disableInlineImages:void 0!==_this$props5$normaliz&&_this$props5$normaliz});return wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorState */ "n"].createWithContent(Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* convertFromRaw */ "H"])(rawContentState))}var emptyContentState=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* convertFromRaw */ "H"])({entityMap:{},blocks:[{text:"",key:"foo",type:"unstyled",entityRanges:[]}]});return wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorState */ "n"].createWithContent(emptyContentState)},_proto.componentWillReceiveProps=function(nextProps){this.props.editorState!==nextProps.editorState&&this.setState({editorState:nextProps.editorState}),this.props.theme!==nextProps.theme&&this.setState({theme:nextProps.theme}),this.props.textToolbarType!==nextProps.textToolbarType&&this.setState({textToolbarType:nextProps.textToolbarType}),this.fixFileHandlersName(nextProps.helpers)},_proto.fixFileHandlersName=function(helpers){(null==helpers?void 0:helpers.onFilesChange)&&(helpers.handleFileUpload=helpers.onFilesChange,delete helpers.onFilesChange)},_proto.findFocusableChildForElement=function(id){var element=document.getElementById(id);return element&&element.querySelector('*[tabindex="0"]')},_proto.render=function(){var _this3=this,onError=this.props.onError;try{var _classNames;if(this.state.error)return onError(this.state.error),null;var isMobile=this.props.isMobile,theme=this.contextualData.theme,wrapperClassName=classnames__WEBPACK_IMPORTED_MODULE_5___default()("QiJxn",styles$4.wrapper,theme.wrapper,((_classNames={})[styles$4.desktop]=!isMobile,_classNames[theme.desktop]=!isMobile&&theme&&theme.desktop,_classNames));return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_measure__WEBPACK_IMPORTED_MODULE_9__[/* default */ "a"],{bounds:!0,onResize:this.onResize},(function(_ref8){var measureRef=_ref8.measureRef;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:_this3.props.style,ref:measureRef,className:wrapperClassName,dir:Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["getLangDir"])(_this3.props.locale)},_this3.renderStyleTag(),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_5___default()(styles$4.editor,theme.editor)},_this3.renderAccessibilityListener(),_this3.renderEditor(),_this3.renderToolbars(),_this3.renderInlineModals(),_this3.renderTooltipHost()))}))}catch(err){return onError(err),null}},RichContentEditor}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]);RichContentEditor.publish=(_ref9=asyncToGenerator(regenerator.mark((function _callee2(postId,editorState,callBack){var postSummary;return regenerator.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:void 0===editorState&&(editorState={}),void 0===callBack&&(callBack=function(){return!0}),postSummary=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getPostContentSummary */ "T"])(editorState),callBack(_extends_1({postId:postId},postSummary));case 4:case"end":return _context2.stop()}}),_callee2)}))),function(_x2,_x3,_x4){return _ref9.apply(this,arguments)}),RichContentEditor.defaultProps={config:{},spellCheck:!0,customStyleFn:function(){return{}},locale:"en",onError:function(err){throw err},normalize:{}};var WrappedEditor=Object(wix_rich_content_common__WEBPACK_IMPORTED_MODULE_3__["withI18n"])(RichContentEditor,wix_rich_content_common_dist_statics_locale_messages_en_json__WEBPACK_IMPORTED_MODULE_4__);(function(_Component){function I18nRichContentEditor(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).setEditorRef=function(editor){return _this.editor=editor?editor.getWrappedInstance():void 0},_this.getToolbars=function(){return _this.editor.getToolbars()},_this.focus=function(){return _this.editor.focus()},_this.blur=function(){return _this.editor.blur()},_this.publish=function(postId){return _this.editor.publish(postId)},_this}return inheritsLoose(I18nRichContentEditor,_Component),I18nRichContentEditor.prototype.render=function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(WrappedEditor,_extends_1({},this.props,{ref:this.setEditorRef}))},I18nRichContentEditor}(react__WEBPACK_IMPORTED_MODULE_1__["Component"])).displayName="RichContentEditor";var _Modals,MobileLinkModal=function(_Component){function MobileLinkModal(){return _Component.apply(this,arguments)||this}return inheritsLoose(MobileLinkModal,_Component),MobileLinkModal.prototype.render=function(){var _this$props=this.props,url=_this$props.url,targetBlank=_this$props.targetBlank,anchorTarget=_this$props.anchorTarget,relValue=_this$props.relValue,nofollow=_this$props.nofollow,theme=_this$props.theme,isMobile=_this$props.isMobile,isActive=_this$props.isActive,onDone=_this$props.onDone,onCancel=_this$props.onCancel,onDelete=_this$props.onDelete,t=_this$props.t,uiSettings=_this$props.uiSettings,unchangedUrl=_this$props.unchangedUrl,mobileLinkModalTitle=t("MobileLinkModal_Title");return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"_2LnmZ"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"_3W9TN"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(LinkIcon,null)),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3",{id:"mob_link_modal_hdr",className:"_3ZL4g"},mobileLinkModalTitle)),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* LinkPanelContainer */ "r"],{url:url,targetBlank:targetBlank,anchorTarget:anchorTarget,relValue:relValue,nofollow:nofollow,theme:theme,isActive:isActive,isMobile:isMobile,onDone:onDone,onCancel:onCancel,hidePanel:onCancel,onDelete:onDelete,t:t,ariaProps:{"aria-labelledby":"mob_link_modal_hdr"},uiSettings:uiSettings,unchangedUrl:unchangedUrl}))},MobileLinkModal}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),MobileBlockLinkModal=function(_Component){function MobileBlockLinkModal(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).hidePopup=function(){return _this.props.hidePopup()},_this.wrapBlockInLink=function(_ref){var url=_ref.url,targetBlank=_ref.targetBlank,nofollow=_ref.nofollow,_this$props=_this.props,pubsub=_this$props.pubsub,anchorTarget=_this$props.anchorTarget,relValue=_this$props.relValue,target="_blank",rel="nofollow";targetBlank||(target="_blank"!==anchorTarget?anchorTarget:"_self"),nofollow||(rel="nofollow"!==relValue?relValue:"noopener"),Object(lodash__WEBPACK_IMPORTED_MODULE_2__["isEmpty"])(url)?pubsub.setBlockData({key:"componentLink",item:null}):pubsub.setBlockData({key:"componentLink",item:{url:url,target:target,rel:rel}}),_this.hidePopup()},_this.deleteLink=function(){_this.props.pubsub.setBlockData({key:"componentLink",item:null})},_this}return inheritsLoose(MobileBlockLinkModal,_Component),MobileBlockLinkModal.prototype.render=function(){var _this$props2=this.props,pubsub=_this$props2.pubsub,theme=_this$props2.theme,isMobile=_this$props2.isMobile,anchorTarget=_this$props2.anchorTarget,relValue=_this$props2.relValue,t=_this$props2.t,uiSettings=_this$props2.uiSettings,unchangedUrl=_this$props2.unchangedUrl,componentLink=pubsub.getBlockData({key:"componentLink"}),_ref2=componentLink||{},url=_ref2.url,target=_ref2.target,rel=_ref2.rel,targetBlank=target?"_blank"===target:"_blank"===anchorTarget,nofollow=rel?"nofollow"===rel:"nofollow"===relValue;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(MobileLinkModal,{url:url,targetBlank:targetBlank,nofollow:nofollow,theme:theme,isActive:!!componentLink,isMobile:isMobile,anchorTarget:anchorTarget,relValue:relValue,onDone:this.wrapBlockInLink,onCancel:this.hidePopup,onDelete:this.deleteLink,uiSettings:uiSettings,t:t,unchangedUrl:unchangedUrl})},MobileBlockLinkModal}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),MobileTextLinkModal=function(_Component){function MobileTextLinkModal(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).hidePopup=function(){(0,_this.props.hidePopup)()},_this.onCancel=function(){var _this$props=_this.props,getEditorState=_this$props.getEditorState,setEditorState=_this$props.setEditorState,editorState=getEditorState();setEditorState(Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* setForceSelection */ "hb"])(editorState,editorState.getSelection())),_this.hidePopup()},_this.createLinkEntity=function(_ref){var url=_ref.url,targetBlank=_ref.targetBlank,nofollow=_ref.nofollow;if(!Object(lodash__WEBPACK_IMPORTED_MODULE_2__["isEmpty"])(url)){var _this$props2=_this.props,getEditorState=_this$props2.getEditorState,setEditorState=_this$props2.setEditorState,anchorTarget=_this$props2.anchorTarget,relValue=_this$props2.relValue;setEditorState((0,_this$props2.insertLinkFn)(getEditorState(),{url:url,targetBlank:targetBlank,nofollow:nofollow,anchorTarget:anchorTarget,relValue:relValue}))}_this.hidePopup()},_this.deleteLink=function(){var _this$props3=_this.props,getEditorState=_this$props3.getEditorState,setEditorState=_this$props3.setEditorState,closeInlinePluginToolbar=_this$props3.closeInlinePluginToolbar,editorState=getEditorState();setEditorState(Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* removeLinksInSelection */ "fb"])(editorState,setEditorState)),closeInlinePluginToolbar()},_this}return inheritsLoose(MobileTextLinkModal,_Component),MobileTextLinkModal.prototype.render=function(){var _this$props4=this.props,getEditorState=_this$props4.getEditorState,theme=_this$props4.theme,isMobile=_this$props4.isMobile,anchorTarget=_this$props4.anchorTarget,relValue=_this$props4.relValue,t=_this$props4.t,uiSettings=_this$props4.uiSettings,linkData=Object(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* getLinkDataInSelection */ "R"])(getEditorState()),_ref2=linkData||{},url=_ref2.url,target=_ref2.target,rel=_ref2.rel,targetBlank=target?"_blank"===target:"_blank"===anchorTarget,nofollow=rel?"nofollow"===rel:"nofollow"===relValue;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(MobileLinkModal,{url:url,targetBlank:targetBlank,nofollow:nofollow,theme:theme,isActive:!Object(lodash__WEBPACK_IMPORTED_MODULE_2__["isEmpty"])(linkData),isMobile:isMobile,anchorTarget:anchorTarget,relValue:relValue,onDone:this.createLinkEntity,onCancel:this.onCancel,onDelete:this.deleteLink,uiSettings:uiSettings,t:t})},MobileTextLinkModal}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]),Modals=((_Modals={})[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorModals */ "m"].MOBILE_ADD_PLUGIN]=AddPluginMenu,_Modals[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorModals */ "m"].MOBILE_BLOCK_LINK_MODAL]=MobileBlockLinkModal,_Modals[wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* EditorModals */ "m"].MOBILE_TEXT_LINK_MODAL]=MobileTextLinkModal,_Modals),RichContentEditorModal=function(_ref){var modalName=_ref.modalName,modalElement=_ref.modalElement,modalsMap=_ref.modalsMap,modalProps=objectWithoutPropertiesLoose(_ref,["modalName","modalElement","modalsMap"]),element=_extends_1(_extends_1({},Modals),modalsMap)[modalName]||modalElement;return element?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(wix_rich_content_editor_common__WEBPACK_IMPORTED_MODULE_10__[/* RichContentModal */ "v"],_extends_1({modalElement:element},modalProps)):(console.error("Attempted to open unknown external modal '"+modalName+"'"),null)},EditorModal=function(_super){function EditorModal(){return null!==_super&&_super.apply(this,arguments)||this}return Object(_index_dd3f93e0_js__WEBPACK_IMPORTED_MODULE_0__[/* _ */ "b"])(EditorModal,_super),EditorModal.prototype.componentDidMount=function(){react_modal__WEBPACK_IMPORTED_MODULE_14___default.a.setAppElement("body")},EditorModal.prototype.render=function(){var _a=this.props,isOpen=_a.isOpen,contentLabel=_a.contentLabel,style=_a.style,role=_a.role,onRequestClose=_a.onRequestClose,ModalsMap=_a.ModalsMap,locale=_a.locale,modalProps=Object(_index_dd3f93e0_js__WEBPACK_IMPORTED_MODULE_0__[/* b */ "c"])(_a,["isOpen","contentLabel","style","role","onRequestClose","ModalsMap","locale"]);return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_modal__WEBPACK_IMPORTED_MODULE_14___default.a,{isOpen:isOpen,contentLabel:contentLabel,style:style,role:role,onRequestClose:onRequestClose},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(RichContentEditorModal,Object(_index_dd3f93e0_js__WEBPACK_IMPORTED_MODULE_0__[/* c */ "d"])({modalsMap:ModalsMap,locale:locale},modalProps)))},EditorModal}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]);
//# sourceMappingURL=EditorModal-3e88b00c.js.map


/***/ }),

/***/ 897:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.bodyOpenClassName = exports.portalClassName = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__(22);

var _reactDom2 = _interopRequireDefault(_reactDom);

var _propTypes = __webpack_require__(8);

var _propTypes2 = _interopRequireDefault(_propTypes);

var _ModalPortal = __webpack_require__(898);

var _ModalPortal2 = _interopRequireDefault(_ModalPortal);

var _ariaAppHider = __webpack_require__(860);

var ariaAppHider = _interopRequireWildcard(_ariaAppHider);

var _safeHTMLElement = __webpack_require__(846);

var _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);

var _reactLifecyclesCompat = __webpack_require__(904);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var portalClassName = exports.portalClassName = "ReactModalPortal";
var bodyOpenClassName = exports.bodyOpenClassName = "ReactModal__Body--open";

var isReact16 = _reactDom2.default.createPortal !== undefined;
var createPortal = isReact16 ? _reactDom2.default.createPortal : _reactDom2.default.unstable_renderSubtreeIntoContainer;

function getParentElement(parentSelector) {
  return parentSelector();
}

var Modal = function (_Component) {
  _inherits(Modal, _Component);

  function Modal() {
    var _ref;

    var _temp, _this, _ret;

    _classCallCheck(this, Modal);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Modal.__proto__ || Object.getPrototypeOf(Modal)).call.apply(_ref, [this].concat(args))), _this), _this.removePortal = function () {
      !isReact16 && _reactDom2.default.unmountComponentAtNode(_this.node);
      var parent = getParentElement(_this.props.parentSelector);
      parent.removeChild(_this.node);
    }, _this.portalRef = function (ref) {
      _this.portal = ref;
    }, _this.renderPortal = function (props) {
      var portal = createPortal(_this, _react2.default.createElement(_ModalPortal2.default, _extends({ defaultStyles: Modal.defaultStyles }, props)), _this.node);
      _this.portalRef(portal);
    }, _temp), _possibleConstructorReturn(_this, _ret);
  }

  _createClass(Modal, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      if (!_safeHTMLElement.canUseDOM) return;

      if (!isReact16) {
        this.node = document.createElement("div");
      }
      this.node.className = this.props.portalClassName;

      var parent = getParentElement(this.props.parentSelector);
      parent.appendChild(this.node);

      !isReact16 && this.renderPortal(this.props);
    }
  }, {
    key: "getSnapshotBeforeUpdate",
    value: function getSnapshotBeforeUpdate(prevProps) {
      var prevParent = getParentElement(prevProps.parentSelector);
      var nextParent = getParentElement(this.props.parentSelector);
      return { prevParent: prevParent, nextParent: nextParent };
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, _, snapshot) {
      if (!_safeHTMLElement.canUseDOM) return;
      var _props = this.props,
          isOpen = _props.isOpen,
          portalClassName = _props.portalClassName;


      if (prevProps.portalClassName !== portalClassName) {
        this.node.className = portalClassName;
      }

      // Stop unnecessary renders if modal is remaining closed
      if (!prevProps.isOpen && !isOpen) return;

      var prevParent = snapshot.prevParent,
          nextParent = snapshot.nextParent;

      if (nextParent !== prevParent) {
        prevParent.removeChild(this.node);
        nextParent.appendChild(this.node);
      }

      !isReact16 && this.renderPortal(this.props);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (!_safeHTMLElement.canUseDOM || !this.node || !this.portal) return;

      var state = this.portal.state;
      var now = Date.now();
      var closesAt = state.isOpen && this.props.closeTimeoutMS && (state.closesAt || now + this.props.closeTimeoutMS);

      if (closesAt) {
        if (!state.beforeClose) {
          this.portal.closeWithTimeout();
        }

        setTimeout(this.removePortal, closesAt - now);
      } else {
        this.removePortal();
      }
    }
  }, {
    key: "render",
    value: function render() {
      if (!_safeHTMLElement.canUseDOM || !isReact16) {
        return null;
      }

      if (!this.node && isReact16) {
        this.node = document.createElement("div");
      }

      return createPortal(_react2.default.createElement(_ModalPortal2.default, _extends({
        ref: this.portalRef,
        defaultStyles: Modal.defaultStyles
      }, this.props)), this.node);
    }
  }], [{
    key: "setAppElement",
    value: function setAppElement(element) {
      ariaAppHider.setElement(element);
    }

    /* eslint-disable react/no-unused-prop-types */

    /* eslint-enable react/no-unused-prop-types */

  }]);

  return Modal;
}(_react.Component);

Modal.propTypes = {
  isOpen: _propTypes2.default.bool.isRequired,
  style: _propTypes2.default.shape({
    content: _propTypes2.default.object,
    overlay: _propTypes2.default.object
  }),
  portalClassName: _propTypes2.default.string,
  bodyOpenClassName: _propTypes2.default.string,
  htmlOpenClassName: _propTypes2.default.string,
  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({
    base: _propTypes2.default.string.isRequired,
    afterOpen: _propTypes2.default.string.isRequired,
    beforeClose: _propTypes2.default.string.isRequired
  })]),
  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({
    base: _propTypes2.default.string.isRequired,
    afterOpen: _propTypes2.default.string.isRequired,
    beforeClose: _propTypes2.default.string.isRequired
  })]),
  appElement: _propTypes2.default.instanceOf(_safeHTMLElement2.default),
  onAfterOpen: _propTypes2.default.func,
  onRequestClose: _propTypes2.default.func,
  closeTimeoutMS: _propTypes2.default.number,
  ariaHideApp: _propTypes2.default.bool,
  shouldFocusAfterRender: _propTypes2.default.bool,
  shouldCloseOnOverlayClick: _propTypes2.default.bool,
  shouldReturnFocusAfterClose: _propTypes2.default.bool,
  parentSelector: _propTypes2.default.func,
  aria: _propTypes2.default.object,
  role: _propTypes2.default.string,
  contentLabel: _propTypes2.default.string,
  shouldCloseOnEsc: _propTypes2.default.bool,
  overlayRef: _propTypes2.default.func,
  contentRef: _propTypes2.default.func
};
Modal.defaultProps = {
  isOpen: false,
  portalClassName: portalClassName,
  bodyOpenClassName: bodyOpenClassName,
  ariaHideApp: true,
  closeTimeoutMS: 0,
  shouldFocusAfterRender: true,
  shouldCloseOnEsc: true,
  shouldCloseOnOverlayClick: true,
  shouldReturnFocusAfterClose: true,
  parentSelector: function parentSelector() {
    return document.body;
  }
};
Modal.defaultStyles = {
  overlay: {
    position: "fixed",
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    backgroundColor: "rgba(255, 255, 255, 0.75)"
  },
  content: {
    position: "absolute",
    top: "40px",
    left: "40px",
    right: "40px",
    bottom: "40px",
    border: "1px solid #ccc",
    background: "#fff",
    overflow: "auto",
    WebkitOverflowScrolling: "touch",
    borderRadius: "4px",
    outline: "none",
    padding: "20px"
  }
};


(0, _reactLifecyclesCompat.polyfill)(Modal);

exports.default = Modal;

/***/ }),

/***/ 898:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(1);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(8);

var _propTypes2 = _interopRequireDefault(_propTypes);

var _focusManager = __webpack_require__(899);

var focusManager = _interopRequireWildcard(_focusManager);

var _scopeTab = __webpack_require__(900);

var _scopeTab2 = _interopRequireDefault(_scopeTab);

var _ariaAppHider = __webpack_require__(860);

var ariaAppHider = _interopRequireWildcard(_ariaAppHider);

var _classList = __webpack_require__(903);

var classList = _interopRequireWildcard(_classList);

var _safeHTMLElement = __webpack_require__(846);

var _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// so that our CSS is statically analyzable
var CLASS_NAMES = {
  overlay: "ReactModal__Overlay",
  content: "ReactModal__Content"
};

var TAB_KEY = 9;
var ESC_KEY = 27;

var ariaHiddenInstances = 0;

var ModalPortal = function (_Component) {
  _inherits(ModalPortal, _Component);

  function ModalPortal(props) {
    _classCallCheck(this, ModalPortal);

    var _this = _possibleConstructorReturn(this, (ModalPortal.__proto__ || Object.getPrototypeOf(ModalPortal)).call(this, props));

    _this.setOverlayRef = function (overlay) {
      _this.overlay = overlay;
      _this.props.overlayRef && _this.props.overlayRef(overlay);
    };

    _this.setContentRef = function (content) {
      _this.content = content;
      _this.props.contentRef && _this.props.contentRef(content);
    };

    _this.afterClose = function () {
      var _this$props = _this.props,
          appElement = _this$props.appElement,
          ariaHideApp = _this$props.ariaHideApp,
          htmlOpenClassName = _this$props.htmlOpenClassName,
          bodyOpenClassName = _this$props.bodyOpenClassName;

      // Remove classes.

      classList.remove(document.body, bodyOpenClassName);

      htmlOpenClassName && classList.remove(document.getElementsByTagName("html")[0], htmlOpenClassName);

      // Reset aria-hidden attribute if all modals have been removed
      if (ariaHideApp && ariaHiddenInstances > 0) {
        ariaHiddenInstances -= 1;

        if (ariaHiddenInstances === 0) {
          ariaAppHider.show(appElement);
        }
      }

      if (_this.props.shouldFocusAfterRender) {
        if (_this.props.shouldReturnFocusAfterClose) {
          focusManager.returnFocus();
          focusManager.teardownScopedFocus();
        } else {
          focusManager.popWithoutFocus();
        }
      }
    };

    _this.open = function () {
      _this.beforeOpen();
      if (_this.state.afterOpen && _this.state.beforeClose) {
        clearTimeout(_this.closeTimer);
        _this.setState({ beforeClose: false });
      } else {
        if (_this.props.shouldFocusAfterRender) {
          focusManager.setupScopedFocus(_this.node);
          focusManager.markForFocusLater();
        }

        _this.setState({ isOpen: true }, function () {
          _this.setState({ afterOpen: true });

          if (_this.props.isOpen && _this.props.onAfterOpen) {
            _this.props.onAfterOpen();
          }
        });
      }
    };

    _this.close = function () {
      if (_this.props.closeTimeoutMS > 0) {
        _this.closeWithTimeout();
      } else {
        _this.closeWithoutTimeout();
      }
    };

    _this.focusContent = function () {
      return _this.content && !_this.contentHasFocus() && _this.content.focus();
    };

    _this.closeWithTimeout = function () {
      var closesAt = Date.now() + _this.props.closeTimeoutMS;
      _this.setState({ beforeClose: true, closesAt: closesAt }, function () {
        _this.closeTimer = setTimeout(_this.closeWithoutTimeout, _this.state.closesAt - Date.now());
      });
    };

    _this.closeWithoutTimeout = function () {
      _this.setState({
        beforeClose: false,
        isOpen: false,
        afterOpen: false,
        closesAt: null
      }, _this.afterClose);
    };

    _this.handleKeyDown = function (event) {
      if (event.keyCode === TAB_KEY) {
        (0, _scopeTab2.default)(_this.content, event);
      }

      if (_this.props.shouldCloseOnEsc && event.keyCode === ESC_KEY) {
        event.stopPropagation();
        _this.requestClose(event);
      }
    };

    _this.handleOverlayOnClick = function (event) {
      if (_this.shouldClose === null) {
        _this.shouldClose = true;
      }

      if (_this.shouldClose && _this.props.shouldCloseOnOverlayClick) {
        if (_this.ownerHandlesClose()) {
          _this.requestClose(event);
        } else {
          _this.focusContent();
        }
      }
      _this.shouldClose = null;
    };

    _this.handleContentOnMouseUp = function () {
      _this.shouldClose = false;
    };

    _this.handleOverlayOnMouseDown = function (event) {
      if (!_this.props.shouldCloseOnOverlayClick && event.target == _this.overlay) {
        event.preventDefault();
      }
    };

    _this.handleContentOnClick = function () {
      _this.shouldClose = false;
    };

    _this.handleContentOnMouseDown = function () {
      _this.shouldClose = false;
    };

    _this.requestClose = function (event) {
      return _this.ownerHandlesClose() && _this.props.onRequestClose(event);
    };

    _this.ownerHandlesClose = function () {
      return _this.props.onRequestClose;
    };

    _this.shouldBeClosed = function () {
      return !_this.state.isOpen && !_this.state.beforeClose;
    };

    _this.contentHasFocus = function () {
      return document.activeElement === _this.content || _this.content.contains(document.activeElement);
    };

    _this.buildClassName = function (which, additional) {
      var classNames = (typeof additional === "undefined" ? "undefined" : _typeof(additional)) === "object" ? additional : {
        base: CLASS_NAMES[which],
        afterOpen: CLASS_NAMES[which] + "--after-open",
        beforeClose: CLASS_NAMES[which] + "--before-close"
      };
      var className = classNames.base;
      if (_this.state.afterOpen) {
        className = className + " " + classNames.afterOpen;
      }
      if (_this.state.beforeClose) {
        className = className + " " + classNames.beforeClose;
      }
      return typeof additional === "string" && additional ? className + " " + additional : className;
    };

    _this.ariaAttributes = function (items) {
      return Object.keys(items).reduce(function (acc, name) {
        acc["aria-" + name] = items[name];
        return acc;
      }, {});
    };

    _this.state = {
      afterOpen: false,
      beforeClose: false
    };

    _this.shouldClose = null;
    _this.moveFromContentToOverlay = null;
    return _this;
  }

  _createClass(ModalPortal, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      if (this.props.isOpen) {
        this.open();
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      if (false) {}

      if (this.props.isOpen && !prevProps.isOpen) {
        this.open();
      } else if (!this.props.isOpen && prevProps.isOpen) {
        this.close();
      }

      // Focus only needs to be set once when the modal is being opened
      if (this.props.shouldFocusAfterRender && this.state.isOpen && !prevState.isOpen) {
        this.focusContent();
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.afterClose();
      clearTimeout(this.closeTimer);
    }
  }, {
    key: "beforeOpen",
    value: function beforeOpen() {
      var _props = this.props,
          appElement = _props.appElement,
          ariaHideApp = _props.ariaHideApp,
          htmlOpenClassName = _props.htmlOpenClassName,
          bodyOpenClassName = _props.bodyOpenClassName;

      // Add classes.

      classList.add(document.body, bodyOpenClassName);

      htmlOpenClassName && classList.add(document.getElementsByTagName("html")[0], htmlOpenClassName);

      if (ariaHideApp) {
        ariaHiddenInstances += 1;
        ariaAppHider.hide(appElement);
      }
    }

    // Don't steal focus from inner elements

  }, {
    key: "render",
    value: function render() {
      var _props2 = this.props,
          className = _props2.className,
          overlayClassName = _props2.overlayClassName,
          defaultStyles = _props2.defaultStyles;

      var contentStyles = className ? {} : defaultStyles.content;
      var overlayStyles = overlayClassName ? {} : defaultStyles.overlay;

      return this.shouldBeClosed() ? null : _react2.default.createElement(
        "div",
        {
          ref: this.setOverlayRef,
          className: this.buildClassName("overlay", overlayClassName),
          style: _extends({}, overlayStyles, this.props.style.overlay),
          onClick: this.handleOverlayOnClick,
          onMouseDown: this.handleOverlayOnMouseDown,
          "aria-modal": "true"
        },
        _react2.default.createElement(
          "div",
          _extends({
            ref: this.setContentRef,
            style: _extends({}, contentStyles, this.props.style.content),
            className: this.buildClassName("content", className),
            tabIndex: "-1",
            onKeyDown: this.handleKeyDown,
            onMouseDown: this.handleContentOnMouseDown,
            onMouseUp: this.handleContentOnMouseUp,
            onClick: this.handleContentOnClick,
            role: this.props.role,
            "aria-label": this.props.contentLabel
          }, this.ariaAttributes(this.props.aria || {}), {
            "data-testid": this.props.testId
          }),
          this.props.children
        )
      );
    }
  }]);

  return ModalPortal;
}(_react.Component);

ModalPortal.defaultProps = {
  style: {
    overlay: {},
    content: {}
  },
  defaultStyles: {}
};
ModalPortal.propTypes = {
  isOpen: _propTypes2.default.bool.isRequired,
  defaultStyles: _propTypes2.default.shape({
    content: _propTypes2.default.object,
    overlay: _propTypes2.default.object
  }),
  style: _propTypes2.default.shape({
    content: _propTypes2.default.object,
    overlay: _propTypes2.default.object
  }),
  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),
  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),
  bodyOpenClassName: _propTypes2.default.string,
  htmlOpenClassName: _propTypes2.default.string,
  ariaHideApp: _propTypes2.default.bool,
  appElement: _propTypes2.default.instanceOf(_safeHTMLElement2.default),
  onAfterOpen: _propTypes2.default.func,
  onRequestClose: _propTypes2.default.func,
  closeTimeoutMS: _propTypes2.default.number,
  shouldFocusAfterRender: _propTypes2.default.bool,
  shouldCloseOnOverlayClick: _propTypes2.default.bool,
  shouldReturnFocusAfterClose: _propTypes2.default.bool,
  role: _propTypes2.default.string,
  contentLabel: _propTypes2.default.string,
  aria: _propTypes2.default.object,
  children: _propTypes2.default.node,
  shouldCloseOnEsc: _propTypes2.default.bool,
  overlayRef: _propTypes2.default.func,
  contentRef: _propTypes2.default.func,
  testId: _propTypes2.default.string
};
exports.default = ModalPortal;
module.exports = exports["default"];

/***/ }),

/***/ 899:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.handleBlur = handleBlur;
exports.handleFocus = handleFocus;
exports.markForFocusLater = markForFocusLater;
exports.returnFocus = returnFocus;
exports.popWithoutFocus = popWithoutFocus;
exports.setupScopedFocus = setupScopedFocus;
exports.teardownScopedFocus = teardownScopedFocus;

var _tabbable = __webpack_require__(859);

var _tabbable2 = _interopRequireDefault(_tabbable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var focusLaterElements = [];
var modalElement = null;
var needToFocus = false;

function handleBlur() {
  needToFocus = true;
}

function handleFocus() {
  if (needToFocus) {
    needToFocus = false;
    if (!modalElement) {
      return;
    }
    // need to see how jQuery shims document.on('focusin') so we don't need the
    // setTimeout, firefox doesn't support focusin, if it did, we could focus
    // the element outside of a setTimeout. Side-effect of this implementation
    // is that the document.body gets focus, and then we focus our element right
    // after, seems fine.
    setTimeout(function () {
      if (modalElement.contains(document.activeElement)) {
        return;
      }
      var el = (0, _tabbable2.default)(modalElement)[0] || modalElement;
      el.focus();
    }, 0);
  }
}

function markForFocusLater() {
  focusLaterElements.push(document.activeElement);
}

/* eslint-disable no-console */
function returnFocus() {
  var toFocus = null;
  try {
    if (focusLaterElements.length !== 0) {
      toFocus = focusLaterElements.pop();
      toFocus.focus();
    }
    return;
  } catch (e) {
    console.warn(["You tried to return focus to", toFocus, "but it is not in the DOM anymore"].join(" "));
  }
}
/* eslint-enable no-console */

function popWithoutFocus() {
  focusLaterElements.length > 0 && focusLaterElements.pop();
}

function setupScopedFocus(element) {
  modalElement = element;

  if (window.addEventListener) {
    window.addEventListener("blur", handleBlur, false);
    document.addEventListener("focus", handleFocus, true);
  } else {
    window.attachEvent("onBlur", handleBlur);
    document.attachEvent("onFocus", handleFocus);
  }
}

function teardownScopedFocus() {
  modalElement = null;

  if (window.addEventListener) {
    window.removeEventListener("blur", handleBlur);
    document.removeEventListener("focus", handleFocus);
  } else {
    window.detachEvent("onBlur", handleBlur);
    document.detachEvent("onFocus", handleFocus);
  }
}

/***/ }),

/***/ 900:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = scopeTab;

var _tabbable = __webpack_require__(859);

var _tabbable2 = _interopRequireDefault(_tabbable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function scopeTab(node, event) {
  var tabbable = (0, _tabbable2.default)(node);

  if (!tabbable.length) {
    // Do nothing, since there are no elements that can receive focus.
    event.preventDefault();
    return;
  }

  var shiftKey = event.shiftKey;
  var head = tabbable[0];
  var tail = tabbable[tabbable.length - 1];

  // proceed with default browser behavior on tab.
  // Focus on last element on shift + tab.
  if (node === document.activeElement) {
    if (!shiftKey) return;
    target = tail;
  }

  var target;
  if (tail === document.activeElement && !shiftKey) {
    target = head;
  }

  if (head === document.activeElement && shiftKey) {
    target = tail;
  }

  if (target) {
    event.preventDefault();
    target.focus();
    return;
  }

  // Safari radio issue.
  //
  // Safari does not move the focus to the radio button,
  // so we need to force it to really walk through all elements.
  //
  // This is very error prone, since we are trying to guess
  // if it is a safari browser from the first occurence between
  // chrome or safari.
  //
  // The chrome user agent contains the first ocurrence
  // as the 'chrome/version' and later the 'safari/version'.
  var checkSafari = /(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);
  var isSafariDesktop = checkSafari != null && checkSafari[1] != "Chrome" && /\biPod\b|\biPad\b/g.exec(navigator.userAgent) == null;

  // If we are not in safari desktop, let the browser control
  // the focus
  if (!isSafariDesktop) return;

  var x = tabbable.indexOf(document.activeElement);

  if (x > -1) {
    x += shiftKey ? -1 : 1;
  }

  event.preventDefault();

  tabbable[x].focus();
}
module.exports = exports["default"];

/***/ }),

/***/ 901:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * Copyright 2014-2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 */



/**
 * Similar to invariant but only logs a warning if the condition is not met.
 * This can be used to log issues in development environments in critical
 * paths. Removing the logging code for production environments will keep the
 * same logic and follow the same code paths.
 */

var __DEV__ = "production" !== 'production';

var warning = function() {};

if (__DEV__) {
  warning = function(condition, format, args) {
    var len = arguments.length;
    args = new Array(len > 2 ? len - 2 : 0);
    for (var key = 2; key < len; key++) {
      args[key - 2] = arguments[key];
    }
    if (format === undefined) {
      throw new Error(
        '`warning(condition, format, ...args)` requires a warning ' +
        'message argument'
      );
    }

    if (format.length < 10 || (/^[s\W]*$/).test(format)) {
      throw new Error(
        'The warning format should be able to uniquely identify this ' +
        'warning. Please, use a more descriptive format than: ' + format
      );
    }

    if (!condition) {
      var argIndex = 0;
      var message = 'Warning: ' +
        format.replace(/%s/g, function() {
          return args[argIndex++];
        });
      if (typeof console !== 'undefined') {
        console.error(message);
      }
      try {
        // This error was thrown as a convenience so that you can use this stack
        // to find the callsite that caused this warning to fire.
        throw new Error(message);
      } catch(x) {}
    }
  };
}

module.exports = warning;


/***/ }),

/***/ 902:
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
/* global define */

(function () {
	'use strict';

	var canUseDOM = !!(
		typeof window !== 'undefined' &&
		window.document &&
		window.document.createElement
	);

	var ExecutionEnvironment = {

		canUseDOM: canUseDOM,

		canUseWorkers: typeof Worker !== 'undefined',

		canUseEventListeners:
			canUseDOM && !!(window.addEventListener || window.attachEvent),

		canUseViewport: canUseDOM && !!window.screen

	};

	if (true) {
		!(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {
			return ExecutionEnvironment;
		}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}

}());


/***/ }),

/***/ 903:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.dumpClassLists = dumpClassLists;
var htmlClassList = {};
var docBodyClassList = {};

function dumpClassLists() {
  if (false) { var _x, x, buffer, classes; }
}

/**
 * Track the number of reference of a class.
 * @param {object} poll The poll to receive the reference.
 * @param {string} className The class name.
 * @return {string}
 */
var incrementReference = function incrementReference(poll, className) {
  if (!poll[className]) {
    poll[className] = 0;
  }
  poll[className] += 1;
  return className;
};

/**
 * Drop the reference of a class.
 * @param {object} poll The poll to receive the reference.
 * @param {string} className The class name.
 * @return {string}
 */
var decrementReference = function decrementReference(poll, className) {
  if (poll[className]) {
    poll[className] -= 1;
  }
  return className;
};

/**
 * Track a class and add to the given class list.
 * @param {Object} classListRef A class list of an element.
 * @param {Object} poll         The poll to be used.
 * @param {Array}  classes      The list of classes to be tracked.
 */
var trackClass = function trackClass(classListRef, poll, classes) {
  classes.forEach(function (className) {
    incrementReference(poll, className);
    classListRef.add(className);
  });
};

/**
 * Untrack a class and remove from the given class list if the reference
 * reaches 0.
 * @param {Object} classListRef A class list of an element.
 * @param {Object} poll         The poll to be used.
 * @param {Array}  classes      The list of classes to be untracked.
 */
var untrackClass = function untrackClass(classListRef, poll, classes) {
  classes.forEach(function (className) {
    decrementReference(poll, className);
    poll[className] === 0 && classListRef.remove(className);
  });
};

/**
 * Public inferface to add classes to the document.body.
 * @param {string} bodyClass The class string to be added.
 *                           It may contain more then one class
 *                           with ' ' as separator.
 */
var add = exports.add = function add(element, classString) {
  return trackClass(element.classList, element.nodeName.toLowerCase() == "html" ? htmlClassList : docBodyClassList, classString.split(" "));
};

/**
 * Public inferface to remove classes from the document.body.
 * @param {string} bodyClass The class string to be added.
 *                           It may contain more then one class
 *                           with ' ' as separator.
 */
var remove = exports.remove = function remove(element, classString) {
  return untrackClass(element.classList, element.nodeName.toLowerCase() == "html" ? htmlClassList : docBodyClassList, classString.split(" "));
};

/***/ }),

/***/ 904:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "polyfill", function() { return polyfill; });
/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

function componentWillMount() {
  // Call this.constructor.gDSFP to support sub-classes.
  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);
  if (state !== null && state !== undefined) {
    this.setState(state);
  }
}

function componentWillReceiveProps(nextProps) {
  // Call this.constructor.gDSFP to support sub-classes.
  // Use the setState() updater to ensure state isn't stale in certain edge cases.
  function updater(prevState) {
    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);
    return state !== null && state !== undefined ? state : null;
  }
  // Binding "this" is important for shallow renderer support.
  this.setState(updater.bind(this));
}

function componentWillUpdate(nextProps, nextState) {
  try {
    var prevProps = this.props;
    var prevState = this.state;
    this.props = nextProps;
    this.state = nextState;
    this.__reactInternalSnapshotFlag = true;
    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(
      prevProps,
      prevState
    );
  } finally {
    this.props = prevProps;
    this.state = prevState;
  }
}

// React may warn about cWM/cWRP/cWU methods being deprecated.
// Add a flag to suppress these warnings for this special case.
componentWillMount.__suppressDeprecationWarning = true;
componentWillReceiveProps.__suppressDeprecationWarning = true;
componentWillUpdate.__suppressDeprecationWarning = true;

function polyfill(Component) {
  var prototype = Component.prototype;

  if (!prototype || !prototype.isReactComponent) {
    throw new Error('Can only polyfill class components');
  }

  if (
    typeof Component.getDerivedStateFromProps !== 'function' &&
    typeof prototype.getSnapshotBeforeUpdate !== 'function'
  ) {
    return Component;
  }

  // If new component APIs are defined, "unsafe" lifecycles won't be called.
  // Error if any of these lifecycles are present,
  // Because they would work differently between older and newer (16.3+) versions of React.
  var foundWillMountName = null;
  var foundWillReceivePropsName = null;
  var foundWillUpdateName = null;
  if (typeof prototype.componentWillMount === 'function') {
    foundWillMountName = 'componentWillMount';
  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {
    foundWillMountName = 'UNSAFE_componentWillMount';
  }
  if (typeof prototype.componentWillReceiveProps === 'function') {
    foundWillReceivePropsName = 'componentWillReceiveProps';
  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {
    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';
  }
  if (typeof prototype.componentWillUpdate === 'function') {
    foundWillUpdateName = 'componentWillUpdate';
  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {
    foundWillUpdateName = 'UNSAFE_componentWillUpdate';
  }
  if (
    foundWillMountName !== null ||
    foundWillReceivePropsName !== null ||
    foundWillUpdateName !== null
  ) {
    var componentName = Component.displayName || Component.name;
    var newApiName =
      typeof Component.getDerivedStateFromProps === 'function'
        ? 'getDerivedStateFromProps()'
        : 'getSnapshotBeforeUpdate()';

    throw Error(
      'Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n' +
        componentName +
        ' uses ' +
        newApiName +
        ' but also contains the following legacy lifecycles:' +
        (foundWillMountName !== null ? '\n  ' + foundWillMountName : '') +
        (foundWillReceivePropsName !== null
          ? '\n  ' + foundWillReceivePropsName
          : '') +
        (foundWillUpdateName !== null ? '\n  ' + foundWillUpdateName : '') +
        '\n\nThe above lifecycles should be removed. Learn more about this warning here:\n' +
        'https://fb.me/react-async-component-lifecycle-hooks'
    );
  }

  // React <= 16.2 does not support static getDerivedStateFromProps.
  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.
  // Newer versions of React will ignore these lifecycles if gDSFP exists.
  if (typeof Component.getDerivedStateFromProps === 'function') {
    prototype.componentWillMount = componentWillMount;
    prototype.componentWillReceiveProps = componentWillReceiveProps;
  }

  // React <= 16.2 does not support getSnapshotBeforeUpdate.
  // As a workaround, use cWU to invoke the new lifecycle.
  // Newer versions of React will ignore that lifecycle if gSBU exists.
  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {
    if (typeof prototype.componentDidUpdate !== 'function') {
      throw new Error(
        'Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype'
      );
    }

    prototype.componentWillUpdate = componentWillUpdate;

    var componentDidUpdate = prototype.componentDidUpdate;

    prototype.componentDidUpdate = function componentDidUpdatePolyfill(
      prevProps,
      prevState,
      maybeSnapshot
    ) {
      // 16.3+ will not execute our will-update method;
      // It will pass a snapshot value to did-update though.
      // Older versions will require our polyfilled will-update value.
      // We need to handle both cases, but can't just check for the presence of "maybeSnapshot",
      // Because for <= 15.x versions this might be a "prevContext" object.
      // We also can't just check "__reactInternalSnapshot",
      // Because get-snapshot might return a falsy value.
      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.
      var snapshot = this.__reactInternalSnapshotFlag
        ? this.__reactInternalSnapshot
        : maybeSnapshot;

      componentDidUpdate.call(this, prevProps, prevState, snapshot);
    };
  }

  return Component;
}




/***/ })

};;